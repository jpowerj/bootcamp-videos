<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Assignment 6 Solutions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="_w06-solutions_files/libs/clipboard/clipboard.min.js"></script>
<script src="_w06-solutions_files/libs/quarto-html/quarto.js"></script>
<script src="_w06-solutions_files/libs/quarto-html/popper.min.js"></script>
<script src="_w06-solutions_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="_w06-solutions_files/libs/quarto-html/anchor.min.js"></script>
<link href="_w06-solutions_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="_w06-solutions_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="_w06-solutions_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="_w06-solutions_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="_w06-solutions_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assignment 6 Solutions</h1>
<p class="subtitle lead">DSAN Bootcamp 2024</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="part-1-generating-a-deck-of-cards" class="level2">
<h2 class="anchored" data-anchor-id="part-1-generating-a-deck-of-cards">Part 1: Generating a Deck of Cards</h2>
<section id="question-1.1" class="level3">
<h3 class="anchored" data-anchor-id="question-1.1">Question 1.1</h3>
<p>Create a vector for card <strong>suits</strong> with the variable name <code>suits</code>, containing the following four elements (as character strings): <code>"Diamonds"</code>, <code>"Clubs"</code>, <code>"Hearts"</code>, <code>"Spades"</code>. Write <code>suits</code> (on its own) as the final line of your code cell, so that the output of the cell shows the contents of the vector you created.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>suits <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Diamonds"</span>, <span class="st">"Clubs"</span>, <span class="st">"Hearts"</span>, <span class="st">"Spades"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>suits</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Diamonds" "Clubs"    "Hearts"   "Spades"  </code></pre>
</div>
</div>
</section>
<section id="question-1.2" class="level3">
<h3 class="anchored" data-anchor-id="question-1.2">Question 1.2</h3>
<p>Create a vector for card <strong>numbers</strong> with the variable name <code>numbers</code>, containing the character string <code>"Ace"</code> followed by the integers 2 through 10. Display the contents of <code>numbers</code> as the output of your code cell (as you did in Q1.1).</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Ace"</span>, <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">10</span>))</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>numbers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Ace" "2"   "3"   "4"   "5"   "6"   "7"   "8"   "9"   "10" </code></pre>
</div>
</div>
</section>
<section id="question-1.3" class="level3">
<h3 class="anchored" data-anchor-id="question-1.3">Question 1.3</h3>
<p>Create a vector for <strong>face cards</strong> with the variable name <code>faces</code>, containing the character strings <code>"Jack"</code>, <code>"Queen"</code>, and <code>"King"</code>. Display the contents of <code>faces</code> as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>faces <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Jack"</span>, <span class="st">"Queen"</span>, <span class="st">"King"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>faces</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Jack"  "Queen" "King" </code></pre>
</div>
</div>
</section>
<section id="question-1.4" class="level3">
<h3 class="anchored" data-anchor-id="question-1.4">Question 1.4</h3>
<p>Create a new vector with the variable name <code>card_names</code>, formed by concatenating the elements of the <code>faces</code> vector to the end of the <code>numbers</code> vector. Display the contents of <code>card_names</code> as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>card_names <span class="ot">&lt;-</span> <span class="fu">c</span>(numbers, faces)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>card_names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Ace"   "2"     "3"     "4"     "5"     "6"     "7"     "8"     "9"    
[10] "10"    "Jack"  "Queen" "King" </code></pre>
</div>
</div>
</section>
<section id="question-1.5" class="level3">
<h3 class="anchored" data-anchor-id="question-1.5">Question 1.5</h3>
<p>Repeat each element in <code>card_names</code> four times, and name the new variable <code>card_names_4</code>. Display the contents of <code>card_names_4</code> as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>card_names_4 <span class="ot">&lt;-</span> <span class="fu">rep</span>(card_names, <span class="dv">4</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>card_names_4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Ace"   "2"     "3"     "4"     "5"     "6"     "7"     "8"     "9"    
[10] "10"    "Jack"  "Queen" "King"  "Ace"   "2"     "3"     "4"     "5"    
[19] "6"     "7"     "8"     "9"     "10"    "Jack"  "Queen" "King"  "Ace"  
[28] "2"     "3"     "4"     "5"     "6"     "7"     "8"     "9"     "10"   
[37] "Jack"  "Queen" "King"  "Ace"   "2"     "3"     "4"     "5"     "6"    
[46] "7"     "8"     "9"     "10"    "Jack"  "Queen" "King" </code></pre>
</div>
</div>
</section>
<section id="question-1.6" class="level3">
<h3 class="anchored" data-anchor-id="question-1.6">Question 1.6</h3>
<p>Repeat each element in <code>suits</code> 13 times, naming the new variable <code>suits_13</code>. Display the contents of <code>suits_13</code> as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>suits_13 <span class="ot">&lt;-</span> <span class="fu">rep</span>(suits, <span class="dv">13</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>suits_13</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Diamonds" "Clubs"    "Hearts"   "Spades"   "Diamonds" "Clubs"   
 [7] "Hearts"   "Spades"   "Diamonds" "Clubs"    "Hearts"   "Spades"  
[13] "Diamonds" "Clubs"    "Hearts"   "Spades"   "Diamonds" "Clubs"   
[19] "Hearts"   "Spades"   "Diamonds" "Clubs"    "Hearts"   "Spades"  
[25] "Diamonds" "Clubs"    "Hearts"   "Spades"   "Diamonds" "Clubs"   
[31] "Hearts"   "Spades"   "Diamonds" "Clubs"    "Hearts"   "Spades"  
[37] "Diamonds" "Clubs"    "Hearts"   "Spades"   "Diamonds" "Clubs"   
[43] "Hearts"   "Spades"   "Diamonds" "Clubs"    "Hearts"   "Spades"  
[49] "Diamonds" "Clubs"    "Hearts"   "Spades"  </code></pre>
</div>
</div>
</section>
<section id="question-1.7" class="level3">
<h3 class="anchored" data-anchor-id="question-1.7">Question 1.7</h3>
<p>Create a <code>data.frame</code> variable named <code>card_deck</code>, constructed so that its first column is named <code>card_name</code> and contains the values of <code>card_names_4</code>, and its second column is named <code>suit</code> and contains the values of <code>suits_13</code>. Display the contents of <code>card_deck</code> as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>card_deck <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">card_name=</span>card_names_4,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">suit=</span>suits_13</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>card_deck</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   card_name     suit
1        Ace Diamonds
2          2    Clubs
3          3   Hearts
4          4   Spades
5          5 Diamonds
6          6    Clubs
7          7   Hearts
8          8   Spades
9          9 Diamonds
10        10    Clubs
11      Jack   Hearts
12     Queen   Spades
13      King Diamonds
14       Ace    Clubs
15         2   Hearts
16         3   Spades
17         4 Diamonds
18         5    Clubs
19         6   Hearts
20         7   Spades
21         8 Diamonds
22         9    Clubs
23        10   Hearts
24      Jack   Spades
25     Queen Diamonds
26      King    Clubs
27       Ace   Hearts
28         2   Spades
29         3 Diamonds
30         4    Clubs
31         5   Hearts
32         6   Spades
33         7 Diamonds
34         8    Clubs
35         9   Hearts
36        10   Spades
37      Jack Diamonds
38     Queen    Clubs
39      King   Hearts
40       Ace   Spades
41         2 Diamonds
42         3    Clubs
43         4   Hearts
44         5   Spades
45         6 Diamonds
46         7    Clubs
47         8   Hearts
48         9   Spades
49        10 Diamonds
50      Jack    Clubs
51     Queen   Hearts
52      King   Spades</code></pre>
</div>
</div>
</section>
<section id="question-1.8" class="level3">
<h3 class="anchored" data-anchor-id="question-1.8">Question 1.8</h3>
<p>Create a new column in <code>card_deck</code> named <code>card</code> by <strong>pasting</strong> the values in the first column (<code>card_name</code>) to the values in the second column (<code>suit</code>). Here you can use the built-in R function <code>paste()</code> to paste these 2 variables together. Display the <em>new</em> contents of <code>card_deck</code> as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>card_deck[,<span class="st">"card"</span>] <span class="ot">&lt;-</span> <span class="fu">paste</span>(card_deck<span class="sc">$</span>card_name, card_deck<span class="sc">$</span>suit)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>card_deck</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   card_name     suit           card
1        Ace Diamonds   Ace Diamonds
2          2    Clubs        2 Clubs
3          3   Hearts       3 Hearts
4          4   Spades       4 Spades
5          5 Diamonds     5 Diamonds
6          6    Clubs        6 Clubs
7          7   Hearts       7 Hearts
8          8   Spades       8 Spades
9          9 Diamonds     9 Diamonds
10        10    Clubs       10 Clubs
11      Jack   Hearts    Jack Hearts
12     Queen   Spades   Queen Spades
13      King Diamonds  King Diamonds
14       Ace    Clubs      Ace Clubs
15         2   Hearts       2 Hearts
16         3   Spades       3 Spades
17         4 Diamonds     4 Diamonds
18         5    Clubs        5 Clubs
19         6   Hearts       6 Hearts
20         7   Spades       7 Spades
21         8 Diamonds     8 Diamonds
22         9    Clubs        9 Clubs
23        10   Hearts      10 Hearts
24      Jack   Spades    Jack Spades
25     Queen Diamonds Queen Diamonds
26      King    Clubs     King Clubs
27       Ace   Hearts     Ace Hearts
28         2   Spades       2 Spades
29         3 Diamonds     3 Diamonds
30         4    Clubs        4 Clubs
31         5   Hearts       5 Hearts
32         6   Spades       6 Spades
33         7 Diamonds     7 Diamonds
34         8    Clubs        8 Clubs
35         9   Hearts       9 Hearts
36        10   Spades      10 Spades
37      Jack Diamonds  Jack Diamonds
38     Queen    Clubs    Queen Clubs
39      King   Hearts    King Hearts
40       Ace   Spades     Ace Spades
41         2 Diamonds     2 Diamonds
42         3    Clubs        3 Clubs
43         4   Hearts       4 Hearts
44         5   Spades       5 Spades
45         6 Diamonds     6 Diamonds
46         7    Clubs        7 Clubs
47         8   Hearts       8 Hearts
48         9   Spades       9 Spades
49        10 Diamonds    10 Diamonds
50      Jack    Clubs     Jack Clubs
51     Queen   Hearts   Queen Hearts
52      King   Spades    King Spades</code></pre>
</div>
</div>
</section>
<section id="question-1.9" class="level3">
<h3 class="anchored" data-anchor-id="question-1.9">Question 1.9</h3>
<p>Now you have a deck of cards, which you can use to compute probabilities! First, to verify that the deck was successfully created, write code which outputs the <strong>number of rows</strong> in the <code>card_deck</code> <code>data.frame</code> (it should be 52, if the above steps were carried out correctly).</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(card_deck)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 52</code></pre>
</div>
</div>
</section>
<section id="question-1.10" class="level3">
<h3 class="anchored" data-anchor-id="question-1.10">Question 1.10</h3>
<p>Now, use what you know about <strong>filtering</strong> the values in a <code>data.frame</code> to compute the probability that a randomly-drawn card from <code>card_deck</code> is a Spade, and display this probability as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>spade_cards <span class="ot">&lt;-</span> card_deck[card_deck<span class="sc">$</span>suit <span class="sc">==</span> <span class="st">"Spades"</span>,]</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>p_spade <span class="ot">&lt;-</span> <span class="fu">nrow</span>(spade_cards) <span class="sc">/</span> <span class="fu">nrow</span>(card_deck)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>p_spade</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.25</code></pre>
</div>
</div>
</section>
<section id="question-1.11" class="level3">
<h3 class="anchored" data-anchor-id="question-1.11">Question 1.11</h3>
<p>Use <code>card_deck</code> again to compute the probability that, when drawing <em>two</em> cards from the deck, the first is a Spade and the second is a Heart. Display this probability as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A few ways to do this, but here's one</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>card_deck_post_spade <span class="ot">&lt;-</span> card_deck[card_deck<span class="sc">$</span>card <span class="sc">!=</span> <span class="st">"Ace Spades"</span>,]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>hearts_post_spade <span class="ot">&lt;-</span> card_deck_post_spade[card_deck_post_spade<span class="sc">$</span>suit <span class="sc">==</span> <span class="st">"Hearts"</span>,]</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>p_heart_after_spade <span class="ot">&lt;-</span> <span class="fu">nrow</span>(hearts_post_spade) <span class="sc">/</span> <span class="fu">nrow</span>(card_deck_post_spade)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>p_spade_heart <span class="ot">&lt;-</span> p_spade <span class="sc">*</span> p_heart_after_spade</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>p_spade_heart</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.06372549</code></pre>
</div>
</div>
</section>
<section id="question-1.12" class="level3">
<h3 class="anchored" data-anchor-id="question-1.12">Question 1.12</h3>
<p>Now let’s simulate playing poker! Using what you know about sampling from a <code>data.frame</code>, sample 5 cards from <code>card_deck</code> (please use <code>set.seed(2024)</code> to set the random seed to be 2024, so that results are the same across different submissions). Display the sampled 5-card hand as the output of your code cell. Then, using the following image as a guide if you’re unfamiliar with poker, comment on the cards you obtained—did your random draw result in one of the types of hands displayed in the image?</p>
<p><img src="images/poker.png" class="img-fluid"></p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2024</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>indices <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">nrow</span>(card_deck), <span class="dv">5</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>sampled_cards <span class="ot">&lt;-</span> card_deck[indices,]</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>sampled_cards</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   card_name     suit          card
2          2    Clubs       2 Clubs
37      Jack Diamonds Jack Diamonds
45         6 Diamonds    6 Diamonds
17         4 Diamonds    4 Diamonds
50      Jack    Clubs    Jack Clubs</code></pre>
</div>
</div>
<p>Using the rankings from the image, we have the following (from “best” to “worst”):</p>
<ul>
<li>Pair (Jack of Clubs and Jack of Diamonds)</li>
<li>High Card (Jack)</li>
</ul>
</section>
</section>
<section id="problem-2" class="level2">
<h2 class="anchored" data-anchor-id="problem-2">Problem 2</h2>
<p>For this problem, rather than creating our own dataset from scratch, we will load and analyze a pre-existing dataset on <em>global superstore orders</em>.</p>
<section id="question-2.1" class="level3">
<h3 class="anchored" data-anchor-id="question-2.1">Question 2.1</h3>
<ul>
<li>First, import the file named <code>Global_Superstore_Orders_2016.csv</code> using R’s built-in <code>read.csv()</code> function, storing the result into a <code>data.frame</code> variable named <code>orders</code>.</li>
<li>Next, read more about the <code>read.csv()</code> function by typing <code>??read.csv</code> in the R Console. Make sure you understand the optional <code>header</code> argument, since you’ll need to provide the <code>TRUE</code> as the value for this argument when you call the <code>read.csv()</code> function in the previous step!</li>
<li>Finally, display the first six rows of <code>orders</code> as the output of your code cell, by using R’s built-in <code>head()</code> function.</li>
</ul>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>orders <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Global_Superstore_Orders_2016.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(orders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Row.ID        Order.ID Order.Date  Ship.Date    Ship.Mode Customer.ID
1  32298  CA-2012-124891  7/31/2012  7/31/2012     Same Day    RH-19495
2  26341   IN-2013-77878   2/5/2013   2/7/2013 Second Class    JR-16210
3  25330   IN-2013-71249 10/17/2013 10/18/2013  First Class    CR-12730
4  13524 ES-2013-1579342  1/28/2013  1/30/2013  First Class    KM-16375
5  47221    SG-2013-4320  11/5/2013  11/6/2013     Same Day     RH-9495
6  22732   IN-2013-42360  6/28/2013   7/1/2013 Second Class    JM-15655
     Customer.Name     Segment          City           State       Country
1      Rick Hansen    Consumer New York City        New York United States
2    Justin Ritter   Corporate    Wollongong New South Wales     Australia
3     Craig Reiter    Consumer      Brisbane      Queensland     Australia
4 Katherine Murray Home Office        Berlin          Berlin       Germany
5      Rick Hansen    Consumer         Dakar           Dakar       Senegal
6      Jim Mitchum   Corporate        Sydney New South Wales     Australia
  Postal.Code Market  Region       Product.ID   Category Sub.Category
1       10024     US    East  TEC-AC-10003033 Technology  Accessories
2          NA   APAC Oceania  FUR-CH-10003950  Furniture       Chairs
3          NA   APAC Oceania  TEC-PH-10004664 Technology       Phones
4          NA     EU Central  TEC-PH-10004583 Technology       Phones
5          NA Africa  Africa TEC-SHA-10000501 Technology      Copiers
6          NA   APAC Oceania  TEC-PH-10000030 Technology       Phones
                                                        Product.Name    Sales
1 Plantronics CS510 - Over-the-Head monaural Wireless Headset System 2309.650
2                          Novimex Executive Leather Armchair, Black 3709.395
3                                  Nokia Smart Phone, with Caller ID 5175.171
4                                     Motorola Smart Phone, Cordless 2892.510
5                                     Sharp Wireless Fax, High-Speed 2832.960
6                                Samsung Smart Phone, with Caller ID 2862.675
  Quantity Discount    Profit Shipping.Cost Order.Priority
1        7      0.0  762.1845        933.57       Critical
2        9      0.1 -288.7650        923.63       Critical
3        9      0.1  919.9710        915.49         Medium
4        5      0.1  -96.5400        910.16         Medium
5        8      0.0  311.5200        903.04       Critical
6        5      0.1  763.2750        897.35       Critical</code></pre>
</div>
</div>
</section>
<section id="question-2.2" class="level3">
<h3 class="anchored" data-anchor-id="question-2.2">Question 2.2</h3>
<p>Use <code>str()</code> to check the type of each variable. You’ll see that <code>read.csv()</code> did not correctly identify the data types for all columns loaded from the <code>.csv</code> file. Which variables have inappropriate types, and what should their data types be instead?</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(orders)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   51290 obs. of  24 variables:
 $ Row.ID        : int  32298 26341 25330 13524 47221 22732 30570 31192 40155 40936 ...
 $ Order.ID      : chr  "CA-2012-124891" "IN-2013-77878" "IN-2013-71249" "ES-2013-1579342" ...
 $ Order.Date    : chr  "7/31/2012" "2/5/2013" "10/17/2013" "1/28/2013" ...
 $ Ship.Date     : chr  "7/31/2012" "2/7/2013" "10/18/2013" "1/30/2013" ...
 $ Ship.Mode     : chr  "Same Day" "Second Class" "First Class" "First Class" ...
 $ Customer.ID   : chr  "RH-19495" "JR-16210" "CR-12730" "KM-16375" ...
 $ Customer.Name : chr  "Rick Hansen" "Justin Ritter" "Craig Reiter" "Katherine Murray" ...
 $ Segment       : chr  "Consumer" "Corporate" "Consumer" "Home Office" ...
 $ City          : chr  "New York City" "Wollongong" "Brisbane" "Berlin" ...
 $ State         : chr  "New York" "New South Wales" "Queensland" "Berlin" ...
 $ Country       : chr  "United States" "Australia" "Australia" "Germany" ...
 $ Postal.Code   : int  10024 NA NA NA NA NA NA NA 95823 28027 ...
 $ Market        : chr  "US" "APAC" "APAC" "EU" ...
 $ Region        : chr  "East" "Oceania" "Oceania" "Central" ...
 $ Product.ID    : chr  "TEC-AC-10003033" "FUR-CH-10003950" "TEC-PH-10004664" "TEC-PH-10004583" ...
 $ Category      : chr  "Technology" "Furniture" "Technology" "Technology" ...
 $ Sub.Category  : chr  "Accessories" "Chairs" "Phones" "Phones" ...
 $ Product.Name  : chr  "Plantronics CS510 - Over-the-Head monaural Wireless Headset System" "Novimex Executive Leather Armchair, Black" "Nokia Smart Phone, with Caller ID" "Motorola Smart Phone, Cordless" ...
 $ Sales         : num  2310 3709 5175 2893 2833 ...
 $ Quantity      : int  7 9 9 5 8 5 4 6 5 13 ...
 $ Discount      : num  0 0.1 0.1 0.1 0 0.1 0 0 0.2 0.4 ...
 $ Profit        : num  762.2 -288.8 920 -96.5 311.5 ...
 $ Shipping.Cost : num  934 924 915 910 903 ...
 $ Order.Priority: chr  "Critical" "Critical" "Medium" "Medium" ...</code></pre>
</div>
</div>
<ul>
<li><code>Order.Date</code>: Should be <code>Date</code> instead of <code>character</code></li>
<li><code>Ship.Date</code>: Should be <code>Date</code> instead of <code>character</code></li>
<li><code>Order.Priority</code>: Should be <code>factor</code> instead of <code>character</code></li>
</ul>
</section>
<section id="question-2.3" class="level3">
<h3 class="anchored" data-anchor-id="question-2.3">Question 2.3</h3>
<p>Create a separate <code>data.frame</code> named <code>sales_data</code>, containing only the following columns from <code>orders</code>: <code>Order.Date</code>, <code>Ship.Date</code>, <code>State</code>, <code>Country</code>, <code>Sales</code>, <code>Profit</code>, and <code>Order.Priority</code>. Display the first six rows of <code>sales_data</code> (using <code>head()</code>) as the output of your code cell.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>sales_data <span class="ot">&lt;-</span> orders[<span class="fu">c</span>(<span class="st">"Order.Date"</span>,<span class="st">"Ship.Date"</span>,<span class="st">"State"</span>,<span class="st">"Country"</span>,<span class="st">"Sales"</span>,<span class="st">"Profit"</span>,<span class="st">"Order.Priority"</span>)]</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sales_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Order.Date  Ship.Date           State       Country    Sales    Profit
1  7/31/2012  7/31/2012        New York United States 2309.650  762.1845
2   2/5/2013   2/7/2013 New South Wales     Australia 3709.395 -288.7650
3 10/17/2013 10/18/2013      Queensland     Australia 5175.171  919.9710
4  1/28/2013  1/30/2013          Berlin       Germany 2892.510  -96.5400
5  11/5/2013  11/6/2013           Dakar       Senegal 2832.960  311.5200
6  6/28/2013   7/1/2013 New South Wales     Australia 2862.675  763.2750
  Order.Priority
1       Critical
2       Critical
3         Medium
4         Medium
5       Critical
6       Critical</code></pre>
</div>
</div>
</section>
<section id="question-2.4" class="level3">
<h3 class="anchored" data-anchor-id="question-2.4">Question 2.4</h3>
<p>Update the <code>sales_data</code> <code>data.frame</code> you created in Q2.3 so that the columns you identified in Q2.2 have the correct types (<code>factor</code>, <code>Date</code>, etc.).</p>
<p><em>Hint</em>: To convert to the <code>Date</code> type, you’ll need to identify what <em>format</em> the dates are in, then use the appropriate function from the <strong>Parse Date-Times</strong> section of the <a href="https://rawgit.com/rstudio/cheatsheets/main/lubridate.pdf" target="_blank"><code>lubridate</code> cheat sheet</a>. The following cell provides an example, where we parse the <code>character</code> string <code>"2024-05-01"</code> into a <code>Date</code> object representing the 31st day of December in the year 2024:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>example_date_str <span class="ot">&lt;-</span> <span class="st">"2024-12-31"</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>parsed_date <span class="ot">&lt;-</span> <span class="fu">ymd</span>(example_date_str)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>parsed_date</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-12-31"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(parsed_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>sales_data[<span class="st">'Order.Date'</span>] <span class="ot">&lt;-</span> <span class="fu">mdy</span>(sales_data<span class="sc">$</span>Order.Date)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>sales_data[<span class="st">'Ship.Date'</span>] <span class="ot">&lt;-</span> <span class="fu">mdy</span>(sales_data<span class="sc">$</span>Ship.Date)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>sales_data[<span class="st">'Order.Priority'</span>] <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  sales_data<span class="sc">$</span>Order.Priority,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Low"</span>, <span class="st">"Medium"</span>, <span class="st">"High"</span>, <span class="st">"Critical"</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sales_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   51290 obs. of  7 variables:
 $ Order.Date    : Date, format: "2012-07-31" "2013-02-05" ...
 $ Ship.Date     : Date, format: "2012-07-31" "2013-02-07" ...
 $ State         : chr  "New York" "New South Wales" "Queensland" "Berlin" ...
 $ Country       : chr  "United States" "Australia" "Australia" "Germany" ...
 $ Sales         : num  2310 3709 5175 2893 2833 ...
 $ Profit        : num  762.2 -288.8 920 -96.5 311.5 ...
 $ Order.Priority: Factor w/ 4 levels "Low","Medium",..: 4 4 2 2 4 4 4 3 1 4 ...</code></pre>
</div>
</div>
</section>
<section id="question-2.5" class="level3">
<h3 class="anchored" data-anchor-id="question-2.5">Question 2.5</h3>
<p>Use <code>str()</code> on the updated <code>sales_data</code> variable to confirm that each of the variables you identified in Q2.2 now has the correct type.</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(sales_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   51290 obs. of  7 variables:
 $ Order.Date    : Date, format: "2012-07-31" "2013-02-05" ...
 $ Ship.Date     : Date, format: "2012-07-31" "2013-02-07" ...
 $ State         : chr  "New York" "New South Wales" "Queensland" "Berlin" ...
 $ Country       : chr  "United States" "Australia" "Australia" "Germany" ...
 $ Sales         : num  2310 3709 5175 2893 2833 ...
 $ Profit        : num  762.2 -288.8 920 -96.5 311.5 ...
 $ Order.Priority: Factor w/ 4 levels "Low","Medium",..: 4 4 2 2 4 4 4 3 1 4 ...</code></pre>
</div>
</div>
</section>
<section id="question-2.6" class="level3">
<h3 class="anchored" data-anchor-id="question-2.6">Question 2.6</h3>
<p>Check whether there are any <code>NA</code>/missing values in <code>sales_data</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sales_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Order.Date           Ship.Date             State          
 Min.   :2011-01-01   Min.   :2011-01-03   Length:51290      
 1st Qu.:2012-06-19   1st Qu.:2012-06-23   Class :character  
 Median :2013-07-08   Median :2013-07-12   Mode  :character  
 Mean   :2013-05-11   Mean   :2013-05-15                     
 3rd Qu.:2014-05-22   3rd Qu.:2014-05-26                     
 Max.   :2014-12-31   Max.   :2015-01-07                     
   Country              Sales               Profit          Order.Priority 
 Length:51290       Min.   :    0.444   Min.   :-6599.98   Low     : 2424  
 Class :character   1st Qu.:   30.759   1st Qu.:    0.00   Medium  :29433  
 Mode  :character   Median :   85.053   Median :    9.24   High    :15501  
                    Mean   :  246.491   Mean   :   28.61   Critical: 3932  
                    3rd Qu.:  251.053   3rd Qu.:   36.81                   
                    Max.   :22638.480   Max.   : 8399.98                   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>sales_data[sales_data<span class="sc">$</span>State <span class="sc">==</span> <span class="st">""</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Order.Date     Ship.Date      State          Country        Sales         
[6] Profit         Order.Priority
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>sales_data[sales_data<span class="sc">$</span>Country <span class="sc">==</span> <span class="st">""</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Order.Date     Ship.Date      State          Country        Sales         
[6] Profit         Order.Priority
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
<p>The <code>summary()</code> function displays the number of <code>NA</code> values for numeric columns, so we see that there are no <code>NA</code> values in these columns. Then, for the two <code>character</code> columns, we manually checked whether there are any empty-string values, and found that there are none!</p>
</section>
<section id="question-2.7" class="level3">
<h3 class="anchored" data-anchor-id="question-2.7">Question 2.7</h3>
<p>Store the names of the columns of <code>sales_data</code> into a new variable called <code>sales_col_names</code>. Also find out how many rows that the dataset has and assign it to the variable <code>sales_num_rows</code>. Display the values of both <code>sales_col_names</code> and <code>sales_num_rows</code> as the output of your code cell. (We may use this dataset and these variables in future assignments)</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>sales_col_names <span class="ot">&lt;-</span> <span class="fu">colnames</span>(sales_data)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>sales_num_rows <span class="ot">&lt;-</span> <span class="fu">nrow</span>(sales_data)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">paste0</span>(sales_col_names, <span class="at">collapse=</span><span class="st">", "</span>), sales_num_rows)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Order.Date, Ship.Date, State, Country, Sales, Profit, Order.Priority"
[2] "51290"                                                               </code></pre>
</div>
</div>
</section>
<section id="question-2.8" class="level3">
<h3 class="anchored" data-anchor-id="question-2.8">Question 2.8</h3>
<p>Write code to compute the mean value of the <code>Sales</code> column when the order priority is <code>"Critical"</code>, and the mean value of <code>Sales</code> when the order priority is <code>"High"</code>. Which of the two mean values is greater?</p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>critical_orders <span class="ot">&lt;-</span> sales_data[sales_data<span class="sc">$</span>Order.Priority <span class="sc">==</span> <span class="st">"Critical"</span>,]</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(critical_orders<span class="sc">$</span>Sales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 250.8229</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>high_orders <span class="ot">&lt;-</span> sales_data[sales_data<span class="sc">$</span>Order.Priority <span class="sc">==</span> <span class="st">"High"</span>,]</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(high_orders<span class="sc">$</span>Sales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 245.6324</code></pre>
</div>
</div>
<p>The mean value for the <code>"Critical"</code> orders is greater.</p>
</section>
<section id="question-2.9-bonus" class="level3">
<h3 class="anchored" data-anchor-id="question-2.9-bonus">Question 2.9 (Bonus)</h3>
<p>(For +1 bonus point) Compute the mean sales for each of the 50 US states.</p>
<p><em>Hint: you should use R’s built-in <code>aggregate()</code> function to accomplish this, rather than manually entering the names of all 50 states!</em></p>
<p><strong>Solution:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Several ways to use aggregate(), this is the version using formulas</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>us_sales <span class="ot">&lt;-</span> sales_data[sales_data<span class="sc">$</span>Country <span class="sc">==</span> <span class="st">"United States"</span>,]</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(Sales <span class="sc">~</span> State, <span class="at">data=</span>us_sales, mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  State     Sales
1               Alabama  319.8466
2               Arizona  157.5089
3              Arkansas  194.6355
4            California  228.7295
5              Colorado  176.4182
6           Connecticut  163.2239
7              Delaware  285.9486
8  District of Columbia  286.5020
9               Florida  233.6128
10              Georgia  266.8252
11                Idaho  208.6898
12             Illinois  162.9392
13              Indiana  359.4319
14                 Iowa  152.6587
15               Kansas  121.4296
16             Kentucky  263.2500
17            Louisiana  219.4531
18                Maine  158.8162
19             Maryland  225.7669
20        Massachusetts  212.1069
21             Michigan  299.0965
22            Minnesota  335.5410
23          Mississippi  203.2328
24             Missouri  336.4417
25              Montana  372.6235
26             Nebraska  196.4455
27               Nevada  428.9513
28        New Hampshire  270.0935
29           New Jersey  275.1101
30           New Mexico  129.2844
31             New York  275.5995
32       North Carolina  223.3059
33         North Dakota  131.4157
34                 Ohio  166.8617
35             Oklahoma  298.2332
36               Oregon  140.5738
37         Pennsylvania  198.4871
38         Rhode Island  404.0706
39       South Carolina  201.9455
40         South Dakota  109.6300
41            Tennessee  167.5512
42                Texas  172.7797
43                 Utah  211.6992
44              Vermont  811.7609
45             Virginia  315.3425
46           Washington  273.9946
47        West Virginia  302.4560
48            Wisconsin  291.9510
49              Wyoming 1603.1360</code></pre>
</div>
</div>
<p>(Note that Alaska and Hawaii are not included in the original dataset, but DC is, so, we get 49 total observations, for the 48 continental US states plus DC!)</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>