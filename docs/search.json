[
  {
    "objectID": "w07-1/slides.html#code-blocks",
    "href": "w07-1/slides.html#code-blocks",
    "title": "Control Flow in R",
    "section": "Code Blocks",
    "text": "Code Blocks\n\n\nPython uses Indentation ‚Üí‚Üí\n\nfor i in range(5):\n  print(\"Hello\")\n  print(\"Please run this code 5 times\")\n\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\n\n\n\nR uses curly braces {}\n\nfor (i in 1:5) {\n  print(\"Hello\")\n  print(\"Please run this code 5 times\")\n}\n\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\""
  },
  {
    "objectID": "w07-1/slides.html#if-statements",
    "href": "w07-1/slides.html#if-statements",
    "title": "Control Flow in R",
    "section": "If Statements",
    "text": "If Statements\n\n\n\nimport datetime\ncur_time = datetime.datetime.now()\nprint(f\"The current time is {cur_time.hour}:{cur_time.minute}\")\n\nThe current time is 17:32\n\nif cur_time.hour &lt; 12:\n    print(\"Good morning!\")\nelif cur_time.hour &lt; 18:\n    print(\"Good afternoon!\")\nelse:\n    print(\"Good evening!\")\n\nGood afternoon!\n\n\n\n\nlibrary(lubridate)\ncur_time &lt;- Sys.time()\nwriteLines(paste0(\n    \"The current time is \",\n    hour(cur_time),\":\",\n    minute(cur_time)\n))\n\nThe current time is 17:32\n\nif (hour(cur_time) &lt; 12) {\n    print(\"Good morning!\")\n} else if (hour(cur_time) &lt; 18) {\n    print(\"Good afternoon!\")\n} else {\n    print(\"Good evening!\")\n}\n\n[1] \"Good afternoon!\"\n\n\n\n\n(We‚Äôll learn about lubridate  soon!)"
  },
  {
    "objectID": "w07-1/slides.html#the-ternary-operator",
    "href": "w07-1/slides.html#the-ternary-operator",
    "title": "Control Flow in R",
    "section": "The Ternary Operator",
    "text": "The Ternary Operator\n\n\n\n\"morning\" if cur_time.hour &lt; 12 else \"evening\"\n\n'evening'\n\n\n\n\nifelse(\n    hour(cur_time) &lt; 12,\n    \"morning\",\n    \"evening\"\n)\n\n[1] \"evening\""
  },
  {
    "objectID": "w07-1/slides.html#for-loops-the-software-engineers-bread-and-butter",
    "href": "w07-1/slides.html#for-loops-the-software-engineers-bread-and-butter",
    "title": "Control Flow in R",
    "section": "For Loops: The Software Engineer‚Äôs Bread and Butter",
    "text": "For Loops: The Software Engineer‚Äôs Bread and Butter\n\nMany different ways to loop (find one that clicks for you!)\nFor loops often the ‚Äúdefault‚Äù approach (because of C)\n\n\n\n\nfor i in range(1, 10):\n    print(i)\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n\nfor (i in 1:10) {\n    print(i)\n}\n\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n[1] 6\n[1] 7\n[1] 8\n[1] 9\n[1] 10"
  },
  {
    "objectID": "w07-1/slides.html#vectorized-operations-the-data-scientists-bread-and-margarine",
    "href": "w07-1/slides.html#vectorized-operations-the-data-scientists-bread-and-margarine",
    "title": "Control Flow in R",
    "section": "Vectorized Operations: The Data Scientist‚Äôs Bread and Margarine",
    "text": "Vectorized Operations: The Data Scientist‚Äôs Bread and Margarine\n\nYou‚Äôve been hired as the lead data scientist for a food delivery service (congrats!)\nYou‚Äôre given data on (a) miles traveled and (b) hours driven, for each driver\nYour goal: find the distribution of average speeds!\n\n\n\n\nimport pandas as pd\nmiles_data = [11, 52, 13]\nhrs_data = [2, 3, 5]\ndriver_df = pd.DataFrame({\n    'miles': miles_data,\n    'hrs': hrs_data\n})\nprint(driver_df.to_markdown())\n\n\n\n\nmiles\nhrs\n\n\n\n\n0\n11\n2\n\n\n1\n52\n3\n\n\n2\n13\n5\n\n\n\n\n\n\nmiles_data &lt;- c(11, 52, 13)\nhrs_data &lt;- c(2, 3, 5)\ndriver_df &lt;- data.frame(\n    miles=miles_data,\n    hrs=hrs_data\n)\ndriver_df\n\n\n\n\n\nmiles\nhrs\n\n\n\n\n11\n2\n\n\n52\n3\n\n\n13\n5"
  },
  {
    "objectID": "w07-1/slides.html#the-loop-approach",
    "href": "w07-1/slides.html#the-loop-approach",
    "title": "Control Flow in R",
    "section": "The Loop Approach ",
    "text": "The Loop Approach \n\nfor (i in 1:nrow(driver_df)) {\n  driver_df[i, 'mph'] &lt;- driver_df[i, 'miles'] / driver_df[i, 'hrs']\n}\ndriver_df\n\n\n\n\n\nmiles\nhrs\nmph\n\n\n\n\n11\n2\n5.50000\n\n\n52\n3\n17.33333\n\n\n13\n5\n2.60000\n\n\n\n\n\n\n\nIt works! But CPUs have hyper-optimized linear algebra\n\\(\\implies\\) Operations on a length-1000 vector significantly faster than a loop performing an operation 1000 times"
  },
  {
    "objectID": "w07-1/slides.html#the-vectorized-approach",
    "href": "w07-1/slides.html#the-vectorized-approach",
    "title": "Control Flow in R",
    "section": "The Vectorized Approach üíØ",
    "text": "The Vectorized Approach üíØ\n\n\n\ndriver_df['mph'] = driver_df['miles'] / driver_df['hrs']\nprint(driver_df.to_markdown())\n\n\n\n\nmiles\nhrs\nmph\n\n\n\n\n0\n11\n2\n5.5\n\n\n1\n52\n3\n17.3333\n\n\n2\n13\n5\n2.6\n\n\n\n\n\n\ndriver_df['mph'] = driver_df$miles / driver_df$hrs\ndriver_df\n\n\n\n\n\nmiles\nhrs\nmph\n\n\n\n\n11\n2\n5.50000\n\n\n52\n3\n17.33333\n\n\n13\n5\n2.60000"
  },
  {
    "objectID": "w07-1/slides.html#vectorizing-your-brain",
    "href": "w07-1/slides.html#vectorizing-your-brain",
    "title": "Control Flow in R",
    "section": "Vectorizing Your Brain",
    "text": "Vectorizing Your Brain\n\nThinking in terms of vectors will be annoying at first! Many common algorithms are ‚Äúnaturally‚Äù described via loops‚Ä¶\nIt will pay off over the course of your career, I promise!\n\n\n\n\nN &lt;- 50000\nset.seed(2024)\nvec_start_time &lt;- Sys.time()\nbig_vec1 &lt;- rnorm(N, 0, 1)\nbig_vec2 &lt;- rnorm(N, 0, 1)\nproduct &lt;- big_vec1 * big_vec2\nvec_end_time &lt;- Sys.time()\nvec_end_time - vec_start_time\n\nTime difference of 0.003620863 secs\n\n\n\n\nloop_start_time &lt;- Sys.time()\nproduct &lt;- c()\nfor (i in 1:N) {\n  elt1 &lt;- big_vec1[i]\n  elt2 &lt;- big_vec2[i]\n  product &lt;- c(product, elt1 * elt2)\n}\nloop_end_time &lt;- Sys.time()\nloop_end_time - loop_start_time\n\nTime difference of 2.33628 secs\n\n\n\n\n\n(For \\(N = 100K\\), 0.006 vs.¬†9.08 seconds!)"
  },
  {
    "objectID": "w07-1/slides.html#how-is-it-that-much-faster",
    "href": "w07-1/slides.html#how-is-it-that-much-faster",
    "title": "Control Flow in R",
    "section": "How is it That Much Faster?",
    "text": "How is it That Much Faster?\n\nThe long answer: take DSAN 5500 üòú The short answer:\nSimple math operations (addition, multiplication) are easily parallelized under the hood;\nSequential memory reads are significantly faster than non-sequential reads‚Äîvectors can be stored in contiguous ‚Äúchunks‚Äù of memory that computer can rapidly scan over\n\n(Think of how it‚Äôs easier to count people standing in a line than people scattered around a room!)"
  },
  {
    "objectID": "w07-1/slides.html#anonymous-functions",
    "href": "w07-1/slides.html#anonymous-functions",
    "title": "Control Flow in R",
    "section": "Anonymous Functions",
    "text": "Anonymous Functions\n\nIn Python you declare the name of a function using def\nIn R, you make the function without a name, then assign it to a variable:\n\n\n\n\ndef multiply_by_5(num):\n  return num * 5\nmultiply_by_5(10)\n\n50\n\n\n\n\nmultiply_by_5 &lt;- function(num) {\n  return(num * 5)\n}\nmultiply_by_5(10)\n\n[1] 50\n\n\n\n\n\n(Python also has anonymous functions, via lambda:)\n\n\ndouble_it = lambda x: x * 2\ndouble_it(10)\n\n20"
  },
  {
    "objectID": "w07-1/slides.html#variable-scope",
    "href": "w07-1/slides.html#variable-scope",
    "title": "Control Flow in R",
    "section": "Variable Scope",
    "text": "Variable Scope\n\nHuge point (especially for Week 7 Assignment)!\nThink of functions as ‚Äúmini-programs‚Äù, where variables (including arguments) get created when the function starts and then destroyed when the function finishes. Compare:\n\n\n\n\nval &lt;- c(1, 2, 3)\nprint(val)\n\n[1] 1 2 3\n\nupdate_val &lt;- function() {\n  val &lt;- val * 5\n}\nupdate_val()\nprint(val) # üòµ\n\n[1] 1 2 3\n\n\n\n\nval &lt;- c(1, 2, 3)\nprint(val)\n\n[1] 1 2 3\n\ncompute_new_val &lt;- function(orig_val) {\n  return(orig_val * 5)\n}\nval &lt;- compute_new_val(val)\nprint(val) # üòé\n\n[1]  5 10 15"
  },
  {
    "objectID": "w07-1/slides.html#positional-vs.-keyword-arguments",
    "href": "w07-1/slides.html#positional-vs.-keyword-arguments",
    "title": "Control Flow in R",
    "section": "Positional vs.¬†Keyword Arguments",
    "text": "Positional vs.¬†Keyword Arguments\n\nJust like Python, R functions can accept two types of arguments‚Ä¶\n\n\n\nPositional arguments are required (function call will produce error if any positional argument is missing)\n\ndiv_by_2 &lt;- function(num) {\n  return(num / 2)\n}\ndiv_by_2(11)\n\n[1] 5.5\n\n\n\nKeyword arguments are optional\n\ndiv_by_2 &lt;- function(num, round=FALSE) {\n  div_result &lt;- num / 2\n  final_result &lt;- ifelse(round,\n    round(div_result),\n    div_result\n  )\n  return(final_result)\n}\ndiv_by_2(11, round=TRUE)\n\n[1] 6"
  },
  {
    "objectID": "w07-1/slides.html#applying-functions-to-vectors",
    "href": "w07-1/slides.html#applying-functions-to-vectors",
    "title": "Control Flow in R",
    "section": "Applying Functions to Vectors",
    "text": "Applying Functions to Vectors\n\nWe‚Äôve been ‚Äúmanually‚Äù calling functions, like func(arg)\nWhat if we want to apply a function to a vector of elements? Ex: capitalize a big list of names\n\n\n\n\nBase R provides a family of apply() functions: sapply() for vectors; lapply() for lists; apply() for matrices (requires specifying axis: columns or rows)\n\n\n\ncapitalize &lt;- function(name) {\n  return(tools::toTitleCase(name))\n}\ncapitalize(\"jeff\")\n\n[1] \"Jeff\"\n\nnames &lt;- c(\"ali\", \"boris\", \"chad\")\nsapply(names, capitalize)\n\n    ali   boris    chad \n  \"Ali\" \"Boris\"  \"Chad\" \n\n\n\n\n\n\n\n2024 DSAN Bootcamp W07-1: Control Flow"
  },
  {
    "objectID": "w07-1/index.html",
    "href": "w07-1/index.html",
    "title": "Control Flow in R",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w07-1/index.html#code-blocks",
    "href": "w07-1/index.html#code-blocks",
    "title": "Control Flow in R",
    "section": "Code Blocks",
    "text": "Code Blocks\n\n\nPython uses Indentation ‚Üí‚Üí\n\nfor i in range(5):\n  print(\"Hello\")\n  print(\"Please run this code 5 times\")\n\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\nHello\nPlease run this code 5 times\n\n\n\nR uses curly braces {}\n\nfor (i in 1:5) {\n  print(\"Hello\")\n  print(\"Please run this code 5 times\")\n}\n\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\"\n[1] \"Hello\"\n[1] \"Please run this code 5 times\""
  },
  {
    "objectID": "w07-1/index.html#if-statements",
    "href": "w07-1/index.html#if-statements",
    "title": "Control Flow in R",
    "section": "If Statements",
    "text": "If Statements\n\n\n\nimport datetime\ncur_time = datetime.datetime.now()\nprint(f\"The current time is {cur_time.hour}:{cur_time.minute}\")\n\nThe current time is 17:32\n\nif cur_time.hour &lt; 12:\n    print(\"Good morning!\")\nelif cur_time.hour &lt; 18:\n    print(\"Good afternoon!\")\nelse:\n    print(\"Good evening!\")\n\nGood afternoon!\n\n\n\n\nlibrary(lubridate)\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\ncur_time &lt;- Sys.time()\nwriteLines(paste0(\n    \"The current time is \",\n    hour(cur_time),\":\",\n    minute(cur_time)\n))\n\nThe current time is 17:32\n\nif (hour(cur_time) &lt; 12) {\n    print(\"Good morning!\")\n} else if (hour(cur_time) &lt; 18) {\n    print(\"Good afternoon!\")\n} else {\n    print(\"Good evening!\")\n}\n\n[1] \"Good afternoon!\"\n\n\n\n\n(We‚Äôll learn about lubridate  soon!)"
  },
  {
    "objectID": "w07-1/index.html#the-ternary-operator",
    "href": "w07-1/index.html#the-ternary-operator",
    "title": "Control Flow in R",
    "section": "The Ternary Operator",
    "text": "The Ternary Operator\n\n\n\n\"morning\" if cur_time.hour &lt; 12 else \"evening\"\n\n'evening'\n\n\n\n\nifelse(\n    hour(cur_time) &lt; 12,\n    \"morning\",\n    \"evening\"\n)\n\n[1] \"evening\""
  },
  {
    "objectID": "w07-1/index.html#for-loops-the-software-engineers-bread-and-butter",
    "href": "w07-1/index.html#for-loops-the-software-engineers-bread-and-butter",
    "title": "Control Flow in R",
    "section": "For Loops: The Software Engineer‚Äôs Bread and Butter",
    "text": "For Loops: The Software Engineer‚Äôs Bread and Butter\n\nMany different ways to loop (find one that clicks for you!)\nFor loops often the ‚Äúdefault‚Äù approach (because of C)\n\n\n\n\nfor i in range(1, 10):\n    print(i)\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n\n\n\nfor (i in 1:10) {\n    print(i)\n}\n\n[1] 1\n[1] 2\n[1] 3\n[1] 4\n[1] 5\n[1] 6\n[1] 7\n[1] 8\n[1] 9\n[1] 10"
  },
  {
    "objectID": "w07-1/index.html#vectorized-operations-the-data-scientists-bread-and-margarine",
    "href": "w07-1/index.html#vectorized-operations-the-data-scientists-bread-and-margarine",
    "title": "Control Flow in R",
    "section": "Vectorized Operations: The Data Scientist‚Äôs Bread and Margarine",
    "text": "Vectorized Operations: The Data Scientist‚Äôs Bread and Margarine\n\nYou‚Äôve been hired as the lead data scientist for a food delivery service (congrats!)\nYou‚Äôre given data on (a) miles traveled and (b) hours driven, for each driver\nYour goal: find the distribution of average speeds!\n\n\n\n\nimport pandas as pd\nmiles_data = [11, 52, 13]\nhrs_data = [2, 3, 5]\ndriver_df = pd.DataFrame({\n    'miles': miles_data,\n    'hrs': hrs_data\n})\nprint(driver_df.to_markdown())\n\n\n\n\nmiles\nhrs\n\n\n\n\n0\n11\n2\n\n\n1\n52\n3\n\n\n2\n13\n5\n\n\n\n\n\n\nmiles_data &lt;- c(11, 52, 13)\nhrs_data &lt;- c(2, 3, 5)\ndriver_df &lt;- data.frame(\n    miles=miles_data,\n    hrs=hrs_data\n)\ndriver_df\n\n\n\n\n\nmiles\nhrs\n\n\n\n\n11\n2\n\n\n52\n3\n\n\n13\n5"
  },
  {
    "objectID": "w07-1/index.html#the-loop-approach",
    "href": "w07-1/index.html#the-loop-approach",
    "title": "Control Flow in R",
    "section": "The Loop Approach ",
    "text": "The Loop Approach \n\nfor (i in 1:nrow(driver_df)) {\n  driver_df[i, 'mph'] &lt;- driver_df[i, 'miles'] / driver_df[i, 'hrs']\n}\ndriver_df\n\n\n\n\n\nmiles\nhrs\nmph\n\n\n\n\n11\n2\n5.50000\n\n\n52\n3\n17.33333\n\n\n13\n5\n2.60000\n\n\n\n\n\n\n\nIt works! But CPUs have hyper-optimized linear algebra\n\\(\\implies\\) Operations on a length-1000 vector significantly faster than a loop performing an operation 1000 times"
  },
  {
    "objectID": "w07-1/index.html#the-vectorized-approach",
    "href": "w07-1/index.html#the-vectorized-approach",
    "title": "Control Flow in R",
    "section": "The Vectorized Approach üíØ",
    "text": "The Vectorized Approach üíØ\n\n\n\ndriver_df['mph'] = driver_df['miles'] / driver_df['hrs']\nprint(driver_df.to_markdown())\n\n\n\n\nmiles\nhrs\nmph\n\n\n\n\n0\n11\n2\n5.5\n\n\n1\n52\n3\n17.3333\n\n\n2\n13\n5\n2.6\n\n\n\n\n\n\ndriver_df['mph'] = driver_df$miles / driver_df$hrs\ndriver_df\n\n\n\n\n\nmiles\nhrs\nmph\n\n\n\n\n11\n2\n5.50000\n\n\n52\n3\n17.33333\n\n\n13\n5\n2.60000"
  },
  {
    "objectID": "w07-1/index.html#vectorizing-your-brain",
    "href": "w07-1/index.html#vectorizing-your-brain",
    "title": "Control Flow in R",
    "section": "Vectorizing Your Brain",
    "text": "Vectorizing Your Brain\n\nThinking in terms of vectors will be annoying at first! Many common algorithms are ‚Äúnaturally‚Äù described via loops‚Ä¶\nIt will pay off over the course of your career, I promise!\n\n\n\n\nN &lt;- 50000\nset.seed(2024)\nvec_start_time &lt;- Sys.time()\nbig_vec1 &lt;- rnorm(N, 0, 1)\nbig_vec2 &lt;- rnorm(N, 0, 1)\nproduct &lt;- big_vec1 * big_vec2\nvec_end_time &lt;- Sys.time()\nvec_end_time - vec_start_time\n\nTime difference of 0.003563881 secs\n\n\n\n\nloop_start_time &lt;- Sys.time()\nproduct &lt;- c()\nfor (i in 1:N) {\n  elt1 &lt;- big_vec1[i]\n  elt2 &lt;- big_vec2[i]\n  product &lt;- c(product, elt1 * elt2)\n}\nloop_end_time &lt;- Sys.time()\nloop_end_time - loop_start_time\n\nTime difference of 2.301572 secs\n\n\n\n\n\n(For \\(N = 100K\\), 0.006 vs.¬†9.08 seconds!)"
  },
  {
    "objectID": "w07-1/index.html#how-is-it-that-much-faster",
    "href": "w07-1/index.html#how-is-it-that-much-faster",
    "title": "Control Flow in R",
    "section": "How is it That Much Faster?",
    "text": "How is it That Much Faster?\n\nThe long answer: take DSAN 5500 üòú The short answer:\nSimple math operations (addition, multiplication) are easily parallelized under the hood;\nSequential memory reads are significantly faster than non-sequential reads‚Äîvectors can be stored in contiguous ‚Äúchunks‚Äù of memory that computer can rapidly scan over\n\n(Think of how it‚Äôs easier to count people standing in a line than people scattered around a room!)"
  },
  {
    "objectID": "w07-1/index.html#anonymous-functions",
    "href": "w07-1/index.html#anonymous-functions",
    "title": "Control Flow in R",
    "section": "Anonymous Functions",
    "text": "Anonymous Functions\n\nIn Python you declare the name of a function using def\nIn R, you make the function without a name, then assign it to a variable:\n\n\n\n\ndef multiply_by_5(num):\n  return num * 5\nmultiply_by_5(10)\n\n50\n\n\n\n\nmultiply_by_5 &lt;- function(num) {\n  return(num * 5)\n}\nmultiply_by_5(10)\n\n[1] 50\n\n\n\n\n\n(Python also has anonymous functions, via lambda:)\n\n\ndouble_it = lambda x: x * 2\ndouble_it(10)\n\n20"
  },
  {
    "objectID": "w07-1/index.html#variable-scope",
    "href": "w07-1/index.html#variable-scope",
    "title": "Control Flow in R",
    "section": "Variable Scope",
    "text": "Variable Scope\n\nHuge point (especially for Week 7 Assignment)!\nThink of functions as ‚Äúmini-programs‚Äù, where variables (including arguments) get created when the function starts and then destroyed when the function finishes. Compare:\n\n\n\n\n\nCode\nval &lt;- c(1, 2, 3)\nprint(val)\n\n\n[1] 1 2 3\n\n\nCode\nupdate_val &lt;- function() {\n  val &lt;- val * 5\n}\nupdate_val()\nprint(val) # üòµ\n\n\n[1] 1 2 3\n\n\n\n\n\nCode\nval &lt;- c(1, 2, 3)\nprint(val)\n\n\n[1] 1 2 3\n\n\nCode\ncompute_new_val &lt;- function(orig_val) {\n  return(orig_val * 5)\n}\nval &lt;- compute_new_val(val)\nprint(val) # üòé\n\n\n[1]  5 10 15"
  },
  {
    "objectID": "w07-1/index.html#positional-vs.-keyword-arguments",
    "href": "w07-1/index.html#positional-vs.-keyword-arguments",
    "title": "Control Flow in R",
    "section": "Positional vs.¬†Keyword Arguments",
    "text": "Positional vs.¬†Keyword Arguments\n\nJust like Python, R functions can accept two types of arguments‚Ä¶\n\n\n\nPositional arguments are required (function call will produce error if any positional argument is missing)\n\ndiv_by_2 &lt;- function(num) {\n  return(num / 2)\n}\ndiv_by_2(11)\n\n[1] 5.5\n\n\n\nKeyword arguments are optional\n\ndiv_by_2 &lt;- function(num, round=FALSE) {\n  div_result &lt;- num / 2\n  final_result &lt;- ifelse(round,\n    round(div_result),\n    div_result\n  )\n  return(final_result)\n}\ndiv_by_2(11, round=TRUE)\n\n[1] 6"
  },
  {
    "objectID": "w07-1/index.html#applying-functions-to-vectors",
    "href": "w07-1/index.html#applying-functions-to-vectors",
    "title": "Control Flow in R",
    "section": "Applying Functions to Vectors",
    "text": "Applying Functions to Vectors\n\nWe‚Äôve been ‚Äúmanually‚Äù calling functions, like func(arg)\nWhat if we want to apply a function to a vector of elements? Ex: capitalize a big list of names\n\n\n\n\nBase R provides a family of apply() functions: sapply() for vectors; lapply() for lists; apply() for matrices (requires specifying axis: columns or rows)\n\n\n\ncapitalize &lt;- function(name) {\n  return(tools::toTitleCase(name))\n}\ncapitalize(\"jeff\")\n\n[1] \"Jeff\"\n\nnames &lt;- c(\"ali\", \"boris\", \"chad\")\nsapply(names, capitalize)\n\n    ali   boris    chad \n  \"Ali\" \"Boris\"  \"Chad\""
  },
  {
    "objectID": "w06-3/slides.html#the-most-immediately-jarring-differences",
    "href": "w06-3/slides.html#the-most-immediately-jarring-differences",
    "title": "Introduction to R",
    "section": "The Most Immediately-Jarring Differences",
    "text": "The Most Immediately-Jarring Differences\n\n\n\n\n\nPython\n\n\n\nR\n\n\n\n\n\nValue Assignment\n\n&lt;varname&gt; = &lt;value&gt;\n\nx = 3\nx\n\n3\n\n\n\n&lt;varname&gt; &lt;- &lt;value&gt;\n\nx &lt;- 3\nx\n\n[1] 3\n\n\n\n\n\n\nIndices\n\nStart from 0\n\nmy_list = [\"a\", \"b\", \"c\"]\nmy_list[0] # Accesses first element\n\n'a'\n\nmy_list[1] # Accesses second element\n\n'b'\n\n\n\nStart from 1\n\nmy_vector &lt;- c(\"a\", \"b\", \"c\")\nmy_vector[0] # Invalid index in R!\n\ncharacter(0)\n\nmy_vector[1] # Accesses first element\n\n[1] \"a\"\n\nmy_vector[2] # Accesses second element\n\n[1] \"b\"\n\n\n\n\n\n\nBooleans\n\nTrue, False\n\nresult = 2 * 2 == 4\nresult\n\nTrue\n\n\n\nTRUE (or T), FALSE (or F)\n\nresult &lt;- 2 * 2 == 4\nresult\n\n[1] TRUE"
  },
  {
    "objectID": "w06-3/slides.html#everything-is-a-vector",
    "href": "w06-3/slides.html#everything-is-a-vector",
    "title": "Introduction to R",
    "section": "Everything is a Vector",
    "text": "Everything is a Vector\n\nAlthough there are R equivalents for most Python data types, one big difference is that‚Ä¶\nIn R, everything is a vector!\n\n\n\nNumbers\n\nx &lt;- 3\nprint(x)\n\n[1] 3\n\nclass(x)\n\n[1] \"numeric\"\n\nlength(x)\n\n[1] 1\n\n\n\nLength-1 Vectors\n\ny &lt;- c(3)\nprint(y)\n\n[1] 3\n\nclass(y)\n\n[1] \"numeric\"\n\nlength(y)\n\n[1] 1\n\n\n\nLength-N Vectors\n\nz &lt;- c(3, 4, 5)\nprint(z)\n\n[1] 3 4 5\n\nclass(z)\n\n[1] \"numeric\"\n\nlength(z)\n\n[1] 3"
  },
  {
    "objectID": "w06-3/slides.html#careful-with-basic-operators-like",
    "href": "w06-3/slides.html#careful-with-basic-operators-like",
    "title": "Introduction to R",
    "section": "Careful With ‚ÄúBasic‚Äù Operators Like +!",
    "text": "Careful With ‚ÄúBasic‚Äù Operators Like +!\n\nIf you‚Äôre used to Python, + feels like a natural way to combine things\nR forces you to think explicitly about combining (\\(\\neq\\) adding): more restrictive +\nFor strings:\n\n\nIn Python: + means concatenate\n\nmessage = \"Hi\" + \" \" + \"Jeff\"\nprint(message)\n\nHi Jeff\n\n\n\nIn R: + is not allowed!\n\nmy_message &lt;- \"Hi\" + \" \" + \"Jeff\"\n\nError in \"Hi\" + \" \": non-numeric argument to binary operator\n\n\n\n\nFor numeric lists‚Ä¶\n\n\nIn Python: + means concatenate\n\n[1, 2] + [3, 4]\n\n[1, 2, 3, 4]\n\n\n\nIn R: + means vector addition!\n\nc(1,2) + c(3,4)\n\n[1] 4 6"
  },
  {
    "objectID": "w06-3/slides.html#immensely-important-distinction",
    "href": "w06-3/slides.html#immensely-important-distinction",
    "title": "Introduction to R",
    "section": "Immensely Important Distinction",
    "text": "Immensely Important Distinction\n\nThroughout bootcamp, throughout DSAN, throughout your career, you‚Äôll use two different ‚Äúflavors‚Äù of R:\n\n\n\nBase R\n\nbase_df &lt;- data.frame(\n  x=c(1,2,3),\n  y=c(\"a\",\"b\",\"c\")\n)\nbase_df\n\n\n\n\n\nx\ny\n\n\n\n\n1\na\n\n\n2\nb\n\n\n3\nc\n\n\n\n\n\nclass(base_df)\n\n[1] \"data.frame\"\n\n\n\nTidyverse\n\nlibrary(tidyverse) # Imports \"tibble\" library\ntv_df &lt;- tribble(\n  ~x, ~y,\n  1, \"a\",\n  2, \"b\",\n  3, \"c\"\n)\ntv_df\n\n\n\n\n\nx\ny\n\n\n\n\n1\na\n\n\n2\nb\n\n\n3\nc\n\n\n\n\n\nclass(tv_df)\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\n\n\n\n\nNote: There are ways to do row-wise and column-wise table creation in both! The key difference here is just data.frame vs.¬†tibble"
  },
  {
    "objectID": "w06-3/slides.html#why-are-there-two-ways-to-do-everything",
    "href": "w06-3/slides.html#why-are-there-two-ways-to-do-everything",
    "title": "Introduction to R",
    "section": "Why Are There Two Ways to Do Everything?",
    "text": "Why Are There Two Ways to Do Everything?\n\nOne key reason: tidyverse built on the pipe operator |&gt;\nRecognition that data science often involves pipelines: chains of operations performed in sequence\n\nE.g., scrape data ‚Üí clean data ‚Üí save to DB\n\nBase R approach:\nresult &lt;- saveToDB(cleanData(scrapeData()))\nTidyverse approach:\nresult &lt;- scrapeData() |&gt; cleanData() |&gt; saveToDB()\nNow imagine pipelines used by giant companies, e.g., training Netflix‚Äôs recommendation engine!"
  },
  {
    "objectID": "w06-3/slides.html#good-news-and-bad-news",
    "href": "w06-3/slides.html#good-news-and-bad-news",
    "title": "Introduction to R",
    "section": "|>: Good News and Bad News",
    "text": "|&gt;: Good News and Bad News\n\nf() |&gt; g() just means: take the result of the call f() and pass it as the first argument to g()\nGood news: this means |&gt; is intuitively ‚Äúbackwards compatible‚Äù with many base R functions\nBad news: requires checking the first argument:\n\n\n\n\ngetSampleSize &lt;- function() {\n  return(20)\n}\ngetSampleSize() |&gt; rbinom(10, 0.5)\n\n [1] 3 5 7 3 4 5 5 8 3 5 5 2 6 5 2 2 5 6 6 4\n\n\n\n\ngetNumTrials &lt;- function() {\n  return(10)\n}\ngetNumTrials() |&gt; rbinom(100, 0.5)\n\n [1] 51 47 50 55 45 43 46 58 60 53\n\n\n\n\n[Quick Note:]\n\nIf you‚Äôve used R before, you may have seen the %&gt;% operator from tidyverse\n‚Ä¶It got so popular that it is now built into R (as of 2023) as |&gt;!\n\\(\\implies\\) Switch from %&gt;% to |&gt; for instant efficiency boost üòé"
  },
  {
    "objectID": "w06-3/slides.html#combining-strings",
    "href": "w06-3/slides.html#combining-strings",
    "title": "Introduction to R",
    "section": "Combining Strings",
    "text": "Combining Strings\n\nEarlier we saw how R doesn‚Äôt allow \"Hi\" + \" \" + \"Jeff\"‚Ä¶\nSo how do we combine strings?\npaste() and paste0()!\n\npaste(\"Hi\", \"Jeff\")\n\n[1] \"Hi Jeff\"\n\npaste0(\"Hi\", \" \", \"Jeff\")\n\n[1] \"Hi Jeff\""
  },
  {
    "objectID": "w06-3/slides.html#python-lists-leftrightarrow-r-vectors",
    "href": "w06-3/slides.html#python-lists-leftrightarrow-r-vectors",
    "title": "Introduction to R",
    "section": "Python Lists \\(\\leftrightarrow\\) R Vectors",
    "text": "Python Lists \\(\\leftrightarrow\\) R Vectors\n\nCreation\n\n\n\n\nmy_list = [1, 2, 3]\nmy_list\n\n[1, 2, 3]\n\n\n\n\nmy_vector &lt;- c(1, 2, 3)\nmy_vector\n\n[1] 1 2 3\n\n\n\n\n\nInsertion\n\n\n\n\nmy_list.append(4)\nmy_list\n\n[1, 2, 3, 4]\n\n\n\n\nmy_vector &lt;- c(my_vector, 4)\nmy_vector\n\n[1] 1 2 3 4\n\n\n\n\n\nReplicating Elements\n\n\n\n\nmy_list * 3\n\n[1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4]\n\n\n\n\nrep(my_vector, 3)\n\n [1] 1 2 3 4 1 2 3 4 1 2 3 4\n\n\n\n\n\nPython range() \\(\\leftrightarrow\\) R seq()\n\n\n\n\nlist(range(5, 10))\n\n[5, 6, 7, 8, 9]\n\n\n\n\nseq(5, 10)\n\n[1]  5  6  7  8  9 10"
  },
  {
    "objectID": "w06-3/slides.html#paste0-with-vectors",
    "href": "w06-3/slides.html#paste0-with-vectors",
    "title": "Introduction to R",
    "section": "paste0() with Vectors!",
    "text": "paste0() with Vectors!\n\nnames &lt;- c(\"Aaliya\", \"Brandon\", \"Cyrus\")\npaste0(names, collapse=\" \")\n\n[1] \"Aaliya Brandon Cyrus\"\n\npaste0(names, collapse=\", \")\n\n[1] \"Aaliya, Brandon, Cyrus\"\n\npaste(names, collapse=\", \")\n\n[1] \"Aaliya, Brandon, Cyrus\""
  },
  {
    "objectID": "w06-3/slides.html#semi-confusing-point-r-also-has-lists",
    "href": "w06-3/slides.html#semi-confusing-point-r-also-has-lists",
    "title": "Introduction to R",
    "section": "Semi-Confusing Point: R Also Has Lists‚Ä¶",
    "text": "Semi-Confusing Point: R Also Has Lists‚Ä¶\n\nRarely used, despite greater similarity to Python lists üòµ‚Äçüí´\nKey difference: all elements of a vector must have same type; elements of a list may have different types\n\nmy_list &lt;- list(\"A\", 2, TRUE)\nmy_list\n\n[[1]]\n[1] \"A\"\n\n[[2]]\n[1] 2\n\n[[3]]\n[1] TRUE\n\n\n(Note how each element is a vector: character vector, integer vector, and boolean vector)"
  },
  {
    "objectID": "w06-3/slides.html#pandas-dataframe-leftrightarrow-r-data.frame",
    "href": "w06-3/slides.html#pandas-dataframe-leftrightarrow-r-data.frame",
    "title": "Introduction to R",
    "section": "Pandas DataFrame \\(\\leftrightarrow\\) R data.frame",
    "text": "Pandas DataFrame \\(\\leftrightarrow\\) R data.frame\n\n\n\nimport pandas as pd\nx_data = [1, 2, 3]\ny_data = [4, 5, 6]\ndf = pd.DataFrame({\n  'x': x_data, 'y': y_data\n})\nprint(df.to_markdown())\n\n\n\n\nx\ny\n\n\n\n\n0\n1\n4\n\n\n1\n2\n5\n\n\n2\n3\n6\n\n\n\n\n\n\nx_data &lt;- c(1, 2, 3)\ny_data &lt;- c(4, 5, 6)\ndf &lt;- data.frame(\n  x=x_data,\n  y=y_data\n)\ndf\n\n\n\n\n\nx\ny\n\n\n\n\n1\n4\n\n\n2\n5\n\n\n3\n6"
  },
  {
    "objectID": "w06-3/slides.html#the-inevitable-headaches-of-missing-data-in-python",
    "href": "w06-3/slides.html#the-inevitable-headaches-of-missing-data-in-python",
    "title": "Introduction to R",
    "section": "The Inevitable Headaches of Missing Data in Python",
    "text": "The Inevitable Headaches of Missing Data in Python\n\n\n Given a .csv with missing entries:\n\n\nmy_data.csv\n\nid,name,email\n0,jeff,jeff@jeff.com\n1,,nobody@no.com\n3,zayd,z@email.biz\n\n Python defaults to object columns with NaN (Not-a-Number) values\n\nimport pandas as pd\ndf = pd.read_csv(\"my_data.csv\")\ndf\n\n   id  name          email\n0   0  jeff  jeff@jeff.com\n1   1   NaN  nobody@no.com\n2   3  zayd    z@email.biz\n\ndf.dtypes\n\nid        int64\nname     object\nemail    object\ndtype: object\n\n\n\n Intuitive fix usually isn‚Äôt what you want:\n\ndf_bad = df.copy()\ndf_bad['name'] = df_bad['name'].astype(str)\ndf_bad\n\n   id  name          email\n0   0  jeff  jeff@jeff.com\n1   1   nan  nobody@no.com\n2   3  zayd    z@email.biz\n\ndf_bad.iloc[1]['name']\n\n'nan'\n\n\n This alternative approach ensures missing values are empty strings\n\ndf_better = df.copy()\ndf_better['name'] = df_better['name'].fillna('').astype(str)\ndf_better\n\n   id  name          email\n0   0  jeff  jeff@jeff.com\n1   1        nobody@no.com\n2   3  zayd    z@email.biz\n\ndf_better.iloc[1]['name']\n\n''"
  },
  {
    "objectID": "w06-3/slides.html#the-slightly-less-headachey-r-approach",
    "href": "w06-3/slides.html#the-slightly-less-headachey-r-approach",
    "title": "Introduction to R",
    "section": "The Slightly-Less-Headachey R Approach!",
    "text": "The Slightly-Less-Headachey R Approach!\n\n\nR reads missing values in character columns as empty strings by default\n\ndf &lt;- read.csv(\"my_data.csv\")\ndf\n\n\n\n\n\nid\nname\nemail\n\n\n\n\n0\njeff\njeff@jeff.com\n\n\n1\n\nnobody@no.com\n\n\n3\nzayd\nz@email.biz\n\n\n\n\n\ndf$name\n\n[1] \"jeff\" \"\"     \"zayd\"\n\n# We'll learn about sapply() next week!\nsapply(df, class)\n\n         id        name       email \n  \"integer\" \"character\" \"character\" \n\n\n\n‚Ä¶And also has a built-in NA value!\n\n\nmy_data_2.csv\n\nid,name,email,fav_num\n0,jeff,jeff@jeff.com,3.14\n1,,nobody@no.com,\n3,zayd,z@email.biz,11\n\n\ndf2 &lt;- read.csv(\"my_data_2.csv\")\ndf2\n\n\n\n\n\nid\nname\nemail\nfav_num\n\n\n\n\n0\njeff\njeff@jeff.com\n3.14\n\n\n1\n\nnobody@no.com\nNA\n\n\n3\nzayd\nz@email.biz\n11.00\n\n\n\n\n\nsapply(df2, class)\n\n         id        name       email     fav_num \n  \"integer\" \"character\" \"character\"   \"numeric\""
  },
  {
    "objectID": "w06-3/slides.html#bonus-built-in-matrices",
    "href": "w06-3/slides.html#bonus-built-in-matrices",
    "title": "Introduction to R",
    "section": "Bonus: Built-In Matrices",
    "text": "Bonus: Built-In Matrices\n\nFor data analysis (cleaning, plotting), data.frame is usually the way to go\nFor linear algebra (inverting, multiplying matrices)‚Ä¶\n\n\nUse 2D vectors!\n\nmy_matrix &lt;- matrix(\n  data=c(1, 2, 3, 4),\n  nrow=2, ncol=2, byrow=TRUE\n)\nmy_matrix\n\n     [,1] [,2]\n[1,]    1    2\n[2,]    3    4\n\nclass(my_matrix)\n\n[1] \"matrix\" \"array\" \n\n\n\nBeware! Matrix multiply operator is %*%, NOT *:\n\nmy_matrix * my_matrix\n\n     [,1] [,2]\n[1,]    1    4\n[2,]    9   16\n\nmy_matrix %*% my_matrix\n\n     [,1] [,2]\n[1,]    7   10\n[2,]   15   22"
  },
  {
    "objectID": "w06-3/slides.html#filtering-selecting-rows",
    "href": "w06-3/slides.html#filtering-selecting-rows",
    "title": "Introduction to R",
    "section": "Filtering (Selecting Rows)",
    "text": "Filtering (Selecting Rows)\n\nIn Base R, filtering involves two steps:\n Create a boolean expression that will evaluate to TRUE for the rows/columns you want to keep, and FALSE otherwise\n Use it in the correct ‚Äúslot‚Äù of R‚Äôs access operator []:\nfiltered_df &lt;- df[&lt;row filter&gt;, &lt;column filter&gt;] # Note: Either (or both) can be left blank!\nR will go through each row, evaluate &lt;row filter&gt;, and keep the row if and only if &lt;row filter&gt; evaluates to TRUE\nExample: Selecting only rows with odd-numbered id values:\n\n\n\n# Boolean expression which is TRUE for\n# odd-numbered ids\nmy_expression &lt;- df2$id %% 2 == 1\nmy_expression\n\n[1] FALSE  TRUE  TRUE\n\n\n\n\nfiltered_df &lt;- df2[my_expression,]\nfiltered_df\n\n\n\n\n\n\nid\nname\nemail\nfav_num\n\n\n\n\n2\n1\n\nnobody@no.com\nNA\n\n\n3\n3\nzayd\nz@email.biz\n11\n\n\n\n\n\n\n\n\n\n\nNow that you know how to set up data.frames, let‚Äôs do something with them!"
  },
  {
    "objectID": "w06-3/slides.html#selecting-columns",
    "href": "w06-3/slides.html#selecting-columns",
    "title": "Introduction to R",
    "section": "Selecting Columns",
    "text": "Selecting Columns\n\nCreate a vector with names of columns you want to keep:\ncols_to_keep &lt;- c(\"var1\", \"var2\", \"var3\")\nUse as the sole argument to R‚Äôs access operator []:\nsubset_df &lt;- df[cols_to_keep]\nExample: Keeping just the name and fav_num columns:\n\ncols_to_keep &lt;- c(\"name\", \"fav_num\")\nsubset_df &lt;- filtered_df[cols_to_keep]\nsubset_df\n\n\n\n\n\n\nname\nfav_num\n\n\n\n\n2\n\nNA\n\n\n3\nzayd\n11"
  },
  {
    "objectID": "w06-3/slides.html#sampling",
    "href": "w06-3/slides.html#sampling",
    "title": "Introduction to R",
    "section": "Sampling",
    "text": "Sampling\n\nFiltering = choosing rows deterministically\nSampling = choosing rows randomly\nR has a built-in sample() function, but be careful! It does not work directly on data.frame objects üò± Instead:\n\n\n\n Sample row indices:\n\nset.seed(2024)\nindices &lt;- sample(nrow(df), 2)\nindices\n\n[1] 2 1\n\n\n\n Select only these indices:\n\nsample_df &lt;- df2[indices,]\nsample_df\n\n\n\n\n\n\nid\nname\nemail\nfav_num\n\n\n\n\n2\n1\n\nnobody@no.com\nNA\n\n\n1\n0\njeff\njeff@jeff.com\n3.14\n\n\n\n\n\n\n\n\n\n\n\n2024 DSAN Bootcamp W06-3: Intro to R"
  },
  {
    "objectID": "w06-3/index.html",
    "href": "w06-3/index.html",
    "title": "Introduction to R",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w06-3/index.html#the-most-immediately-jarring-differences",
    "href": "w06-3/index.html#the-most-immediately-jarring-differences",
    "title": "Introduction to R",
    "section": "The Most Immediately-Jarring Differences",
    "text": "The Most Immediately-Jarring Differences\n\n\n\n\n\nPython\n\n\n\nR\n\n\n\n\n\nValue Assignment\n\n&lt;varname&gt; = &lt;value&gt;\n\nx = 3\nx\n\n3\n\n\n\n&lt;varname&gt; &lt;- &lt;value&gt;\n\nx &lt;- 3\nx\n\n[1] 3\n\n\n\n\n\n\nIndices\n\nStart from 0\n\nmy_list = [\"a\", \"b\", \"c\"]\nmy_list[0] # Accesses first element\n\n'a'\n\nmy_list[1] # Accesses second element\n\n'b'\n\n\n\nStart from 1\n\nmy_vector &lt;- c(\"a\", \"b\", \"c\")\nmy_vector[0] # Invalid index in R!\n\ncharacter(0)\n\nmy_vector[1] # Accesses first element\n\n[1] \"a\"\n\nmy_vector[2] # Accesses second element\n\n[1] \"b\"\n\n\n\n\n\n\nBooleans\n\nTrue, False\n\nresult = 2 * 2 == 4\nresult\n\nTrue\n\n\n\nTRUE (or T), FALSE (or F)\n\nresult &lt;- 2 * 2 == 4\nresult\n\n[1] TRUE"
  },
  {
    "objectID": "w06-3/index.html#everything-is-a-vector",
    "href": "w06-3/index.html#everything-is-a-vector",
    "title": "Introduction to R",
    "section": "Everything is a Vector",
    "text": "Everything is a Vector\n\nAlthough there are R equivalents for most Python data types, one big difference is that‚Ä¶\nIn R, everything is a vector!\n\n\n\nNumbers\n\nx &lt;- 3\nprint(x)\n\n[1] 3\n\nclass(x)\n\n[1] \"numeric\"\n\nlength(x)\n\n[1] 1\n\n\n\nLength-1 Vectors\n\ny &lt;- c(3)\nprint(y)\n\n[1] 3\n\nclass(y)\n\n[1] \"numeric\"\n\nlength(y)\n\n[1] 1\n\n\n\nLength-N Vectors\n\nz &lt;- c(3, 4, 5)\nprint(z)\n\n[1] 3 4 5\n\nclass(z)\n\n[1] \"numeric\"\n\nlength(z)\n\n[1] 3"
  },
  {
    "objectID": "w06-3/index.html#careful-with-basic-operators-like",
    "href": "w06-3/index.html#careful-with-basic-operators-like",
    "title": "Introduction to R",
    "section": "Careful With ‚ÄúBasic‚Äù Operators Like +!",
    "text": "Careful With ‚ÄúBasic‚Äù Operators Like +!\n\nIf you‚Äôre used to Python, + feels like a natural way to combine things\nR forces you to think explicitly about combining (\\(\\neq\\) adding): more restrictive +\nFor strings:\n\n\nIn Python: + means concatenate\n\nmessage = \"Hi\" + \" \" + \"Jeff\"\nprint(message)\n\nHi Jeff\n\n\n\nIn R: + is not allowed!\n\nmy_message &lt;- \"Hi\" + \" \" + \"Jeff\"\n\nError in \"Hi\" + \" \": non-numeric argument to binary operator\n\n\n\n\nFor numeric lists‚Ä¶\n\n\nIn Python: + means concatenate\n\n[1, 2] + [3, 4]\n\n[1, 2, 3, 4]\n\n\n\nIn R: + means vector addition!\n\nc(1,2) + c(3,4)\n\n[1] 4 6"
  },
  {
    "objectID": "w06-3/index.html#immensely-important-distinction",
    "href": "w06-3/index.html#immensely-important-distinction",
    "title": "Introduction to R",
    "section": "Immensely Important Distinction",
    "text": "Immensely Important Distinction\n\nThroughout bootcamp, throughout DSAN, throughout your career, you‚Äôll use two different ‚Äúflavors‚Äù of R:\n\n\n\nBase R\n\nbase_df &lt;- data.frame(\n  x=c(1,2,3),\n  y=c(\"a\",\"b\",\"c\")\n)\nbase_df\n\n\n\n\n\nx\ny\n\n\n\n\n1\na\n\n\n2\nb\n\n\n3\nc\n\n\n\n\n\nclass(base_df)\n\n[1] \"data.frame\"\n\n\n\nTidyverse\n\nlibrary(tidyverse) # Imports \"tibble\" library\n\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.2     ‚úî readr     2.1.4\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî ggplot2   3.4.3     ‚úî tibble    3.2.1\n‚úî lubridate 1.9.2     ‚úî tidyr     1.3.0\n‚úî purrr     1.0.2     \n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter() masks stats::filter()\n‚úñ dplyr::lag()    masks stats::lag()\n‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\ntv_df &lt;- tribble(\n  ~x, ~y,\n  1, \"a\",\n  2, \"b\",\n  3, \"c\"\n)\ntv_df\n\n\n\n\n\nx\ny\n\n\n\n\n1\na\n\n\n2\nb\n\n\n3\nc\n\n\n\n\n\nclass(tv_df)\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\n\n\n\n\nNote: There are ways to do row-wise and column-wise table creation in both! The key difference here is just data.frame vs.¬†tibble"
  },
  {
    "objectID": "w06-3/index.html#why-are-there-two-ways-to-do-everything",
    "href": "w06-3/index.html#why-are-there-two-ways-to-do-everything",
    "title": "Introduction to R",
    "section": "Why Are There Two Ways to Do Everything?",
    "text": "Why Are There Two Ways to Do Everything?\n\nOne key reason: tidyverse built on the pipe operator |&gt;\nRecognition that data science often involves pipelines: chains of operations performed in sequence\n\nE.g., scrape data ‚Üí clean data ‚Üí save to DB\n\nBase R approach:\nresult &lt;- saveToDB(cleanData(scrapeData()))\nTidyverse approach:\nresult &lt;- scrapeData() |&gt; cleanData() |&gt; saveToDB()\nNow imagine pipelines used by giant companies, e.g., training Netflix‚Äôs recommendation engine!"
  },
  {
    "objectID": "w06-3/index.html#good-news-and-bad-news",
    "href": "w06-3/index.html#good-news-and-bad-news",
    "title": "Introduction to R",
    "section": "|>: Good News and Bad News",
    "text": "|&gt;: Good News and Bad News\n\nf() |&gt; g() just means: take the result of the call f() and pass it as the first argument to g()\nGood news: this means |&gt; is intuitively ‚Äúbackwards compatible‚Äù with many base R functions\nBad news: requires checking the first argument:\n\n\n\n\ngetSampleSize &lt;- function() {\n  return(20)\n}\ngetSampleSize() |&gt; rbinom(10, 0.5)\n\n [1] 4 3 5 5 4 6 4 6 7 5 5 5 6 6 6 6 8 6 6 7\n\n\n\n\ngetNumTrials &lt;- function() {\n  return(10)\n}\ngetNumTrials() |&gt; rbinom(100, 0.5)\n\n [1] 53 42 50 37 48 55 49 53 44 58\n\n\n\n\n[Quick Note:]\n\nIf you‚Äôve used R before, you may have seen the %&gt;% operator from tidyverse\n‚Ä¶It got so popular that it is now built into R (as of 2023) as |&gt;!\n\\(\\implies\\) Switch from %&gt;% to |&gt; for instant efficiency boost üòé"
  },
  {
    "objectID": "w06-3/index.html#combining-strings",
    "href": "w06-3/index.html#combining-strings",
    "title": "Introduction to R",
    "section": "Combining Strings",
    "text": "Combining Strings\n\nEarlier we saw how R doesn‚Äôt allow \"Hi\" + \" \" + \"Jeff\"‚Ä¶\nSo how do we combine strings?\npaste() and paste0()!\n\npaste(\"Hi\", \"Jeff\")\n\n[1] \"Hi Jeff\"\n\npaste0(\"Hi\", \" \", \"Jeff\")\n\n[1] \"Hi Jeff\""
  },
  {
    "objectID": "w06-3/index.html#python-lists-leftrightarrow-r-vectors",
    "href": "w06-3/index.html#python-lists-leftrightarrow-r-vectors",
    "title": "Introduction to R",
    "section": "Python Lists \\(\\leftrightarrow\\) R Vectors",
    "text": "Python Lists \\(\\leftrightarrow\\) R Vectors\n\nCreation\n\n\n\n\nmy_list = [1, 2, 3]\nmy_list\n\n[1, 2, 3]\n\n\n\n\nmy_vector &lt;- c(1, 2, 3)\nmy_vector\n\n[1] 1 2 3\n\n\n\n\n\nInsertion\n\n\n\n\nmy_list.append(4)\nmy_list\n\n[1, 2, 3, 4]\n\n\n\n\nmy_vector &lt;- c(my_vector, 4)\nmy_vector\n\n[1] 1 2 3 4\n\n\n\n\n\nReplicating Elements\n\n\n\n\nmy_list * 3\n\n[1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4]\n\n\n\n\nrep(my_vector, 3)\n\n [1] 1 2 3 4 1 2 3 4 1 2 3 4\n\n\n\n\n\nPython range() \\(\\leftrightarrow\\) R seq()\n\n\n\n\nlist(range(5, 10))\n\n[5, 6, 7, 8, 9]\n\n\n\n\nseq(5, 10)\n\n[1]  5  6  7  8  9 10"
  },
  {
    "objectID": "w06-3/index.html#paste0-with-vectors",
    "href": "w06-3/index.html#paste0-with-vectors",
    "title": "Introduction to R",
    "section": "paste0() with Vectors!",
    "text": "paste0() with Vectors!\n\nnames &lt;- c(\"Aaliya\", \"Brandon\", \"Cyrus\")\npaste0(names, collapse=\" \")\n\n[1] \"Aaliya Brandon Cyrus\"\n\npaste0(names, collapse=\", \")\n\n[1] \"Aaliya, Brandon, Cyrus\"\n\npaste(names, collapse=\", \")\n\n[1] \"Aaliya, Brandon, Cyrus\""
  },
  {
    "objectID": "w06-3/index.html#semi-confusing-point-r-also-has-lists",
    "href": "w06-3/index.html#semi-confusing-point-r-also-has-lists",
    "title": "Introduction to R",
    "section": "Semi-Confusing Point: R Also Has Lists‚Ä¶",
    "text": "Semi-Confusing Point: R Also Has Lists‚Ä¶\n\nRarely used, despite greater similarity to Python lists üòµ‚Äçüí´\nKey difference: all elements of a vector must have same type; elements of a list may have different types\n\nmy_list &lt;- list(\"A\", 2, TRUE)\nmy_list\n\n[[1]]\n[1] \"A\"\n\n[[2]]\n[1] 2\n\n[[3]]\n[1] TRUE\n\n\n(Note how each element is a vector: character vector, integer vector, and boolean vector)"
  },
  {
    "objectID": "w06-3/index.html#pandas-dataframe-leftrightarrow-r-data.frame",
    "href": "w06-3/index.html#pandas-dataframe-leftrightarrow-r-data.frame",
    "title": "Introduction to R",
    "section": "Pandas DataFrame \\(\\leftrightarrow\\) R data.frame",
    "text": "Pandas DataFrame \\(\\leftrightarrow\\) R data.frame\n\n\n\nimport pandas as pd\nx_data = [1, 2, 3]\ny_data = [4, 5, 6]\ndf = pd.DataFrame({\n  'x': x_data, 'y': y_data\n})\nprint(df.to_markdown())\n\n\n\n\nx\ny\n\n\n\n\n0\n1\n4\n\n\n1\n2\n5\n\n\n2\n3\n6\n\n\n\n\n\n\nx_data &lt;- c(1, 2, 3)\ny_data &lt;- c(4, 5, 6)\ndf &lt;- data.frame(\n  x=x_data,\n  y=y_data\n)\ndf\n\n\n\n\n\nx\ny\n\n\n\n\n1\n4\n\n\n2\n5\n\n\n3\n6"
  },
  {
    "objectID": "w06-3/index.html#the-inevitable-headaches-of-missing-data-in-python",
    "href": "w06-3/index.html#the-inevitable-headaches-of-missing-data-in-python",
    "title": "Introduction to R",
    "section": "The Inevitable Headaches of Missing Data in Python",
    "text": "The Inevitable Headaches of Missing Data in Python\n\n\n Given a .csv with missing entries:\n\n\nmy_data.csv\n\nid,name,email\n0,jeff,jeff@jeff.com\n1,,nobody@no.com\n3,zayd,z@email.biz\n\n Python defaults to object columns with NaN (Not-a-Number) values\n\nimport pandas as pd\ndf = pd.read_csv(\"my_data.csv\")\ndf\n\n   id  name          email\n0   0  jeff  jeff@jeff.com\n1   1   NaN  nobody@no.com\n2   3  zayd    z@email.biz\n\ndf.dtypes\n\nid        int64\nname     object\nemail    object\ndtype: object\n\n\n\n Intuitive fix usually isn‚Äôt what you want:\n\ndf_bad = df.copy()\ndf_bad['name'] = df_bad['name'].astype(str)\ndf_bad\n\n   id  name          email\n0   0  jeff  jeff@jeff.com\n1   1   nan  nobody@no.com\n2   3  zayd    z@email.biz\n\ndf_bad.iloc[1]['name']\n\n'nan'\n\n\n This alternative approach ensures missing values are empty strings\n\ndf_better = df.copy()\ndf_better['name'] = df_better['name'].fillna('').astype(str)\ndf_better\n\n   id  name          email\n0   0  jeff  jeff@jeff.com\n1   1        nobody@no.com\n2   3  zayd    z@email.biz\n\ndf_better.iloc[1]['name']\n\n''"
  },
  {
    "objectID": "w06-3/index.html#the-slightly-less-headachey-r-approach",
    "href": "w06-3/index.html#the-slightly-less-headachey-r-approach",
    "title": "Introduction to R",
    "section": "The Slightly-Less-Headachey R Approach!",
    "text": "The Slightly-Less-Headachey R Approach!\n\n\nR reads missing values in character columns as empty strings by default\n\ndf &lt;- read.csv(\"my_data.csv\")\n\nWarning in read.table(file = file, header = header, sep = sep, quote = quote, :\nincomplete final line found by readTableHeader on 'my_data.csv'\n\ndf\n\n\n\n\n\nid\nname\nemail\n\n\n\n\n0\njeff\njeff@jeff.com\n\n\n1\n\nnobody@no.com\n\n\n3\nzayd\nz@email.biz\n\n\n\n\n\ndf$name\n\n[1] \"jeff\" \"\"     \"zayd\"\n\n# We'll learn about sapply() next week!\nsapply(df, class)\n\n         id        name       email \n  \"integer\" \"character\" \"character\" \n\n\n\n‚Ä¶And also has a built-in NA value!\n\n\nmy_data_2.csv\n\nid,name,email,fav_num\n0,jeff,jeff@jeff.com,3.14\n1,,nobody@no.com,\n3,zayd,z@email.biz,11\n\n\ndf2 &lt;- read.csv(\"my_data_2.csv\")\n\nWarning in read.table(file = file, header = header, sep = sep, quote = quote, :\nincomplete final line found by readTableHeader on 'my_data_2.csv'\n\ndf2\n\n\n\n\n\nid\nname\nemail\nfav_num\n\n\n\n\n0\njeff\njeff@jeff.com\n3.14\n\n\n1\n\nnobody@no.com\nNA\n\n\n3\nzayd\nz@email.biz\n11.00\n\n\n\n\n\nsapply(df2, class)\n\n         id        name       email     fav_num \n  \"integer\" \"character\" \"character\"   \"numeric\""
  },
  {
    "objectID": "w06-3/index.html#bonus-built-in-matrices",
    "href": "w06-3/index.html#bonus-built-in-matrices",
    "title": "Introduction to R",
    "section": "Bonus: Built-In Matrices",
    "text": "Bonus: Built-In Matrices\n\nFor data analysis (cleaning, plotting), data.frame is usually the way to go\nFor linear algebra (inverting, multiplying matrices)‚Ä¶\n\n\nUse 2D vectors!\n\nmy_matrix &lt;- matrix(\n  data=c(1, 2, 3, 4),\n  nrow=2, ncol=2, byrow=TRUE\n)\nmy_matrix\n\n     [,1] [,2]\n[1,]    1    2\n[2,]    3    4\n\nclass(my_matrix)\n\n[1] \"matrix\" \"array\" \n\n\n\nBeware! Matrix multiply operator is %*%, NOT *:\n\nmy_matrix * my_matrix\n\n     [,1] [,2]\n[1,]    1    4\n[2,]    9   16\n\nmy_matrix %*% my_matrix\n\n     [,1] [,2]\n[1,]    7   10\n[2,]   15   22"
  },
  {
    "objectID": "w06-3/index.html#filtering-selecting-rows",
    "href": "w06-3/index.html#filtering-selecting-rows",
    "title": "Introduction to R",
    "section": "Filtering (Selecting Rows)",
    "text": "Filtering (Selecting Rows)\n\nIn Base R, filtering involves two steps:\n Create a boolean expression that will evaluate to TRUE for the rows/columns you want to keep, and FALSE otherwise\n Use it in the correct ‚Äúslot‚Äù of R‚Äôs access operator []:\nfiltered_df &lt;- df[&lt;row filter&gt;, &lt;column filter&gt;] # Note: Either (or both) can be left blank!\nR will go through each row, evaluate &lt;row filter&gt;, and keep the row if and only if &lt;row filter&gt; evaluates to TRUE\nExample: Selecting only rows with odd-numbered id values:\n\n\n\n# Boolean expression which is TRUE for\n# odd-numbered ids\nmy_expression &lt;- df2$id %% 2 == 1\nmy_expression\n\n[1] FALSE  TRUE  TRUE\n\n\n\n\nfiltered_df &lt;- df2[my_expression,]\nfiltered_df\n\n\n\n\n\n\nid\nname\nemail\nfav_num\n\n\n\n\n2\n1\n\nnobody@no.com\nNA\n\n\n3\n3\nzayd\nz@email.biz\n11\n\n\n\n\n\n\n\n\n\n\nNow that you know how to set up data.frames, let‚Äôs do something with them!"
  },
  {
    "objectID": "w06-3/index.html#selecting-columns",
    "href": "w06-3/index.html#selecting-columns",
    "title": "Introduction to R",
    "section": "Selecting Columns",
    "text": "Selecting Columns\n\nCreate a vector with names of columns you want to keep:\ncols_to_keep &lt;- c(\"var1\", \"var2\", \"var3\")\nUse as the sole argument to R‚Äôs access operator []:\nsubset_df &lt;- df[cols_to_keep]\nExample: Keeping just the name and fav_num columns:\n\ncols_to_keep &lt;- c(\"name\", \"fav_num\")\nsubset_df &lt;- filtered_df[cols_to_keep]\nsubset_df\n\n\n\n\n\n\nname\nfav_num\n\n\n\n\n2\n\nNA\n\n\n3\nzayd\n11"
  },
  {
    "objectID": "w06-3/index.html#sampling",
    "href": "w06-3/index.html#sampling",
    "title": "Introduction to R",
    "section": "Sampling",
    "text": "Sampling\n\nFiltering = choosing rows deterministically\nSampling = choosing rows randomly\nR has a built-in sample() function, but be careful! It does not work directly on data.frame objects üò± Instead:\n\n\n\n Sample row indices:\n\nset.seed(2024)\nindices &lt;- sample(nrow(df), 2)\nindices\n\n[1] 2 1\n\n\n\n Select only these indices:\n\nsample_df &lt;- df2[indices,]\nsample_df\n\n\n\n\n\n\nid\nname\nemail\nfav_num\n\n\n\n\n2\n1\n\nnobody@no.com\nNA\n\n\n1\n0\njeff\njeff@jeff.com\n3.14"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "2024 DSAN Bootcamp: Weeks 6-8",
    "section": "",
    "text": "Order By\n       Default\n         \n          Title\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\nTitle\n\n\nAuthor\n\n\n\n\n\n\nControl Flow in R\n\n\nJeff Jacobs\n\n\n\n\nData Visualization in R\n\n\nJeff Jacobs\n\n\n\n\nInstalling Quarto\n\n\nJeff Jacobs\n\n\n\n\nIntroduction to Quarto = Python + R\n\n\nJeff Jacobs\n\n\n\n\nIntroduction to R\n\n\nJeff Jacobs\n\n\n\n\nIntroduction to the Tidyverse\n\n\nJeff Jacobs\n\n\n\n\nUsing APIs in R\n\n\nJeff Jacobs\n\n\n\n\n\nNo matching items",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "w06-1/slides.html#setting-up-your-environment",
    "href": "w06-1/slides.html#setting-up-your-environment",
    "title": "Introduction to Quarto = Python + R",
    "section": "Setting Up Your Environment",
    "text": "Setting Up Your Environment\nTie yourself to the mast! Please!\n\nUlysses and the Sirens, J. W. Waterhouse (1891)\n\n\n\n\n\n\n\nDive right into coding(Bc you think data science = coding)\n\\(\\implies\\)\nSpend 75% of your time wrestling with environment issues üòî\n\n\nThink about + set up environment before diving into coding\n\\(\\implies\\)\nSpend 25% of your time wrestling with environment issues üòé"
  },
  {
    "objectID": "w06-1/slides.html#if-you-were-just-coding-in-python",
    "href": "w06-1/slides.html#if-you-were-just-coding-in-python",
    "title": "Introduction to Quarto = Python + R",
    "section": "If You Were Just Coding in Python",
    "text": "If You Were Just Coding in Python\n\n\n\n\n\nGUI wrapper around Python (IDE)\nRun blocks of Python code (from .ipynb)\n\n\n\n\nThe Python Language\n\nProgramming language\npython &lt;script&gt;.py"
  },
  {
    "objectID": "w06-1/slides.html#python-on-its-own-demonstration",
    "href": "w06-1/slides.html#python-on-its-own-demonstration",
    "title": "Introduction to Quarto = Python + R",
    "section": "Python-On-Its-Own Demonstration",
    "text": "Python-On-Its-Own Demonstration\n\n Environment! Create a bootcamp-w06 folder, and open this folder in VSCode!\nCreate a hello.py file, with the following content:\n\n\nhello.py\n\nprint(\"Hello from Python!\")\n\nNow open Terminal (in VSCode: Right click in Explorer panel ‚Üí ‚ÄúOpen in Integrated Terminal‚Äù) and execute\npython hello.py\nYou should see the following output:\nHello from Python!"
  },
  {
    "objectID": "w06-1/slides.html#python-within-jupyter-demo",
    "href": "w06-1/slides.html#python-within-jupyter-demo",
    "title": "Introduction to Quarto = Python + R",
    "section": "Python-Within-Jupyter Demo",
    "text": "Python-Within-Jupyter Demo\n\nStill within the Integrated Terminal, type jupyter and press Enter‚Ä¶\n(If Python is correctly set up and Jupyter has been correctly installed) You‚Äôll see an interface allowing you to create Notebooks"
  },
  {
    "objectID": "w06-1/slides.html#jupyter-notebooks-.ipynb-files",
    "href": "w06-1/slides.html#jupyter-notebooks-.ipynb-files",
    "title": "Introduction to Quarto = Python + R",
    "section": "Jupyter Notebooks (.ipynb Files)",
    "text": "Jupyter Notebooks (.ipynb Files)\n\nYou saw these in more detail during Python section!\nAll you need to remember here is: this is a wrapper around the core python executable: all it does is\n\nTakes the code you enter into a cell\nRuns it using python &lt;temporary file&gt;.py\nStores the output within the .ipynb file itself\n\n\n\n(Make sure to terminate Jupyter using  once you‚Äôre done using it!)"
  },
  {
    "objectID": "w06-1/slides.html#if-you-were-just-coding-in-r",
    "href": "w06-1/slides.html#if-you-were-just-coding-in-r",
    "title": "Introduction to Quarto = Python + R",
    "section": "If You Were Just Coding in R",
    "text": "If You Were Just Coding in R\n\n\n\n\n\nGUI wrapper around R (Integrated Development Environment = IDE)\nRun blocks of R code (from .Rmd)\n\n\n\nThe R Language \n\nProgramming language\nRscript &lt;script&gt;.r"
  },
  {
    "objectID": "w06-1/slides.html#r-on-its-own-demonstration",
    "href": "w06-1/slides.html#r-on-its-own-demonstration",
    "title": "Introduction to Quarto = Python + R",
    "section": "R-On-Its-Own Demonstration",
    "text": "R-On-Its-Own Demonstration\n\nCreate a hello.r file, with the following content:\n\n\nhello.r\n\nprint(\"Hello from R!\")\n\nNow open Terminal (in VSCode: Right click in Explorer panel ‚Üí ‚ÄúOpen in Integrated Terminal‚Äù) and execute\nRscript hello.r\nYou should see the following output:\n[1] \"Hello from R!\"\n(Plz notice the similarity with Python!)"
  },
  {
    "objectID": "w06-1/slides.html#r-in-rstudio-demonstration",
    "href": "w06-1/slides.html#r-in-rstudio-demonstration",
    "title": "Introduction to Quarto = Python + R",
    "section": "R-in-RStudio Demonstration",
    "text": "R-in-RStudio Demonstration\n\nSimilarly to Jupyter, you can think of RStudio as a fancy ‚Äúwrapper‚Äù around R (an IDE)\nYou can (probably should) install RStudio locally, BUT‚Ä¶\nI want to instead use this as an opportunity to introduce you to Posit.Cloud!\nThe resources provided by the free account will be sufficient for any assignments/projects in my sections! (The Jeff Guarantee‚Ñ¢)"
  },
  {
    "objectID": "w06-1/slides.html#r-markdown-.rmd-files",
    "href": "w06-1/slides.html#r-markdown-.rmd-files",
    "title": "Introduction to Quarto = Python + R",
    "section": "R Markdown (.rmd) Files",
    "text": "R Markdown (.rmd) Files\n\n(Warning: Soon to be obsolete! Replaced by very similar .qmd, Quarto Markdown üòâ)\nChoose ‚ÄúNew Blank File‚Äù ‚Üí ‚ÄúR Markdown‚Ä¶‚Äù (in the Files Pane, bottom right of RStudio) to create hello.Rmd:\n\n\n\n\nhello.Rmd\n\n---\ntitle: \"Hello from R Markdown!\"\n---\n\n## Introduction\n\nHello here is some R code\n\n```{r}\nprint(\"Hello from R\")\n```\n\n## A Cool Table\n\n| Problem | Solution |\n|:-:|:-:|\n| $3^5$ | 243 |\n\n\n\n‚Üí"
  },
  {
    "objectID": "w06-1/slides.html#literate-programming-transparent-science",
    "href": "w06-1/slides.html#literate-programming-transparent-science",
    "title": "Introduction to Quarto = Python + R",
    "section": "Literate Programming = Transparent Science!",
    "text": "Literate Programming = Transparent Science!\n\nAcademic papers, video demonstrations, etc., can hide more than they reveal\n\nEx: Look at all these UI Templates on Canva!\n\nGiven a plot in some paper‚Ä¶ How do we know they didn‚Äôt just ‚Äútweak‚Äù the settings, for hours on end, to produce the result they wanted? (\\(\\neq\\) ethical science)\nOne answer: if they provide the code that produced the figure, then we can interrogate their settings/choices, and change them, to see if the result still holds!"
  },
  {
    "objectID": "w06-1/slides.html#markdown-r-python-rightarrow-quarto",
    "href": "w06-1/slides.html#markdown-r-python-rightarrow-quarto",
    "title": "Introduction to Quarto = Python + R",
    "section": "Markdown + R + Python \\(\\rightarrow\\) Quarto",
    "text": "Markdown + R + Python \\(\\rightarrow\\) Quarto\n\nMarkdown is basically glorified plaintext: text+basic formatting (bold, italics, headings, links, tables)\nR is just a program that lives on your computer and executes R code\nPython is just a program that lives on your computer and executes Python code\nQuarto is a wrapper around R and Python, allowing you to write .qmd (Quarto MarkDown) files: Markdown documents containing R and Python code!"
  },
  {
    "objectID": "w06-1/slides.html#quarto-building-blocks",
    "href": "w06-1/slides.html#quarto-building-blocks",
    "title": "Introduction to Quarto = Python + R",
    "section": "Quarto Building Blocks",
    "text": "Quarto Building Blocks\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGUI wrapper around R (Integrated Development Environment = IDE)\nRun blocks of R code (from .Rmd)\n\n\n\nThe R Language \n\nProgramming language\nRscript &lt;script&gt;.r\n\n\n\n\n\n\n+\n\n\n\n\n\n\n\n\n\nGUI wrapper around Python (IDE)\nRun blocks of Python code (from .ipynb)\n\n\n\n\nThe Python Language\n\nProgramming language\npython &lt;script&gt;.py"
  },
  {
    "objectID": "w06-1/slides.html#reproducibility-and-literate-programming",
    "href": "w06-1/slides.html#reproducibility-and-literate-programming",
    "title": "Introduction to Quarto = Python + R",
    "section": "Reproducibility and Literate Programming",
    "text": "Reproducibility and Literate Programming\n\nReproducible document: includes both the content (text, tables, figures) and the code that generated it\n\ntldr: If you‚Äôre copying-and-pasting results from your code output to your results document, a red flag should go off in your head!\n\nLiterate programming: Human-readable explanations are included alongside code, within a single document."
  },
  {
    "objectID": "w06-1/slides.html#so-what-is-r",
    "href": "w06-1/slides.html#so-what-is-r",
    "title": "Introduction to Quarto = Python + R",
    "section": "So‚Ä¶ What is R?",
    "text": "So‚Ä¶ What is R?\n\nPython was created mainly for software engineers\n\nStatistical computing functionality requires 3rd-party imports: NumPy, SciPy, scikit-learn\n\nR was created mainly for statisticians\n\nSoftware engineering functionality often requires 3rd-party libraries: e.g., purrr (for Python-style lambda functions)\n\nOne key implication for DSAN: probability distributions (Normal, Binomial, etc.) are built into R! (Available through NumPy in Python)"
  },
  {
    "objectID": "w06-1/slides.html#probability-distribution-example",
    "href": "w06-1/slides.html#probability-distribution-example",
    "title": "Introduction to Quarto = Python + R",
    "section": "Probability Distribution Example",
    "text": "Probability Distribution Example\nDon‚Äôt worry about the details of the code for now! Just note how‚Ä¶\n\n\nrbinom() is built into R, whereas\n\nset.seed(1234)\ncoin_results &lt;- rbinom(n=20, size=10, prob=0.5)\nprint(coin_results)\n\n [1] 3 5 5 6 7 6 1 4 6 5 6 5 4 7 4 7 4 4 4 4\n\nclass(coin_results)\n\n[1] \"integer\"\n\n\n\n\nCode\nlibrary(tidyverse)\ncoin_flip_df &lt;- tibble(num_heads = coin_results)\nggplot(coin_flip_df, aes(x=num_heads)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n\nrng.binomial() requires NumPy\n\nimport numpy as np\nrng = np.random.default_rng(seed=1234)\nten_coin_results = rng.binomial(n=10, p=0.5, size=20)\nprint(ten_coin_results)\n\n[8 5 7 4 4 3 4 4 8 4 5 5 7 7 6 6 6 4 4 7]\n\ntype(ten_coin_results)\n\n&lt;class 'numpy.ndarray'&gt;\n\n\n\n\nCode\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nresult_plot = plt.figure()\nresult_plot.set_figheight(3.5)\ncoin_flip_df = pd.DataFrame({'num_heads': ten_coin_results})\nresult_plot = sns.histplot(data=coin_flip_df, x='num_heads')\nplt.tight_layout()\nplt.show()"
  },
  {
    "objectID": "w06-1/slides.html#the-moment-youve-been-waiting-for",
    "href": "w06-1/slides.html#the-moment-youve-been-waiting-for",
    "title": "Introduction to Quarto = Python + R",
    "section": "The Moment You‚Äôve Been Waiting For ü§Ø",
    "text": "The Moment You‚Äôve Been Waiting For ü§Ø\n\nHow did I include both R and Python code (and its outputs) in the previous slide?\nQuarto allows integration of R+Python via code blocks!\n\n\n\n\nmy_file.qmd\n\n```{python}\nprint(\"Hello from Python!\")\n```\n\n```{r}\nprint(\"Hello from R!\")\n```\n\n\n‚Üí\n\nHello from Python!\n\nHello from R!"
  },
  {
    "objectID": "w06-1/slides.html#the-takeaway-python-and-r",
    "href": "w06-1/slides.html#the-takeaway-python-and-r",
    "title": "Introduction to Quarto = Python + R",
    "section": "The Takeaway: Python and R",
    "text": "The Takeaway: Python and R\n\nQuarto enables switching from Python to R at any point!\nSo, as we start on our R journey, try to identify its strengths and weaknesses relative to Python\nGiven a particular task‚Äîweb scraping, data cleaning, exploratory data analysis, training a machine learning model, etc.‚Äîlearn how to do it in both Python and R, then evaluate which one ‚Äúclicks‚Äù more with you\n(In other words, my ask: if you already know how to do something in Python, pls be open to learning it in R as well! You might find it‚Äôs easier‚Äîtry your best to consciously avoid getting ‚Äúlocked into‚Äù one language)\n\n\nThis also holds for Base R to Tidyverse!\n\n\n\n\n2024 DSAN Bootcamp W6.1: Intro to Quarto"
  },
  {
    "objectID": "w06-1/index.html",
    "href": "w06-1/index.html",
    "title": "Introduction to Quarto = Python + R",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w06-1/index.html#setting-up-your-environment",
    "href": "w06-1/index.html#setting-up-your-environment",
    "title": "Introduction to Quarto = Python + R",
    "section": "Setting Up Your Environment",
    "text": "Setting Up Your Environment\nTie yourself to the mast! Please!\n\n\n\nUlysses and the Sirens, J. W. Waterhouse (1891)\n\n\n\n\n\n\n\n\n\n\nDive right into coding(Bc you think data science = coding)\n\\(\\implies\\)\nSpend 75% of your time wrestling with environment issues üòî\n\n\nThink about + set up environment before diving into coding\n\\(\\implies\\)\nSpend 25% of your time wrestling with environment issues üòé"
  },
  {
    "objectID": "w06-1/index.html#if-you-were-just-coding-in-python",
    "href": "w06-1/index.html#if-you-were-just-coding-in-python",
    "title": "Introduction to Quarto = Python + R",
    "section": "If You Were Just Coding in Python",
    "text": "If You Were Just Coding in Python\n\n\n\n\n\nGUI wrapper around Python (IDE)\nRun blocks of Python code (from .ipynb)\n\n\n\n\nThe Python Language\n\nProgramming language\npython &lt;script&gt;.py"
  },
  {
    "objectID": "w06-1/index.html#python-on-its-own-demonstration",
    "href": "w06-1/index.html#python-on-its-own-demonstration",
    "title": "Introduction to Quarto = Python + R",
    "section": "Python-On-Its-Own Demonstration",
    "text": "Python-On-Its-Own Demonstration\n\n Environment! Create a bootcamp-w06 folder, and open this folder in VSCode!\nCreate a hello.py file, with the following content:\n\n\nhello.py\n\nprint(\"Hello from Python!\")\n\nNow open Terminal (in VSCode: Right click in Explorer panel ‚Üí ‚ÄúOpen in Integrated Terminal‚Äù) and execute\npython hello.py\nYou should see the following output:\nHello from Python!"
  },
  {
    "objectID": "w06-1/index.html#python-within-jupyter-demo",
    "href": "w06-1/index.html#python-within-jupyter-demo",
    "title": "Introduction to Quarto = Python + R",
    "section": "Python-Within-Jupyter Demo",
    "text": "Python-Within-Jupyter Demo\n\nStill within the Integrated Terminal, type jupyter and press Enter‚Ä¶\n(If Python is correctly set up and Jupyter has been correctly installed) You‚Äôll see an interface allowing you to create Notebooks"
  },
  {
    "objectID": "w06-1/index.html#jupyter-notebooks-.ipynb-files",
    "href": "w06-1/index.html#jupyter-notebooks-.ipynb-files",
    "title": "Introduction to Quarto = Python + R",
    "section": "Jupyter Notebooks (.ipynb Files)",
    "text": "Jupyter Notebooks (.ipynb Files)\n\nYou saw these in more detail during Python section!\nAll you need to remember here is: this is a wrapper around the core python executable: all it does is\n\nTakes the code you enter into a cell\nRuns it using python &lt;temporary file&gt;.py\nStores the output within the .ipynb file itself\n\n\n\n\n\n(Make sure to terminate Jupyter using  once you‚Äôre done using it!)"
  },
  {
    "objectID": "w06-1/index.html#if-you-were-just-coding-in-r",
    "href": "w06-1/index.html#if-you-were-just-coding-in-r",
    "title": "Introduction to Quarto = Python + R",
    "section": "If You Were Just Coding in R",
    "text": "If You Were Just Coding in R\n\n\n\n\n\nGUI wrapper around R (Integrated Development Environment = IDE)\nRun blocks of R code (from .Rmd)\n\n\n\nThe R Language \n\nProgramming language\nRscript &lt;script&gt;.r"
  },
  {
    "objectID": "w06-1/index.html#r-on-its-own-demonstration",
    "href": "w06-1/index.html#r-on-its-own-demonstration",
    "title": "Introduction to Quarto = Python + R",
    "section": "R-On-Its-Own Demonstration",
    "text": "R-On-Its-Own Demonstration\n\nCreate a hello.r file, with the following content:\n\n\nhello.r\n\nprint(\"Hello from R!\")\n\nNow open Terminal (in VSCode: Right click in Explorer panel ‚Üí ‚ÄúOpen in Integrated Terminal‚Äù) and execute\nRscript hello.r\nYou should see the following output:\n[1] \"Hello from R!\"\n(Plz notice the similarity with Python!)"
  },
  {
    "objectID": "w06-1/index.html#r-in-rstudio-demonstration",
    "href": "w06-1/index.html#r-in-rstudio-demonstration",
    "title": "Introduction to Quarto = Python + R",
    "section": "R-in-RStudio Demonstration",
    "text": "R-in-RStudio Demonstration\n\nSimilarly to Jupyter, you can think of RStudio as a fancy ‚Äúwrapper‚Äù around R (an IDE)\nYou can (probably should) install RStudio locally, BUT‚Ä¶\nI want to instead use this as an opportunity to introduce you to Posit.Cloud!\nThe resources provided by the free account will be sufficient for any assignments/projects in my sections! (The Jeff Guarantee‚Ñ¢)"
  },
  {
    "objectID": "w06-1/index.html#r-markdown-.rmd-files",
    "href": "w06-1/index.html#r-markdown-.rmd-files",
    "title": "Introduction to Quarto = Python + R",
    "section": "R Markdown (.rmd) Files",
    "text": "R Markdown (.rmd) Files\n\n(Warning: Soon to be obsolete! Replaced by very similar .qmd, Quarto Markdown üòâ)\nChoose ‚ÄúNew Blank File‚Äù ‚Üí ‚ÄúR Markdown‚Ä¶‚Äù (in the Files Pane, bottom right of RStudio) to create hello.Rmd:\n\n\n\n\nhello.Rmd\n\n---\ntitle: \"Hello from R Markdown!\"\n---\n\n## Introduction\n\nHello here is some R code\n\n```{r}\nprint(\"Hello from R\")\n```\n\n## A Cool Table\n\n| Problem | Solution |\n|:-:|:-:|\n| $3^5$ | 243 |\n\n\n\n‚Üí"
  },
  {
    "objectID": "w06-1/index.html#literate-programming-transparent-science",
    "href": "w06-1/index.html#literate-programming-transparent-science",
    "title": "Introduction to Quarto = Python + R",
    "section": "Literate Programming = Transparent Science!",
    "text": "Literate Programming = Transparent Science!\n\nAcademic papers, video demonstrations, etc., can hide more than they reveal\n\nEx: Look at all these UI Templates on Canva!\n\nGiven a plot in some paper‚Ä¶ How do we know they didn‚Äôt just ‚Äútweak‚Äù the settings, for hours on end, to produce the result they wanted? (\\(\\neq\\) ethical science)\nOne answer: if they provide the code that produced the figure, then we can interrogate their settings/choices, and change them, to see if the result still holds!"
  },
  {
    "objectID": "w06-1/index.html#markdown-r-python-rightarrow-quarto",
    "href": "w06-1/index.html#markdown-r-python-rightarrow-quarto",
    "title": "Introduction to Quarto = Python + R",
    "section": "Markdown + R + Python \\(\\rightarrow\\) Quarto",
    "text": "Markdown + R + Python \\(\\rightarrow\\) Quarto\n\nMarkdown is basically glorified plaintext: text+basic formatting (bold, italics, headings, links, tables)\nR is just a program that lives on your computer and executes R code\nPython is just a program that lives on your computer and executes Python code\nQuarto is a wrapper around R and Python, allowing you to write .qmd (Quarto MarkDown) files: Markdown documents containing R and Python code!"
  },
  {
    "objectID": "w06-1/index.html#quarto-building-blocks",
    "href": "w06-1/index.html#quarto-building-blocks",
    "title": "Introduction to Quarto = Python + R",
    "section": "Quarto Building Blocks",
    "text": "Quarto Building Blocks\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGUI wrapper around R (Integrated Development Environment = IDE)\nRun blocks of R code (from .Rmd)\n\n\n\nThe R Language \n\nProgramming language\nRscript &lt;script&gt;.r\n\n\n\n\n\n\n+\n\n\n\n\n\n\n\n\n\nGUI wrapper around Python (IDE)\nRun blocks of Python code (from .ipynb)\n\n\n\n\nThe Python Language\n\nProgramming language\npython &lt;script&gt;.py"
  },
  {
    "objectID": "w06-1/index.html#reproducibility-and-literate-programming",
    "href": "w06-1/index.html#reproducibility-and-literate-programming",
    "title": "Introduction to Quarto = Python + R",
    "section": "Reproducibility and Literate Programming",
    "text": "Reproducibility and Literate Programming\n\nReproducible document: includes both the content (text, tables, figures) and the code that generated it\n\ntldr: If you‚Äôre copying-and-pasting results from your code output to your results document, a red flag should go off in your head!\n\nLiterate programming: Human-readable explanations are included alongside code, within a single document."
  },
  {
    "objectID": "w06-1/index.html#so-what-is-r",
    "href": "w06-1/index.html#so-what-is-r",
    "title": "Introduction to Quarto = Python + R",
    "section": "So‚Ä¶ What is R?",
    "text": "So‚Ä¶ What is R?\n\nPython was created mainly for software engineers\n\nStatistical computing functionality requires 3rd-party imports: NumPy, SciPy, scikit-learn\n\nR was created mainly for statisticians\n\nSoftware engineering functionality often requires 3rd-party libraries: e.g., purrr (for Python-style lambda functions)\n\nOne key implication for DSAN: probability distributions (Normal, Binomial, etc.) are built into R! (Available through NumPy in Python)"
  },
  {
    "objectID": "w06-1/index.html#probability-distribution-example",
    "href": "w06-1/index.html#probability-distribution-example",
    "title": "Introduction to Quarto = Python + R",
    "section": "Probability Distribution Example",
    "text": "Probability Distribution Example\nDon‚Äôt worry about the details of the code for now! Just note how‚Ä¶\n\n\nrbinom() is built into R, whereas\n\nset.seed(1234)\ncoin_results &lt;- rbinom(n=20, size=10, prob=0.5)\nprint(coin_results)\n\n [1] 3 5 5 6 7 6 1 4 6 5 6 5 4 7 4 7 4 4 4 4\n\nclass(coin_results)\n\n[1] \"integer\"\n\n\n\n\nCode\nlibrary(tidyverse)\n\n\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.2     ‚úî readr     2.1.4\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî ggplot2   3.4.3     ‚úî tibble    3.2.1\n‚úî lubridate 1.9.2     ‚úî tidyr     1.3.0\n‚úî purrr     1.0.2     \n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter() masks stats::filter()\n‚úñ dplyr::lag()    masks stats::lag()\n‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\ncoin_flip_df &lt;- tibble(num_heads = coin_results)\nggplot(coin_flip_df, aes(x=num_heads)) +\n  geom_bar()\n\n\n\n\n\n\n\n\n\n\nrng.binomial() requires NumPy\n\nimport numpy as np\nrng = np.random.default_rng(seed=1234)\nten_coin_results = rng.binomial(n=10, p=0.5, size=20)\nprint(ten_coin_results)\n\n[8 5 7 4 4 3 4 4 8 4 5 5 7 7 6 6 6 4 4 7]\n\ntype(ten_coin_results)\n\n&lt;class 'numpy.ndarray'&gt;\n\n\n\n\nCode\nimport pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nresult_plot = plt.figure()\nresult_plot.set_figheight(3.5)\ncoin_flip_df = pd.DataFrame({'num_heads': ten_coin_results})\nresult_plot = sns.histplot(data=coin_flip_df, x='num_heads')\n\n\n/Users/jpj/.virtualenvs/r-reticulate/lib/python3.11/site-packages/seaborn/_oldcore.py:1119: FutureWarning: use_inf_as_na option is deprecated and will be removed in a future version. Convert inf values to NaN before operating instead.\n  with pd.option_context('mode.use_inf_as_na', True):\n\n\nCode\nplt.tight_layout()\nplt.show()"
  },
  {
    "objectID": "w06-1/index.html#the-moment-youve-been-waiting-for",
    "href": "w06-1/index.html#the-moment-youve-been-waiting-for",
    "title": "Introduction to Quarto = Python + R",
    "section": "The Moment You‚Äôve Been Waiting For ü§Ø",
    "text": "The Moment You‚Äôve Been Waiting For ü§Ø\n\nHow did I include both R and Python code (and its outputs) in the previous slide?\nQuarto allows integration of R+Python via code blocks!\n\n\n\n\nmy_file.qmd\n\n```{python}\nprint(\"Hello from Python!\")\n```\n\n```{r}\nprint(\"Hello from R!\")\n```\n\n\n‚Üí\n\nHello from Python!\n\nHello from R!"
  },
  {
    "objectID": "w06-1/index.html#the-takeaway-python-and-r",
    "href": "w06-1/index.html#the-takeaway-python-and-r",
    "title": "Introduction to Quarto = Python + R",
    "section": "The Takeaway: Python and R",
    "text": "The Takeaway: Python and R\n\nQuarto enables switching from Python to R at any point!\nSo, as we start on our R journey, try to identify its strengths and weaknesses relative to Python\nGiven a particular task‚Äîweb scraping, data cleaning, exploratory data analysis, training a machine learning model, etc.‚Äîlearn how to do it in both Python and R, then evaluate which one ‚Äúclicks‚Äù more with you\n(In other words, my ask: if you already know how to do something in Python, pls be open to learning it in R as well! You might find it‚Äôs easier‚Äîtry your best to consciously avoid getting ‚Äúlocked into‚Äù one language)\n\n\nThis also holds for Base R to Tidyverse!"
  },
  {
    "objectID": "w08-1/index.html",
    "href": "w08-1/index.html",
    "title": "Data Visualization in R",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w08-1/index.html#base-r-vs.-tidyverse",
    "href": "w08-1/index.html#base-r-vs.-tidyverse",
    "title": "Data Visualization in R",
    "section": "Base R vs.¬†Tidyverse",
    "text": "Base R vs.¬†Tidyverse\n\n\n\n\nCode\nsource(\"../_globals.r\")\nlexp_df &lt;- read.csv(\"assets/lexp_by_ward.csv\")\nplot(\n  lexp_df$ward, lexp_df$life_exp,\n  main=\"DC Life Expectancy by Ward (2015)\",\n  xlab=\"Ward\", ylab=\"Life Expectancy\",\n  pch=19, cex.lab=2, cex.main=2, cex.axis=2\n)\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(tidyverse)\n\n\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.2     ‚úî readr     2.1.4\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî lubridate 1.9.2     ‚úî tibble    3.2.1\n‚úî purrr     1.0.2     ‚úî tidyr     1.3.0\n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter() masks stats::filter()\n‚úñ dplyr::lag()    masks stats::lag()\n‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\nus_mean &lt;- 78.69\nlexp_df &lt;- read_csv(\"assets/lexp_by_ward.csv\")\n\n\nRows: 8 Columns: 3\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\ndbl (3): year, ward, life_exp\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\nlexp_df &lt;- lexp_df |&gt; mutate(\n  above_avg = ifelse(life_exp &gt; us_mean, \"Above Mean\", \"Below Mean\")\n)\nlexp_df |&gt; ggplot(aes(x=as.factor(ward), y=life_exp, color=above_avg)) +\n  geom_point(size=5) +\n  geom_segment(\n    aes(xend=ward, yend=us_mean),\n    linewidth=1.5\n  ) +\n  geom_hline(\n    aes(\n      yintercept=us_mean,\n      linetype=\"National Mean\"\n    ),\n    linewidth=1\n  ) +\n  dsan_theme(\"half\") +\n  theme(\n    plot.title = element_text(hjust = 0.5)\n  ) +\n  labs(\n    x = \"Ward\",\n    y = \"Life Expectancy\",\n    title = \"DC Life Expectancy by Ward (2015)\"\n  ) +\n  scale_linetype_manual(\"test\", values=c(\"dashed\")) +\n  remove_legend_title()\n\n\n\n\n\nData from DC Dept. of Health"
  },
  {
    "objectID": "w08-1/index.html#plus-way-wider-range-of-plot-types",
    "href": "w08-1/index.html#plus-way-wider-range-of-plot-types",
    "title": "Data Visualization in R",
    "section": "Plus Way Wider Range of Plot Types!",
    "text": "Plus Way Wider Range of Plot Types!\n(All using the same syntax)\n\n\nCode\nlibrary(sf)\n\n\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n\n\nCode\nmy_sf &lt;- read_sf(\"assets/Wards_from_2022.geojson\")\nmy_sf_merged &lt;- my_sf |&gt; left_join(\n  lexp_df, by=c(\"WARD\"=\"ward\")\n)\nmy_sf_merged |&gt; ggplot(aes(fill=life_exp)) +\n  geom_sf() +\n  dsan_theme() +\n  theme(\n    axis.line = element_blank(),\n    axis.text = element_blank(),\n    axis.ticks = element_blank()\n  ) +\n  labs(\n    title = \"DC Life Expectancy by Ward (2015)\",\n    fill = \"Life Exp.\"\n  ) +\n  scale_fill_viridis_c()\n\n\n\n\n\n\n\n\nFigure¬†1: Life expectancy by ward; Shapefile from OpenData.DC.gov"
  },
  {
    "objectID": "w08-1/index.html#cant-we-just-use-fancy-statistical-methods",
    "href": "w08-1/index.html#cant-we-just-use-fancy-statistical-methods",
    "title": "Data Visualization in R",
    "section": "‚Ä¶Can‚Äôt We Just Use Fancy Statistical Methods?",
    "text": "‚Ä¶Can‚Äôt We Just Use Fancy Statistical Methods?\n\n‚Ä¶Enter Anscombe‚Äôs Quartet\n\n\n\nCode\nlibrary(tidyverse)\nlibrary(datasets)\nanscombe_df &lt;- datasets::anscombe |&gt;\n  #mutate(id = row_number()) |&gt;\n  pivot_longer(\n    everything(),\n    cols_vary = \"slowest\",\n    names_to = c(\".value\", \"Dataset\"),\n    names_pattern = \"(.)(.)\"\n  )\nanscombe_plot_base &lt;- anscombe_df |&gt;\n  ggplot(aes(x=x, y=y, color=Dataset)) +\n  geom_point(size=g_pointsize / 2) +\n  geom_smooth(method=\"lm\", se=FALSE, fullrange=TRUE) +\n  dsan_theme(\"full\") +\n  xlim(c(4, 20)) + ylim(c(2, 14))\nanscombe_plot_base +\n  facet_wrap(vars(Dataset), nrow=2, scales=\"free\")\n\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "w08-1/index.html#the-scariest-dataset-of-all-time",
    "href": "w08-1/index.html#the-scariest-dataset-of-all-time",
    "title": "Data Visualization in R",
    "section": "The Scariest Dataset of All Time",
    "text": "The Scariest Dataset of All Time\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\n\n\n\nMeans\n\n\n\nCode\nanscombe_df |&gt; group_by(Dataset) |&gt;\n  summarize(\n    x_mean = round(mean(x), 2),\n    y_mean = round(mean(y), 2)\n  )\n\n\n\n\n\n\n\n\nDataset\nx_mean\ny_mean\n\n\n\n\n1\n9\n7.5\n\n\n2\n9\n7.5\n\n\n3\n9\n7.5\n\n\n4\n9\n7.5\n\n\n\n\n\n\nFigure¬†2: Column means for each dataset\n\n\n\n\n\n\nStandard Deviations\n\n\n\nCode\nanscombe_df |&gt; group_by(Dataset) |&gt;\n  summarize(\n    x_sd = round(sd(x), 2),\n    y_sd = round(sd(y), 2)\n  )\n\n\n\n\n\n\n\n\nDataset\nx_sd\ny_sd\n\n\n\n\n1\n3.32\n2.03\n\n\n2\n3.32\n2.03\n\n\n3\n3.32\n2.03\n\n\n4\n3.32\n2.03\n\n\n\n\n\n\nFigure¬†3: Standard deviations for each dataset\n\n\n\n\n\n\nCorrelations\n\n\n\nCode\nlibrary(corrr)\ncorr_df &lt;- anscombe_df |&gt;\n  group_by(Dataset) |&gt;\n  summarize(\n    r = round(cor(x, y), 2)\n  )\ncorr_df\n\n\n\n\n\n\n\n\nDataset\nr\n\n\n\n\n1\n0.82\n\n\n2\n0.82\n\n\n3\n0.82\n\n\n4\n0.82\n\n\n\n\n\n\nFigure¬†4: Correlation between \\(x\\) and \\(y\\) for each dataset"
  },
  {
    "objectID": "w08-1/index.html#it-gets-worse",
    "href": "w08-1/index.html#it-gets-worse",
    "title": "Data Visualization in R",
    "section": "It Gets Worse‚Ä¶",
    "text": "It Gets Worse‚Ä¶\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(broom)\nlm_df &lt;- anscombe_df |&gt; group_by(Dataset) |&gt;\n  do(tidy(lm(y ~ x, data = .))) |&gt;\n  mutate(across(where(is.numeric), round, 2)) |&gt;\n  ungroup() |&gt;\n  mutate(\n    term = gsub(\"Intercept\",\"Int\", term)\n  )\n\n\nWarning: There was 1 warning in `mutate()`.\n‚Ñπ In argument: `across(where(is.numeric), round, 2)`.\n‚Ñπ In group 1: `Dataset = \"1\"`.\nCaused by warning:\n! The `...` argument of `across()` is deprecated as of dplyr 1.1.0.\nSupply arguments directly to `.fns` through an anonymous function instead.\n\n  # Previously\n  across(a:b, mean, na.rm = TRUE)\n\n  # Now\n  across(a:b, \\(x) mean(x, na.rm = TRUE))\n\n\n\n\n\n\nCode\nlm_df |&gt; filter(Dataset == 1) |&gt; select(!Dataset)\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.12\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00\n\n\n\n\n\n\n\n\n\nCode\nlm_df |&gt; filter(Dataset == 2) |&gt; select(!Dataset)\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.13\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nlm_df |&gt; filter(Dataset == 3) |&gt; select(!Dataset)\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.12\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00\n\n\n\n\n\n\n\n\n\nCode\nlm_df |&gt; filter(Dataset == 4) |&gt; select(!Dataset)\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.12\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00"
  },
  {
    "objectID": "w08-1/index.html#intuition",
    "href": "w08-1/index.html#intuition",
    "title": "Data Visualization in R",
    "section": "Intuition",
    "text": "Intuition\n\nSentences are made up of subjects, verbs, objects\n\n\n\n\n\n\n\nG\n\n\ncluster_2\n\nBiko\n\n\ncluster_1\n\nhugged\n\n\ncluster_0\n\nJeff\n\n\n\ndata\n\nSubject\n\n\n\naes\n\nVerb\n\n\n\ndata-&gt;aes\n\n\n\n\n\ngeom\n\nObject\n\n\n\naes-&gt;geom\n\n\n\n\n\n\n\n\n\n\nVisualizations are made up of encodings, coordinate systems, aesthetic mappings\n\n\n\n\n\n\n\nG\n\n\ncluster_2\n\ngeom_point()\n\n\ncluster_0\n\nmy_data |&gt;\n\n\ncluster_1\n\nggplot(aes(x=year, y=height)) |&gt;\n\n\n\ndata\n\nData\n\n\n\naes\n\nAesthetics\n\n\n\ndata-&gt;aes\n\n\n\n\n\ngeom\n\nGeometry\n\n\n\naes-&gt;geom"
  },
  {
    "objectID": "w08-1/index.html#graphical-primitives",
    "href": "w08-1/index.html#graphical-primitives",
    "title": "Data Visualization in R",
    "section": "Graphical Primitives",
    "text": "Graphical Primitives\nSplit the visualization task into discrete steps, joined by |&gt;!\n\n\n\n\nLayer\nFunction\nExplanation\n\n\n\n\nData\nggplot(df)\nRaw data you want to visualize\n\n\nAesthetics\naes(x=xcol,y=ycol)\nMapping of df columns onto geometries\n\n\nGeometries\ngeom_*()\nWhich geometric objects to use\n\n\nFacets\nfacet_*()\nArrangement of plots into a grid\n\n\nTheme\ntheme(), labs()\nOverall visual defaults, titles, axis labels\n\n\n\n\n(See the official ggplot2 book for more!)"
  },
  {
    "objectID": "w08-1/index.html#ggplot2-in-practice",
    "href": "w08-1/index.html#ggplot2-in-practice",
    "title": "Data Visualization in R",
    "section": "ggplot2 In Practice",
    "text": "ggplot2 In Practice\n(In practice, a few central graphical primitives you‚Äôll use over and over again)\n\n\n\ngeom_bar()\n\n\n\nCode\nbar_data &lt;- tribble(\n  ~Category, ~Value,\n  \"A\", 100,\n  \"B\", 200\n)\nggplot(bar_data, aes(x=Category, y=Value)) +\n  geom_bar(stat=\"identity\") +\n  dsan_theme(\"quarter\")\n\n\n\n\n\n\n\n\n\n\n\nstat_function()\n\n\n\nCode\nggplot(data.frame(x=c(-4,4)), aes(x=x)) +\n  stat_function(fun=dnorm, linewidth=g_linewidth) +\n  dsan_theme(\"quarter\")"
  },
  {
    "objectID": "w08-1/index.html#common-geometries",
    "href": "w08-1/index.html#common-geometries",
    "title": "Data Visualization in R",
    "section": "Common Geometries",
    "text": "Common Geometries\n\n\ngeom_point() for scatterplots\n\n\nCode\nN_scatter &lt;- 50\nrandom_points &lt;- data.frame(x=runif(N_scatter,0,1),y=runif(N_scatter,0,1))\nggplot(random_points, aes(x=x, y=y)) +\n  geom_point(size = g_pointsize) +\n  dsan_theme(\"quarter\")\n\n\n\n\n\n\n\n\n\n\nand geom_line() for line graphs\n\n\nCode\nN_line &lt;- 15\nrand_line &lt;- data.frame(x=seq(1,N_line),y=runif(N_line,0,10))\nggplot(rand_line, aes(x=x, y=y)) +\n  geom_line(linewidth = g_linewidth) +\n  dsan_theme(\"quarter\")"
  },
  {
    "objectID": "w08-1/index.html#combining-geometries",
    "href": "w08-1/index.html#combining-geometries",
    "title": "Data Visualization in R",
    "section": "Combining Geometries",
    "text": "Combining Geometries\n‚Ä¶Which can be used together in a single plot:\n\n\nCode\nggplot(rand_line, aes(x=x, y=y)) +\n  geom_line(linewidth=g_linewidth) +\n  geom_point(size=g_pointsize/2) +\n  dsan_theme(\"full\")"
  },
  {
    "objectID": "w08-1/index.html#titles-axis-labels",
    "href": "w08-1/index.html#titles-axis-labels",
    "title": "Data Visualization in R",
    "section": "Titles + Axis Labels",
    "text": "Titles + Axis Labels\nCan all be accomplished using the labs() function!\n\n\n\n\nCode\nrand_plot &lt;- rand_line |&gt;\n  ggplot(aes(x=x, y=y)) +\n  geom_line(linewidth=g_linewidth) +\n  geom_point(size=g_pointsize/2) +\n  dsan_theme(\"quarter\") +\n  labs(\n    title = \"My Cool Plot\",\n    x = \"The x value\",\n    y = \"The y value\"\n  )\n\n\n\n\n\nCode\nrand_plot"
  },
  {
    "objectID": "w08-1/index.html#categorical-variables",
    "href": "w08-1/index.html#categorical-variables",
    "title": "Data Visualization in R",
    "section": "Categorical Variables",
    "text": "Categorical Variables\nUse the color aesthetic with factor() to differentiate categories\n\n\n(Clustered data generation code)\nset.seed(2024)\ncentroids &lt;- list(c(0,0),c(0,1),c(1,0),c(1,1))\ncluster_df &lt;- tibble()\nN &lt;- 50\nSigma &lt;- matrix(c(0.05, 0, 0, 0.05), nrow=2, ncol=2, byrow=TRUE)\nfor (i in 1:length(centroids)) {\n  cur_centroid &lt;- centroids[[i]]\n  # Generate N points from this centroid\n  cur_data &lt;- MASS::mvrnorm(N, cur_centroid, Sigma)\n  colnames(cur_data) &lt;- c(\"x\", \"y\")\n  cur_df &lt;- as_tibble(cur_data)\n  cur_df &lt;- cur_df |&gt; mutate(\n    cluster = i\n  )\n  cluster_df &lt;- rbind(cluster_df, cur_df)\n}\n\n\n\n\nWithout factor() \n\n\nCode\ncluster_df |&gt; ggplot(aes(x=x, y=y, color=cluster)) +\n  geom_point(size=g_pointsize / 2) +\n  dsan_theme(\"half\") +\n  labs(color=\"Cluster\")\n\n\n\n\n\n\n\n\n\n\nWith factor() üíØ\n\n\nCode\ncluster_df |&gt; ggplot(aes(x=x, y=y, color=factor(cluster))) +\n  geom_point(size=g_pointsize / 2) +\n  dsan_theme(\"half\") +\n  labs(color=\"Cluster\")"
  },
  {
    "objectID": "w08-1/index.html#facets",
    "href": "w08-1/index.html#facets",
    "title": "Data Visualization in R",
    "section": "Facets",
    "text": "Facets\nIf individual plot gets too busy, facets provide an easy way to split data into multiple (automatically-labeled) plots!\n\n\n\n\nCode\nfacet_plot &lt;- cluster_df |&gt;\n  ggplot(aes(\n    x=x, y=y,\n    color=factor(cluster)\n  )) +\n  geom_point(size=g_pointsize / 2) +\n  dsan_theme(\"half\") +\n  labs(color=\"Cluster\") +\n  facet_wrap(vars(cluster),nrow=2)\n\n\n\n\nfacet_plot\n\n\n\n\n\n\n\n\n\n\n(Much more on this in DSAN 5200: Advanced Data Visualization üòâ)"
  },
  {
    "objectID": "w08-1/index.html#loading-text-data",
    "href": "w08-1/index.html#loading-text-data",
    "title": "Data Visualization in R",
    "section": "Loading Text Data",
    "text": "Loading Text Data\n\n\nCode\nlibrary(tidyverse)\nlibrary(tidytext)\ntext_url &lt;- \"https://gist.githubusercontent.com/jpowerj/493e395c2688ea72eabd0277e8e7a392/raw/6f882d95f3a1dc21c3b7e0b18b68d64b165c6367/eggs.txt\"\nresult_df &lt;- as_tibble(read_lines(text_url))\nresult_df &lt;- result_df |&gt; filter(value != \"\")\nresult_df |&gt; head(5)\n\n\n\n\n\n\nvalue\n\n\n\n\nI am Sam\n\n\nSam I am\n\n\nThat Sam-I-am!\n\n\nThat Sam-I-am!\n\n\nI do not like that Sam-I-am!"
  },
  {
    "objectID": "w08-1/index.html#tokenization",
    "href": "w08-1/index.html#tokenization",
    "title": "Data Visualization in R",
    "section": "Tokenization",
    "text": "Tokenization\n\n\nCode\ntoken_df &lt;- result_df |&gt;\n  unnest_tokens(word, value)\ntoken_df |&gt; head()\n\n\n\n\n\n\nword\n\n\n\n\ni\n\n\nam\n\n\nsam\n\n\nsam\n\n\ni\n\n\nam"
  },
  {
    "objectID": "w08-1/index.html#removing-stopwords",
    "href": "w08-1/index.html#removing-stopwords",
    "title": "Data Visualization in R",
    "section": "Removing Stopwords",
    "text": "Removing Stopwords\n\n\nCode\nlibrary(stopwords)\ncleaned_df &lt;- token_df |&gt;\n  anti_join(get_stopwords())\n\n\nJoining with `by = join_by(word)`\n\n\nCode\ncleaned_df |&gt; head()\n\n\n\n\n\n\nword\n\n\n\n\nsam\n\n\nsam\n\n\nsam\n\n\nsam\n\n\nlike\n\n\nsam"
  },
  {
    "objectID": "w08-1/index.html#computing-token-counts",
    "href": "w08-1/index.html#computing-token-counts",
    "title": "Data Visualization in R",
    "section": "Computing Token Counts",
    "text": "Computing Token Counts\n\n\nCode\ncount_df &lt;- cleaned_df |&gt;\n  count(word, sort = TRUE)\ncount_df |&gt; head()\n\n\n\n\n\n\nword\nn\n\n\n\n\nlike\n45\n\n\neat\n24\n\n\nsam\n18\n\n\neggs\n11\n\n\ngreen\n11\n\n\nham\n10"
  },
  {
    "objectID": "w08-1/index.html#basic-wordcloud",
    "href": "w08-1/index.html#basic-wordcloud",
    "title": "Data Visualization in R",
    "section": "Basic Wordcloud",
    "text": "Basic Wordcloud\n\n\nCode\nset.seed(2024)\nlibrary(ggwordcloud)\n\n\nWarning: package 'ggwordcloud' was built under R version 4.3.3\n\n\nCode\ncount_df |&gt;\n  ggplot(aes(label = word)) +\n  geom_text_wordcloud(size = 20) +\n  theme_minimal()\n\n\nWarning in wordcloud_boxes(data_points = points_valid_first, boxes = boxes, :\nSome words could not fit on page. They have been placed at their original\npositions."
  },
  {
    "objectID": "w08-1/index.html#with-color",
    "href": "w08-1/index.html#with-color",
    "title": "Data Visualization in R",
    "section": "With Color!",
    "text": "With Color!\n\n\nCode\n# The wordclouds\nset.seed(2024)\nlibrary(ggwordcloud)\ncount_df |&gt;\n  ggplot(aes(label = word, color = n)) +\n  geom_text_wordcloud(size = 20) +\n  theme_minimal()\n\n\nWarning in wordcloud_boxes(data_points = points_valid_first, boxes = boxes, :\nSome words could not fit on page. They have been placed at their original\npositions."
  },
  {
    "objectID": "w08-1/index.html#the-size-aesthetic",
    "href": "w08-1/index.html#the-size-aesthetic",
    "title": "Data Visualization in R",
    "section": "The Size Aesthetic",
    "text": "The Size Aesthetic\n\n\nCode\ncount_df |&gt;\n  ggplot(aes(label = word, size = n, color = n)) +\n  geom_text_wordcloud() +\n  scale_size_area(max_size = 50) +\n  theme_minimal()\n\n\nWarning in wordcloud_boxes(data_points = points_valid_first, boxes = boxes, :\nSome words could not fit on page. They have been placed at their original\npositions."
  },
  {
    "objectID": "w08-1/slides.html#base-r-vs.-tidyverse",
    "href": "w08-1/slides.html#base-r-vs.-tidyverse",
    "title": "Data Visualization in R",
    "section": "Base R vs.¬†Tidyverse",
    "text": "Base R vs.¬†Tidyverse\n\n\n\n\nCode\nsource(\"../_globals.r\")\nlexp_df &lt;- read.csv(\"assets/lexp_by_ward.csv\")\nplot(\n  lexp_df$ward, lexp_df$life_exp,\n  main=\"DC Life Expectancy by Ward (2015)\",\n  xlab=\"Ward\", ylab=\"Life Expectancy\",\n  pch=19, cex.lab=2, cex.main=2, cex.axis=2\n)\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(tidyverse)\nus_mean &lt;- 78.69\nlexp_df &lt;- read_csv(\"assets/lexp_by_ward.csv\")\nlexp_df &lt;- lexp_df |&gt; mutate(\n  above_avg = ifelse(life_exp &gt; us_mean, \"Above Mean\", \"Below Mean\")\n)\nlexp_df |&gt; ggplot(aes(x=as.factor(ward), y=life_exp, color=above_avg)) +\n  geom_point(size=5) +\n  geom_segment(\n    aes(xend=ward, yend=us_mean),\n    linewidth=1.5\n  ) +\n  geom_hline(\n    aes(\n      yintercept=us_mean,\n      linetype=\"National Mean\"\n    ),\n    linewidth=1\n  ) +\n  dsan_theme(\"half\") +\n  theme(\n    plot.title = element_text(hjust = 0.5)\n  ) +\n  labs(\n    x = \"Ward\",\n    y = \"Life Expectancy\",\n    title = \"DC Life Expectancy by Ward (2015)\"\n  ) +\n  scale_linetype_manual(\"test\", values=c(\"dashed\")) +\n  remove_legend_title()\n\n\n\n\n\nData from DC Dept. of Health"
  },
  {
    "objectID": "w08-1/slides.html#plus-way-wider-range-of-plot-types",
    "href": "w08-1/slides.html#plus-way-wider-range-of-plot-types",
    "title": "Data Visualization in R",
    "section": "Plus Way Wider Range of Plot Types!",
    "text": "Plus Way Wider Range of Plot Types!\n(All using the same syntax)\n\n\nCode\nlibrary(sf)\nmy_sf &lt;- read_sf(\"assets/Wards_from_2022.geojson\")\nmy_sf_merged &lt;- my_sf |&gt; left_join(\n  lexp_df, by=c(\"WARD\"=\"ward\")\n)\nmy_sf_merged |&gt; ggplot(aes(fill=life_exp)) +\n  geom_sf() +\n  dsan_theme() +\n  theme(\n    axis.line = element_blank(),\n    axis.text = element_blank(),\n    axis.ticks = element_blank()\n  ) +\n  labs(\n    title = \"DC Life Expectancy by Ward (2015)\",\n    fill = \"Life Exp.\"\n  ) +\n  scale_fill_viridis_c()\n\n\n\n\nFigure¬†1: Life expectancy by ward; Shapefile from OpenData.DC.gov"
  },
  {
    "objectID": "w08-1/slides.html#cant-we-just-use-fancy-statistical-methods",
    "href": "w08-1/slides.html#cant-we-just-use-fancy-statistical-methods",
    "title": "Data Visualization in R",
    "section": "‚Ä¶Can‚Äôt We Just Use Fancy Statistical Methods?",
    "text": "‚Ä¶Can‚Äôt We Just Use Fancy Statistical Methods?\n\n‚Ä¶Enter Anscombe‚Äôs Quartet\n\n\n\nCode\nlibrary(tidyverse)\nlibrary(datasets)\nanscombe_df &lt;- datasets::anscombe |&gt;\n  #mutate(id = row_number()) |&gt;\n  pivot_longer(\n    everything(),\n    cols_vary = \"slowest\",\n    names_to = c(\".value\", \"Dataset\"),\n    names_pattern = \"(.)(.)\"\n  )\nanscombe_plot_base &lt;- anscombe_df |&gt;\n  ggplot(aes(x=x, y=y, color=Dataset)) +\n  geom_point(size=g_pointsize / 2) +\n  geom_smooth(method=\"lm\", se=FALSE, fullrange=TRUE) +\n  dsan_theme(\"full\") +\n  xlim(c(4, 20)) + ylim(c(2, 14))\nanscombe_plot_base +\n  facet_wrap(vars(Dataset), nrow=2, scales=\"free\")"
  },
  {
    "objectID": "w08-1/slides.html#the-scariest-dataset-of-all-time",
    "href": "w08-1/slides.html#the-scariest-dataset-of-all-time",
    "title": "Data Visualization in R",
    "section": "The Scariest Dataset of All Time",
    "text": "The Scariest Dataset of All Time\n\n\n\n\nMeans\n\n\n\nCode\nanscombe_df |&gt; group_by(Dataset) |&gt;\n  summarize(\n    x_mean = round(mean(x), 2),\n    y_mean = round(mean(y), 2)\n  )\n\n\n\n\n\n\n\n\nDataset\nx_mean\ny_mean\n\n\n\n\n1\n9\n7.5\n\n\n2\n9\n7.5\n\n\n3\n9\n7.5\n\n\n4\n9\n7.5\n\n\n\n\n\n\nFigure¬†2: Column means for each dataset\n\n\n\n\n\n\nStandard Deviations\n\n\n\nCode\nanscombe_df |&gt; group_by(Dataset) |&gt;\n  summarize(\n    x_sd = round(sd(x), 2),\n    y_sd = round(sd(y), 2)\n  )\n\n\n\n\n\n\n\n\nDataset\nx_sd\ny_sd\n\n\n\n\n1\n3.32\n2.03\n\n\n2\n3.32\n2.03\n\n\n3\n3.32\n2.03\n\n\n4\n3.32\n2.03\n\n\n\n\n\n\nFigure¬†3: Standard deviations for each dataset\n\n\n\n\n\n\nCorrelations\n\n\n\nCode\nlibrary(corrr)\ncorr_df &lt;- anscombe_df |&gt;\n  group_by(Dataset) |&gt;\n  summarize(\n    r = round(cor(x, y), 2)\n  )\ncorr_df\n\n\n\n\n\n\n\n\nDataset\nr\n\n\n\n\n1\n0.82\n\n\n2\n0.82\n\n\n3\n0.82\n\n\n4\n0.82\n\n\n\n\n\n\nFigure¬†4: Correlation between \\(x\\) and \\(y\\) for each dataset"
  },
  {
    "objectID": "w08-1/slides.html#it-gets-worse",
    "href": "w08-1/slides.html#it-gets-worse",
    "title": "Data Visualization in R",
    "section": "It Gets Worse‚Ä¶",
    "text": "It Gets Worse‚Ä¶\n\n\n\nCode\nlibrary(broom)\nlm_df &lt;- anscombe_df |&gt; group_by(Dataset) |&gt;\n  do(tidy(lm(y ~ x, data = .))) |&gt;\n  mutate(across(where(is.numeric), round, 2)) |&gt;\n  ungroup() |&gt;\n  mutate(\n    term = gsub(\"Intercept\",\"Int\", term)\n  )\n\n\n\n\n\nlm_df |&gt; filter(Dataset == 1) |&gt; select(!Dataset)\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.12\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00\n\n\n\n\n\n\n\n\nlm_df |&gt; filter(Dataset == 2) |&gt; select(!Dataset)\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.13\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00\n\n\n\n\n\n\n\n\n\n\n\nlm_df |&gt; filter(Dataset == 3) |&gt; select(!Dataset)\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.12\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00\n\n\n\n\n\n\n\n\nlm_df |&gt; filter(Dataset == 4) |&gt; select(!Dataset)\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\n\n\n\n\n(Int)\n3.0\n1.12\n2.67\n0.03\n\n\nx\n0.5\n0.12\n4.24\n0.00"
  },
  {
    "objectID": "w08-1/slides.html#intuition",
    "href": "w08-1/slides.html#intuition",
    "title": "Data Visualization in R",
    "section": "Intuition",
    "text": "Intuition\n\nSentences are made up of subjects, verbs, objects\n\n\n\n\n\n\n\nG\n\n\ncluster_0\n\nJeff\n\n\ncluster_1\n\nhugged\n\n\ncluster_2\n\nBiko\n\n\n\ndata\n\nSubject\n\n\n\naes\n\nVerb\n\n\n\ndata-&gt;aes\n\n\n\n\n\ngeom\n\nObject\n\n\n\naes-&gt;geom\n\n\n\n\n\n\n\n\n\n\nVisualizations are made up of encodings, coordinate systems, aesthetic mappings\n\n\n\n\n\n\n\nG\n\n\ncluster_0\n\nmy_data |&gt;\n\n\ncluster_1\n\nggplot(aes(x=year, y=height)) |&gt;\n\n\ncluster_2\n\ngeom_point()\n\n\n\ndata\n\nData\n\n\n\naes\n\nAesthetics\n\n\n\ndata-&gt;aes\n\n\n\n\n\ngeom\n\nGeometry\n\n\n\naes-&gt;geom"
  },
  {
    "objectID": "w08-1/slides.html#graphical-primitives",
    "href": "w08-1/slides.html#graphical-primitives",
    "title": "Data Visualization in R",
    "section": "Graphical Primitives",
    "text": "Graphical Primitives\nSplit the visualization task into discrete steps, joined by |&gt;!\n\n\n\n\nLayer\nFunction\nExplanation\n\n\n\n\nData\nggplot(df)\nRaw data you want to visualize\n\n\nAesthetics\naes(x=xcol,y=ycol)\nMapping of df columns onto geometries\n\n\nGeometries\ngeom_*()\nWhich geometric objects to use\n\n\nFacets\nfacet_*()\nArrangement of plots into a grid\n\n\nTheme\ntheme(), labs()\nOverall visual defaults, titles, axis labels\n\n\n\n\n(See the official ggplot2 book for more!)"
  },
  {
    "objectID": "w08-1/slides.html#ggplot2-in-practice",
    "href": "w08-1/slides.html#ggplot2-in-practice",
    "title": "Data Visualization in R",
    "section": "ggplot2 In Practice",
    "text": "ggplot2 In Practice\n(In practice, a few central graphical primitives you‚Äôll use over and over again)\n\n\n\ngeom_bar()\n\n\nbar_data &lt;- tribble(\n  ~Category, ~Value,\n  \"A\", 100,\n  \"B\", 200\n)\nggplot(bar_data, aes(x=Category, y=Value)) +\n  geom_bar(stat=\"identity\") +\n  dsan_theme(\"quarter\")\n\n\n\n\n\n\n\n\n\n\nstat_function()\n\n\nggplot(data.frame(x=c(-4,4)), aes(x=x)) +\n  stat_function(fun=dnorm, linewidth=g_linewidth) +\n  dsan_theme(\"quarter\")"
  },
  {
    "objectID": "w08-1/slides.html#common-geometries",
    "href": "w08-1/slides.html#common-geometries",
    "title": "Data Visualization in R",
    "section": "Common Geometries",
    "text": "Common Geometries\n\n\ngeom_point() for scatterplots\n\nN_scatter &lt;- 50\nrandom_points &lt;- data.frame(x=runif(N_scatter,0,1),y=runif(N_scatter,0,1))\nggplot(random_points, aes(x=x, y=y)) +\n  geom_point(size = g_pointsize) +\n  dsan_theme(\"quarter\")\n\n\n\n\n\n\n\n\n\nand geom_line() for line graphs\n\nN_line &lt;- 15\nrand_line &lt;- data.frame(x=seq(1,N_line),y=runif(N_line,0,10))\nggplot(rand_line, aes(x=x, y=y)) +\n  geom_line(linewidth = g_linewidth) +\n  dsan_theme(\"quarter\")"
  },
  {
    "objectID": "w08-1/slides.html#combining-geometries",
    "href": "w08-1/slides.html#combining-geometries",
    "title": "Data Visualization in R",
    "section": "Combining Geometries",
    "text": "Combining Geometries\n‚Ä¶Which can be used together in a single plot:\n\nggplot(rand_line, aes(x=x, y=y)) +\n  geom_line(linewidth=g_linewidth) +\n  geom_point(size=g_pointsize/2) +\n  dsan_theme(\"full\")"
  },
  {
    "objectID": "w08-1/slides.html#titles-axis-labels",
    "href": "w08-1/slides.html#titles-axis-labels",
    "title": "Data Visualization in R",
    "section": "Titles + Axis Labels",
    "text": "Titles + Axis Labels\nCan all be accomplished using the labs() function!\n\n\n\nrand_plot &lt;- rand_line |&gt;\n  ggplot(aes(x=x, y=y)) +\n  geom_line(linewidth=g_linewidth) +\n  geom_point(size=g_pointsize/2) +\n  dsan_theme(\"quarter\") +\n  labs(\n    title = \"My Cool Plot\",\n    x = \"The x value\",\n    y = \"The y value\"\n  )\n\n\n\nrand_plot"
  },
  {
    "objectID": "w08-1/slides.html#categorical-variables",
    "href": "w08-1/slides.html#categorical-variables",
    "title": "Data Visualization in R",
    "section": "Categorical Variables",
    "text": "Categorical Variables\nUse the color aesthetic with factor() to differentiate categories\n\n\n(Clustered data generation code)\nset.seed(2024)\ncentroids &lt;- list(c(0,0),c(0,1),c(1,0),c(1,1))\ncluster_df &lt;- tibble()\nN &lt;- 50\nSigma &lt;- matrix(c(0.05, 0, 0, 0.05), nrow=2, ncol=2, byrow=TRUE)\nfor (i in 1:length(centroids)) {\n  cur_centroid &lt;- centroids[[i]]\n  # Generate N points from this centroid\n  cur_data &lt;- MASS::mvrnorm(N, cur_centroid, Sigma)\n  colnames(cur_data) &lt;- c(\"x\", \"y\")\n  cur_df &lt;- as_tibble(cur_data)\n  cur_df &lt;- cur_df |&gt; mutate(\n    cluster = i\n  )\n  cluster_df &lt;- rbind(cluster_df, cur_df)\n}\n\n\n\n\nWithout factor() \n\n\nCode\ncluster_df |&gt; ggplot(aes(x=x, y=y, color=cluster)) +\n  geom_point(size=g_pointsize / 2) +\n  dsan_theme(\"half\") +\n  labs(color=\"Cluster\")\n\n\n\n\n\n\n\n\n\n\nWith factor() üíØ\n\n\nCode\ncluster_df |&gt; ggplot(aes(x=x, y=y, color=factor(cluster))) +\n  geom_point(size=g_pointsize / 2) +\n  dsan_theme(\"half\") +\n  labs(color=\"Cluster\")"
  },
  {
    "objectID": "w08-1/slides.html#facets",
    "href": "w08-1/slides.html#facets",
    "title": "Data Visualization in R",
    "section": "Facets",
    "text": "Facets\nIf individual plot gets too busy, facets provide an easy way to split data into multiple (automatically-labeled) plots!\n\n\n\n\nCode\nfacet_plot &lt;- cluster_df |&gt;\n  ggplot(aes(\n    x=x, y=y,\n    color=factor(cluster)\n  )) +\n  geom_point(size=g_pointsize / 2) +\n  dsan_theme(\"half\") +\n  labs(color=\"Cluster\") +\n  facet_wrap(vars(cluster),nrow=2)\n\n\n\n\nfacet_plot\n\n\n\n\n\n\n\n\n\n\n(Much more on this in DSAN 5200: Advanced Data Visualization üòâ)"
  },
  {
    "objectID": "w08-1/slides.html#loading-text-data",
    "href": "w08-1/slides.html#loading-text-data",
    "title": "Data Visualization in R",
    "section": "Loading Text Data",
    "text": "Loading Text Data\n\nlibrary(tidyverse)\nlibrary(tidytext)\ntext_url &lt;- \"https://gist.githubusercontent.com/jpowerj/493e395c2688ea72eabd0277e8e7a392/raw/6f882d95f3a1dc21c3b7e0b18b68d64b165c6367/eggs.txt\"\nresult_df &lt;- as_tibble(read_lines(text_url))\nresult_df &lt;- result_df |&gt; filter(value != \"\")\nresult_df |&gt; head(5)\n\n\n\n\n\nvalue\n\n\n\n\nI am Sam\n\n\nSam I am\n\n\nThat Sam-I-am!\n\n\nThat Sam-I-am!\n\n\nI do not like that Sam-I-am!"
  },
  {
    "objectID": "w08-1/slides.html#tokenization",
    "href": "w08-1/slides.html#tokenization",
    "title": "Data Visualization in R",
    "section": "Tokenization",
    "text": "Tokenization\n\ntoken_df &lt;- result_df |&gt;\n  unnest_tokens(word, value)\ntoken_df |&gt; head()\n\n\n\n\n\nword\n\n\n\n\ni\n\n\nam\n\n\nsam\n\n\nsam\n\n\ni\n\n\nam"
  },
  {
    "objectID": "w08-1/slides.html#removing-stopwords",
    "href": "w08-1/slides.html#removing-stopwords",
    "title": "Data Visualization in R",
    "section": "Removing Stopwords",
    "text": "Removing Stopwords\n\nlibrary(stopwords)\ncleaned_df &lt;- token_df |&gt;\n  anti_join(get_stopwords())\ncleaned_df |&gt; head()\n\n\n\n\n\nword\n\n\n\n\nsam\n\n\nsam\n\n\nsam\n\n\nsam\n\n\nlike\n\n\nsam"
  },
  {
    "objectID": "w08-1/slides.html#computing-token-counts",
    "href": "w08-1/slides.html#computing-token-counts",
    "title": "Data Visualization in R",
    "section": "Computing Token Counts",
    "text": "Computing Token Counts\n\ncount_df &lt;- cleaned_df |&gt;\n  count(word, sort = TRUE)\ncount_df |&gt; head()\n\n\n\n\n\nword\nn\n\n\n\n\nlike\n45\n\n\neat\n24\n\n\nsam\n18\n\n\neggs\n11\n\n\ngreen\n11\n\n\nham\n10"
  },
  {
    "objectID": "w08-1/slides.html#basic-wordcloud",
    "href": "w08-1/slides.html#basic-wordcloud",
    "title": "Data Visualization in R",
    "section": "Basic Wordcloud",
    "text": "Basic Wordcloud\n\nset.seed(2024)\nlibrary(ggwordcloud)\ncount_df |&gt;\n  ggplot(aes(label = word)) +\n  geom_text_wordcloud(size = 20) +\n  theme_minimal()"
  },
  {
    "objectID": "w08-1/slides.html#with-color",
    "href": "w08-1/slides.html#with-color",
    "title": "Data Visualization in R",
    "section": "With Color!",
    "text": "With Color!\n\n# The wordclouds\nset.seed(2024)\nlibrary(ggwordcloud)\ncount_df |&gt;\n  ggplot(aes(label = word, color = n)) +\n  geom_text_wordcloud(size = 20) +\n  theme_minimal()"
  },
  {
    "objectID": "w08-1/slides.html#the-size-aesthetic",
    "href": "w08-1/slides.html#the-size-aesthetic",
    "title": "Data Visualization in R",
    "section": "The Size Aesthetic",
    "text": "The Size Aesthetic\n\ncount_df |&gt;\n  ggplot(aes(label = word, size = n, color = n)) +\n  geom_text_wordcloud() +\n  scale_size_area(max_size = 50) +\n  theme_minimal()\n\n\n\n\n\n2024 DSAN Bootcamp W08-1: Visualization"
  },
  {
    "objectID": "w07-2/index.html",
    "href": "w07-2/index.html",
    "title": "Introduction to the Tidyverse",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w07-2/index.html#tidy-data",
    "href": "w07-2/index.html#tidy-data",
    "title": "Introduction to the Tidyverse",
    "section": "Tidy Data",
    "text": "Tidy Data\n\n\n\nEvery row represents an observation\nEvery column represents an attribute\nEvery cell contains a value \\(V_{{\\color{#E69F00}i}{\\color{#56B4E9}j}}\\) = attribute \\(j\\) for observation \\(i\\)\n\n\n\n\n\nTable¬†1: A tidy dataset, with observation IDs in orange, column names in blue, and values in green\n\n\n\n\n\n\nVar A\nVar B\n\n\n\n\nObs 1\nVal 1A\nVal 1B\n\n\nObs 2\nVal 2A\nVal 2B\n\n\n\n\n\n\n\n\n\n\n\n\n‚úÖ Tidy!\n\n\n\n\n\n\nid\nname\nflights\n\n\n\n\nDCA\nReagan National\n11.55\n\n\nBWI\nBaltimore-Wash Int'l\n11.15\n\n\nIAD\nDulles International\n10.27\n\n\n\n\n\n\n\n\n\n\n Tidy Data Check\n\n\n\n\nChoose a row, take note of its ID\nGo through values in row, asking yourself: is this the value of some attribute of [observation]?\n\n\n\n\n\n‚ùå Not Tidy!\n\n\n\n\n\n\nid\nvar\nvalue\n\n\n\n\nDCA\nname\nReagan National\n\n\nDCA\nflights\n11.55\n\n\nBWI\nname\nBaltimore-Wash Int'l\n\n\nBWI\nflights\n11.15\n\n\nIAD\nname\nDulles International\n\n\nIAD\nflights\n10.27\n\n\n\n\n\n\n\nAbove: 11.55 is the value of an attribute of DCA (number of flights in 2022, in millions); Right: name is not a property of DCA"
  },
  {
    "objectID": "w07-2/index.html#observation-ids-can-be-tuples",
    "href": "w07-2/index.html#observation-ids-can-be-tuples",
    "title": "Introduction to the Tidyverse",
    "section": "Observation IDs Can Be Tuples!",
    "text": "Observation IDs Can Be Tuples!\n\n\n\n\n\nCode\nlibrary(tidyverse)\n\n\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.2     ‚úî readr     2.1.4\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî ggplot2   3.4.3     ‚úî tibble    3.2.1\n‚úî lubridate 1.9.2     ‚úî tidyr     1.3.0\n‚úî purrr     1.0.2     \n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter() masks stats::filter()\n‚úñ dplyr::lag()    masks stats::lag()\n‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\ntable1\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\n‚úÖ Tidy! Here we pass the ‚ÄúTidy Data Check‚Äù since 745 is a property of [Afghanistan in 1999]: its number of TB cases\n\n\n\nCode\nlibrary(tidyverse)\ntable2 |&gt; head()\n\n\n\n\n\n\ncountry\nyear\ntype\ncount\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362\n\n\n\n\n\n\n‚ùå Not Tidy! Here we fail the Tidy Data Check since cases is not a property of [Afghanistan in 1999]"
  },
  {
    "objectID": "w07-2/index.html#the-tidyverse",
    "href": "w07-2/index.html#the-tidyverse",
    "title": "Introduction to the Tidyverse",
    "section": "The Tidyverse",
    "text": "The Tidyverse\n\n\n\ndplyr \nggplot2 \nforcats \ntibble \n\n\nreadr \nstringr \ntidyr \npurrr"
  },
  {
    "objectID": "w07-2/index.html#readr",
    "href": "w07-2/index.html#readr",
    "title": "Introduction to the Tidyverse",
    "section": "readr",
    "text": "readr\nHomepage  | Overview (R4DS)  | PDF Cheatsheet \nTwo key functions: read_csv(), write_csv() (Bonus: read_delim() if others fail)\n\n\n\n\n\n\n Warning! read_csv() vs.¬†read.csv()\n\n\n\nNote that these are not the same as R‚Äôs built-in read.csv() and write.csv()! The built-in R functions will produce a plain data.frame object, not a tibble\n\n\n\n\n\nCan handle URLs as well!\nShare data+code in seconds by using in combination with GitHub Gist\n(No read_csv() path issues either üòâ)\nGist dataset \n\n\n\n\nCode\ngdp_df &lt;- read_csv(\"https://gist.githubusercontent.com/jpowerj/fecd437b96d0954893de727383f2eaf2/raw/fec58507f7095cb8341b229d6eb74ce53232d663/gdp_2010.csv\")\n\n\nRows: 204 Columns: 4\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\nchr (2): name, code\ndbl (2): year, value\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\ngdp_df |&gt; head(6)\n\n\n\n\n\n\nname\ncode\nyear\nvalue\n\n\n\n\nAfghanistan\nAFG\n2010\n15936800636\n\n\nAlbania\nALB\n2010\n11926953259\n\n\nAlgeria\nDZA\n2010\n161207268655\n\n\nAmerican Samoa\nASM\n2010\n576000000\n\n\nAndorra\nAND\n2010\n3355695364\n\n\nAngola\nAGO\n2010\n82470913121"
  },
  {
    "objectID": "w07-2/index.html#tibble",
    "href": "w07-2/index.html#tibble",
    "title": "Introduction to the Tidyverse",
    "section": "tibble",
    "text": "tibble\nHomepage  | Overview (R4DS)  | PDF Cheatsheet \n\n\nReplaces R‚Äôs built-in data.frame, but retains syntax for backwards compatibility:\n\n\nCode\nlibrary(tibble)\ndata &lt;- c(3.4,1.1,9.6)\nlabels &lt;- c(0,1,0)\nsupervised_df &lt;- tibble::tibble(\n  x=data,\n  y=labels\n)\nsupervised_df\n\n\n\n\n\n\nx\ny\n\n\n\n\n3.4\n0\n\n\n1.1\n1\n\n\n9.6\n0\n\n\n\n\n\n\n\n\nProvides a surprisingly useful function: tribble() (tibble defined row-by-row)\n\n\n\nCode\nlibrary(tibble)\ndsan_df &lt;- tibble::tribble(\n    ~code, ~topic, ~credits,\n    \"dsan5000\", \"Data Science\", 3,\n    \"dsan5100\", \"Probability\", 3,\n    \"dsan5200\", \"Visualization\", 3\n)\ndsan_df\n\n\n\n\n\n\ncode\ntopic\ncredits\n\n\n\n\ndsan5000\nData Science\n3\n\n\ndsan5100\nProbability\n3\n\n\ndsan5200\nVisualization\n3"
  },
  {
    "objectID": "w07-2/index.html#dplyr",
    "href": "w07-2/index.html#dplyr",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\nHomepage  | Overview (R4DS)  | PDF Cheatsheet \n\n\nGrammar of data manipulation (verbs):\n filter()\n select()\n arrange()\n mutate()\n summarize()\n\n filter(): Keep rows matching a boolean condition\n\n\nCode\ntable1 |&gt; filter(year == 2000)\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n2000\n213766\n1280428583"
  },
  {
    "objectID": "w07-2/index.html#dplyr-1",
    "href": "w07-2/index.html#dplyr-1",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\n\n\n select():\n\n\nCode\ntable1 |&gt; select(country)\n\n\n\n\n\n\ncountry\n\n\n\n\nAfghanistan\n\n\nAfghanistan\n\n\nBrazil\n\n\nBrazil\n\n\nChina\n\n\nChina\n\n\n\n\n\n\nCode\ntable1 |&gt; select(-country) |&gt; head(3)\n\n\n\n\n\n\nyear\ncases\npopulation\n\n\n\n\n1999\n745\n19987071\n\n\n2000\n2666\n20595360\n\n\n1999\n37737\n172006362\n\n\n\n\n\n\n\n arrange():\n\n\nCode\ntable1 |&gt; arrange(population)\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\nCode\ntable1 |&gt; arrange(desc(population)) |&gt; head(3)\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nChina\n2000\n213766\n1280428583\n\n\nChina\n1999\n212258\n1272915272\n\n\nBrazil\n2000\n80488\n174504898"
  },
  {
    "objectID": "w07-2/index.html#dplyr-2",
    "href": "w07-2/index.html#dplyr-2",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\n mutate():\n\n\nCode\ntable1 |&gt; mutate(newvar = 300)\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\nnewvar\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n300\n\n\nAfghanistan\n2000\n2666\n20595360\n300\n\n\nBrazil\n1999\n37737\n172006362\n300\n\n\nBrazil\n2000\n80488\n174504898\n300\n\n\nChina\n1999\n212258\n1272915272\n300\n\n\nChina\n2000\n213766\n1280428583\n300"
  },
  {
    "objectID": "w07-2/index.html#dplyr-3",
    "href": "w07-2/index.html#dplyr-3",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\n\n\n summarize():\n\n\nCode\ntable1 |&gt; \n  summarize(\n    avg_cases = mean(cases),\n    avg_pop = mean(population)\n  )\n\n\n\n\n\n\navg_cases\navg_pop\n\n\n\n\n91276.67\n490072924\n\n\n\n\n\n\n\nsummarize() with grouping:\n\n\nCode\ntable1 |&gt;\n  group_by(country) |&gt;\n  summarize(\n    avg_cases = mean(cases),\n    avg_pop = mean(population)\n  )\n\n\n\n\n\n\ncountry\navg_cases\navg_pop\n\n\n\n\nAfghanistan\n1705.5\n20291216\n\n\nBrazil\n59112.5\n173255630\n\n\nChina\n213012.0\n1276671928"
  },
  {
    "objectID": "w07-2/index.html#merging-data",
    "href": "w07-2/index.html#merging-data",
    "title": "Introduction to the Tidyverse",
    "section": " Merging Data",
    "text": "Merging Data\n\nThe task: Analyze relationship between population and GDP (in 2000)\nThe data: One dataset on population in 2000, another on GDP in 2000 and 2010\nLet‚Äôs get the data ready for merging using R\n\n\n\n\n\nCode\ndf &lt;- table1 |&gt;\n  select(country, year, population) |&gt;\n  filter(year == 2000)\ndf |&gt; write_csv(\"assets/pop_2000.csv\")\ndf\n\n\n\n\n\n\ncountry\nyear\npopulation\n\n\n\n\nAfghanistan\n2000\n20595360\n\n\nBrazil\n2000\n174504898\n\n\nChina\n2000\n1280428583\n\n\n\n\n\n\n\n\n\nCode\ngdp_df &lt;- read_csv(\"https://gist.githubusercontent.com/jpowerj/c83e87f61c166dea8ba7e4453f08a404/raw/29b03e6320bc3ffc9f528c2ac497a21f2d801c00/gdp_2000_2010.csv\")\n\n\nRows: 403 Columns: 4\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\nchr (2): Country Name, Country Code\ndbl (2): Year, Value\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\ngdp_df |&gt; head(5)\n\n\n\n\n\n\nCountry Name\nCountry Code\nYear\nValue\n\n\n\n\nAfghanistan\nAFG\n2010\n15936800636\n\n\nAlbania\nALB\n2000\n3632043908\n\n\nAlbania\nALB\n2010\n11926953259\n\n\nAlgeria\nDZA\n2000\n54790245601\n\n\nAlgeria\nDZA\n2010\n161207268655"
  },
  {
    "objectID": "w07-2/index.html#selectingfiltering-in-action",
    "href": "w07-2/index.html#selectingfiltering-in-action",
    "title": "Introduction to the Tidyverse",
    "section": "Selecting/Filtering in Action",
    "text": "Selecting/Filtering in Action\nLet‚Äôs keep just the rows containing data from 2000, drop extraneous columns, and then rename the remaining columns to get rid of the spaces\n\n\nCode\ngdp_2000_df &lt;- gdp_df |&gt;\n  select(`Country Name`,Year,Value) |&gt;\n  filter(Year == \"2000\") |&gt;\n  rename(country=`Country Name`, year=`Year`, gdp=`Value`)\ngdp_2000_df |&gt; write_csv(\"assets/gdp_2000.csv\")\ngdp_2000_df |&gt; head()\n\n\n\n\n\n\ncountry\nyear\ngdp\n\n\n\n\nAlbania\n2000\n3632043908\n\n\nAlgeria\n2000\n54790245601\n\n\nAndorra\n2000\n1434429703\n\n\nAngola\n2000\n9129594819\n\n\nAntigua and Barbuda\n2000\n830158769\n\n\nArgentina\n2000\n284203750000"
  },
  {
    "objectID": "w07-2/index.html#switching-to-python-for-merging",
    "href": "w07-2/index.html#switching-to-python-for-merging",
    "title": "Introduction to the Tidyverse",
    "section": "Switching to Python for Merging!",
    "text": "Switching to Python for Merging!\n\nRemember that we‚Äôre using Quarto, so we can switch to Python whenever we‚Äôd like!\nPandas provides an easy-to-use df.merge(other_df), let‚Äôs use it üòé\n\n\n\nCode\nimport pandas as pd\nfrom IPython.display import Markdown\npop_df = pd.read_csv(\"assets/pop_2000.csv\")\ngdp_df = pd.read_csv(\"assets/gdp_2000.csv\")\n\n\n\n\n\nLeft Join\n\n\n\nCode\nmerged_df = pop_df.merge(gdp_df,\n  on='country', how='left', indicator=True\n)\nMarkdown(merged_df.to_markdown())\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncountry\nyear_x\npopulation\nyear_y\ngdp\n_merge\n\n\n\n\n0\nAfghanistan\n2000\n20595360\nnan\nnan\nleft_only\n\n\n1\nBrazil\n2000\n174504898\n2000\n6.55421e+11\nboth\n\n\n2\nChina\n2000\n1280428583\n2000\n1.21135e+12\nboth\n\n\n\n\n\n\n\nInner join (‚âà Intersection (\\(\\cap\\)))\n\n\n\nCode\nmerged_df = pop_df.merge(gdp_df,\n  on='country', how='inner', indicator=True\n)\nMarkdown(merged_df.to_markdown())\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncountry\nyear_x\npopulation\nyear_y\ngdp\n_merge\n\n\n\n\n0\nBrazil\n2000\n174504898\n2000\n6.55421e+11\nboth\n\n\n1\nChina\n2000\n1280428583\n2000\n1.21135e+12\nboth\n\n\n\n\n\n\n\n(see Appendix Slides ‚Üí for merging via Tidyverse)"
  },
  {
    "objectID": "w07-2/index.html#reshaping-data",
    "href": "w07-2/index.html#reshaping-data",
    "title": "Introduction to the Tidyverse",
    "section": " Reshaping Data",
    "text": "Reshaping Data\nSometimes you can‚Äôt merge because one of the datasets looks like the table on the left (non-tidy), but we need it to look like the table on the right (tidy)‚Ä¶\n\n\nIn data-cleaning jargon, this dataset is long (more than one row per observation)\n\n\nCode\ntable2 |&gt; write_csv(\"assets/long_data.csv\")\ntable2 |&gt; head()\n\n\n\n\n\n\ncountry\nyear\ntype\ncount\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362\n\n\n\n\n\n\n\nIn data-cleaning jargon, this dataset is wide (one row per obs; usually tidy)\n\n\nCode\ntable1 |&gt; write_csv(\"assets/wide_data.csv\")\ntable1 |&gt; head()\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583"
  },
  {
    "objectID": "w07-2/index.html#long-to-wide-pivot_wider",
    "href": "w07-2/index.html#long-to-wide-pivot_wider",
    "title": "Introduction to the Tidyverse",
    "section": "Long-to-Wide: pivot_wider()",
    "text": "Long-to-Wide: pivot_wider()\npivot_wider() Documentation (part of tidyr) \n\n\n\n\nCode\ntable2 |&gt; head()\n\n\n\n\n\n\ncountry\nyear\ntype\ncount\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362\n\n\n\n\n\n\n\n\n\nCode\nwide_df &lt;- table2 |&gt; pivot_wider(\n  id_cols = c(country, year),\n  names_from = type,\n  values_from = count\n)\nwide_df\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583"
  },
  {
    "objectID": "w07-2/index.html#wide-to-long-pivot_longer",
    "href": "w07-2/index.html#wide-to-long-pivot_longer",
    "title": "Introduction to the Tidyverse",
    "section": "Wide-to-Long: pivot_longer()",
    "text": "Wide-to-Long: pivot_longer()\npivot_longer() Documentation (part of tidyr) \n\n\n\n\nCode\nwide_df |&gt; head()\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\n\n\n\nCode\nlong_df &lt;- wide_df |&gt; pivot_longer(\n  cols = c(cases, population),\n  names_to = \"var\",\n  values_to = \"val\"\n)\nlong_df |&gt; head()\n\n\n\n\n\n\ncountry\nyear\nvar\nval\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362"
  },
  {
    "objectID": "w07-2/index.html#forcats",
    "href": "w07-2/index.html#forcats",
    "title": "Introduction to the Tidyverse",
    "section": "forcats",
    "text": "forcats\nHomepage | Overview | Cheatsheet\n\nUtilities for working with factor variables (R‚Äôs data structure for categorical variables)\nfactors = data + levels:\n\n\nCode\nmonth_levels &lt;- c(\n    \"Jan\", \"Feb\", \"Mar\", \"Apr\",\n    \"May\", \"Jun\", \"Jul\", \"Aug\",\n    \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n)\nd &lt;- c(\"Jan\",\"Jan\",\"Feb\",\"Dec\")\nprint(d)\ndataf &lt;- parse_factor(\n    d,\n    levels=month_levels\n)\nprint(dataf)\n\n\n\n\n\n[1] \"Jan\" \"Jan\" \"Feb\" \"Dec\"\n\n\n\n\n[1] Jan Jan Feb Dec\nLevels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
  },
  {
    "objectID": "w07-2/index.html#factors-for-ordering-plot-elements",
    "href": "w07-2/index.html#factors-for-ordering-plot-elements",
    "title": "Introduction to the Tidyverse",
    "section": "Factors for Ordering Plot Elements",
    "text": "Factors for Ordering Plot Elements\n\n\n\n\nCode\nrelig_summary &lt;- gss_cat %&gt;%\n  group_by(relig) %&gt;%\n  summarise(\n    age = mean(age, na.rm = TRUE),\n    tvhours = mean(tvhours, na.rm = TRUE),\n    n = n()\n  )\nrelig_labs &lt;- labs(\n  x = \"TV Hours / Day\",\n  y = \"Religion\"\n)\n\n\nWithout forcats:\n\n\nCode\nrelig_summary |&gt;\n  ggplot(aes(tvhours, relig)) +\n  geom_point(size=g_pointsize) +\n  geom_segment(aes(yend = relig, x=0, xend = tvhours)) +\n  dsan_theme(\"half\") +\n  relig_labs\n\n\n\n\n\n\n\n\n\n\nWith forcats:\n\n\nCode\nrelig_summary |&gt;\n  mutate(relig = fct_reorder(relig, tvhours)) |&gt;\n  ggplot(aes(x=tvhours, y=relig)) +\n    geom_point(size=g_pointsize) +\n    geom_segment(aes(yend = relig, x=0, xend = tvhours)) +\n    dsan_theme(\"half\") +\n    relig_labs"
  },
  {
    "objectID": "w07-2/index.html#sorting-barplots-with-fct_infreq",
    "href": "w07-2/index.html#sorting-barplots-with-fct_infreq",
    "title": "Introduction to the Tidyverse",
    "section": "Sorting Barplots with fct_infreq()",
    "text": "Sorting Barplots with fct_infreq()\n\n\nCode\nbarplot_labs &lt;- labs(\n  title = \"Respondents by Marital Status\",\n  x = \"Marital Status\",\n  y = \"Count\"\n)\n\n\n\n\nCode\ngss_cat |&gt;\n  mutate(marital = marital |&gt; fct_infreq() |&gt; fct_rev()) |&gt;\n  ggplot(aes(marital)) + geom_bar() + barplot_labs +\n  dsan_theme(\"full\")"
  },
  {
    "objectID": "w07-2/index.html#recodingcombining-categories",
    "href": "w07-2/index.html#recodingcombining-categories",
    "title": "Introduction to the Tidyverse",
    "section": "Recoding/Combining Categories",
    "text": "Recoding/Combining Categories\n\n\nAutomatically combining using fct_lump():\n\n\nCode\ngss_cat |&gt;\n    mutate(relig = fct_lump(relig)) |&gt;\n    count(relig)\n\n\n\n\n\n\nrelig\nn\n\n\n\n\nProtestant\n10846\n\n\nOther\n10637\n\n\n\n\n\n\n\nManually Combining using fct_recode():\n\n\nCode\ngss_cat |&gt;\n    mutate(partyid = fct_recode(partyid,\n    \"Republican\"  = \"Strong republican\",\n    \"Republican\"  = \"Not str republican\",\n    \"Independent\" = \"Ind,near rep\",\n    \"Independent\" = \"Ind,near dem\",\n    \"Democrat\"    = \"Not str democrat\",\n    \"Democrat\"    = \"Strong democrat\",\n    \"Other\"       = \"No answer\",\n    \"Other\"       = \"Don't know\",\n    \"Other\"       = \"Other party\"\n  )) |&gt;\n  count(partyid)\n\n\n\n\n\n\npartyid\nn\n\n\n\n\nOther\n548\n\n\nRepublican\n5346\n\n\nIndependent\n8409\n\n\nDemocrat\n7180"
  },
  {
    "objectID": "w07-2/index.html#purrr-functional-programming",
    "href": "w07-2/index.html#purrr-functional-programming",
    "title": "Introduction to the Tidyverse",
    "section": "purrr: Functional Programming",
    "text": "purrr: Functional Programming\nHomepage | Overview | Cheatsheet | Tutorials, with Applications\n\n\nProvides an anonymous function operator ~, arguments get named .x, .y:\n\n\nCode\nmy_points &lt;- c(\"Midterm\"=18, \"Final\"=300)\ntotal_points &lt;- c(\"Midterm\"=20, \"Final\"=400)\n(avg_score &lt;- map2(my_points, total_points,\n  ~ list(frac=.x / .y, pct=(.x/.y)*100)))\n\n\n$Midterm\n$Midterm$frac\n[1] 0.9\n\n$Midterm$pct\n[1] 90\n\n\n$Final\n$Final$frac\n[1] 0.75\n\n$Final$pct\n[1] 75\n\n\n\nAlong with helpful functions for transforming the output\n\n\nCode\nlist_flatten(avg_score)\n\n\n$Midterm_frac\n[1] 0.9\n\n$Midterm_pct\n[1] 90\n\n$Final_frac\n[1] 0.75\n\n$Final_pct\n[1] 75\n\n\n\n\nCode\nevery(avg_score, ~ .x$frac &gt; 0.5)\n\n\n[1] TRUE"
  },
  {
    "objectID": "w07-2/index.html#lubridate",
    "href": "w07-2/index.html#lubridate",
    "title": "Introduction to the Tidyverse",
    "section": "lubridate*",
    "text": "lubridate*\nHomepage | Overview | Cheatsheet\n\n\n\n\n\n\nCaution: Importing lubridate\n\n\n\nNote that lubridate does not get loaded with the other packages in the tidyverse when you call library(tidyverse). It needs to be imported explicitly:\nlibrary(tidyverse)\nlibrary(lubridate)"
  },
  {
    "objectID": "w07-2/index.html#appendix-2-wide-to-long-in-base-r-with-gather",
    "href": "w07-2/index.html#appendix-2-wide-to-long-in-base-r-with-gather",
    "title": "Introduction to the Tidyverse",
    "section": "Appendix 2: Wide-to-Long in Base R with gather()",
    "text": "Appendix 2: Wide-to-Long in Base R with gather()\n\n\n\n\nCode\ntable1\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\n\n\n\nCode\nlong_df &lt;- gather(table1,\n  key = \"variable\",\n  value = cases,\n  -c(country, year)\n)\nlong_df |&gt; head()\n\n\n\n\n\n\ncountry\nyear\nvariable\ncases\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n2000\ncases\n80488\n\n\nChina\n1999\ncases\n212258\n\n\nChina\n2000\ncases\n213766"
  },
  {
    "objectID": "w07-2/slides.html#tidy-data",
    "href": "w07-2/slides.html#tidy-data",
    "title": "Introduction to the Tidyverse",
    "section": "Tidy Data",
    "text": "Tidy Data\n\n\n\nEvery row represents an observation\nEvery column represents an attribute\nEvery cell contains a value \\(V_{{\\color{#E69F00}i}{\\color{#56B4E9}j}}\\) = attribute \\(j\\) for observation \\(i\\)\n\n\n\n\n\n\n\n\n\nVar A\nVar B\n\n\n\n\nObs 1\nVal 1A\nVal 1B\n\n\nObs 2\nVal 2A\nVal 2B\n\n\n\n\n\nTable¬†1: A tidy dataset, with observation IDs in orange, column names in blue, and values in green\n\n\n\n\n\n\n\n\n\n‚úÖ Tidy!\n\n\n\n\n\n\nid\nname\nflights\n\n\n\n\nDCA\nReagan National\n11.55\n\n\nBWI\nBaltimore-Wash Int'l\n11.15\n\n\nIAD\nDulles International\n10.27\n\n\n\n\n\n\n\n\n Tidy Data Check\n\n\n\nChoose a row, take note of its ID\nGo through values in row, asking yourself: is this the value of some attribute of [observation]?\n\n\n\n\n\n\n\n‚ùå Not Tidy!\n\n\n\n\n\n\nid\nvar\nvalue\n\n\n\n\nDCA\nname\nReagan National\n\n\nDCA\nflights\n11.55\n\n\nBWI\nname\nBaltimore-Wash Int'l\n\n\nBWI\nflights\n11.15\n\n\nIAD\nname\nDulles International\n\n\nIAD\nflights\n10.27\n\n\n\n\n\n\n\nAbove: 11.55 is the value of an attribute of DCA (number of flights in 2022, in millions); Right: name is not a property of DCA"
  },
  {
    "objectID": "w07-2/slides.html#observation-ids-can-be-tuples",
    "href": "w07-2/slides.html#observation-ids-can-be-tuples",
    "title": "Introduction to the Tidyverse",
    "section": "Observation IDs Can Be Tuples!",
    "text": "Observation IDs Can Be Tuples!\n\n\n\n\nlibrary(tidyverse)\ntable1\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\n‚úÖ Tidy! Here we pass the ‚ÄúTidy Data Check‚Äù since 745 is a property of [Afghanistan in 1999]: its number of TB cases\n\n\nlibrary(tidyverse)\ntable2 |&gt; head()\n\n\n\n\n\ncountry\nyear\ntype\ncount\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362\n\n\n\n\n\n\n‚ùå Not Tidy! Here we fail the Tidy Data Check since cases is not a property of [Afghanistan in 1999]"
  },
  {
    "objectID": "w07-2/slides.html#the-tidyverse",
    "href": "w07-2/slides.html#the-tidyverse",
    "title": "Introduction to the Tidyverse",
    "section": "The Tidyverse",
    "text": "The Tidyverse\n\n\n\ndplyr \nggplot2 \nforcats \ntibble \n\n\nreadr \nstringr \ntidyr \npurrr"
  },
  {
    "objectID": "w07-2/slides.html#readr",
    "href": "w07-2/slides.html#readr",
    "title": "Introduction to the Tidyverse",
    "section": "readr",
    "text": "readr\nHomepage  | Overview (R4DS)  | PDF Cheatsheet \nTwo key functions: read_csv(), write_csv() (Bonus: read_delim() if others fail)\n\n\n\n\n Warning! read_csv() vs.¬†read.csv()\n\n\nNote that these are not the same as R‚Äôs built-in read.csv() and write.csv()! The built-in R functions will produce a plain data.frame object, not a tibble\n\n\n\n\n\n\n\nCan handle URLs as well!\nShare data+code in seconds by using in combination with GitHub Gist\n(No read_csv() path issues either üòâ)\nGist dataset \n\n\n\ngdp_df &lt;- read_csv(\"https://gist.githubusercontent.com/jpowerj/fecd437b96d0954893de727383f2eaf2/raw/fec58507f7095cb8341b229d6eb74ce53232d663/gdp_2010.csv\")\ngdp_df |&gt; head(6)\n\n\n\n\n\nname\ncode\nyear\nvalue\n\n\n\n\nAfghanistan\nAFG\n2010\n15936800636\n\n\nAlbania\nALB\n2010\n11926953259\n\n\nAlgeria\nDZA\n2010\n161207268655\n\n\nAmerican Samoa\nASM\n2010\n576000000\n\n\nAndorra\nAND\n2010\n3355695364\n\n\nAngola\nAGO\n2010\n82470913121"
  },
  {
    "objectID": "w07-2/slides.html#tibble",
    "href": "w07-2/slides.html#tibble",
    "title": "Introduction to the Tidyverse",
    "section": "tibble",
    "text": "tibble\nHomepage  | Overview (R4DS)  | PDF Cheatsheet \n\n\nReplaces R‚Äôs built-in data.frame, but retains syntax for backwards compatibility:\n\nlibrary(tibble)\ndata &lt;- c(3.4,1.1,9.6)\nlabels &lt;- c(0,1,0)\nsupervised_df &lt;- tibble::tibble(\n  x=data,\n  y=labels\n)\nsupervised_df\n\n\n\n\n\nx\ny\n\n\n\n\n3.4\n0\n\n\n1.1\n1\n\n\n9.6\n0\n\n\n\n\n\n\n\n\nProvides a surprisingly useful function: tribble() (tibble defined row-by-row)\n\n\nlibrary(tibble)\ndsan_df &lt;- tibble::tribble(\n    ~code, ~topic, ~credits,\n    \"dsan5000\", \"Data Science\", 3,\n    \"dsan5100\", \"Probability\", 3,\n    \"dsan5200\", \"Visualization\", 3\n)\ndsan_df\n\n\n\n\n\ncode\ntopic\ncredits\n\n\n\n\ndsan5000\nData Science\n3\n\n\ndsan5100\nProbability\n3\n\n\ndsan5200\nVisualization\n3"
  },
  {
    "objectID": "w07-2/slides.html#dplyr",
    "href": "w07-2/slides.html#dplyr",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\nHomepage  | Overview (R4DS)  | PDF Cheatsheet \n\n\nGrammar of data manipulation (verbs):\n filter()\n select()\n arrange()\n mutate()\n summarize()\n\n filter(): Keep rows matching a boolean condition\n\ntable1 |&gt; filter(year == 2000)\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n2000\n213766\n1280428583"
  },
  {
    "objectID": "w07-2/slides.html#dplyr-1",
    "href": "w07-2/slides.html#dplyr-1",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\n\n\n select():\n\ntable1 |&gt; select(country)\n\n\n\n\n\ncountry\n\n\n\n\nAfghanistan\n\n\nAfghanistan\n\n\nBrazil\n\n\nBrazil\n\n\nChina\n\n\nChina\n\n\n\n\n\ntable1 |&gt; select(-country) |&gt; head(3)\n\n\n\n\n\nyear\ncases\npopulation\n\n\n\n\n1999\n745\n19987071\n\n\n2000\n2666\n20595360\n\n\n1999\n37737\n172006362\n\n\n\n\n\n\n\n arrange():\n\ntable1 |&gt; arrange(population)\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\ntable1 |&gt; arrange(desc(population)) |&gt; head(3)\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nChina\n2000\n213766\n1280428583\n\n\nChina\n1999\n212258\n1272915272\n\n\nBrazil\n2000\n80488\n174504898"
  },
  {
    "objectID": "w07-2/slides.html#dplyr-2",
    "href": "w07-2/slides.html#dplyr-2",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\n mutate():\n\ntable1 |&gt; mutate(newvar = 300)\n\n\n\n\n\ncountry\nyear\ncases\npopulation\nnewvar\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n300\n\n\nAfghanistan\n2000\n2666\n20595360\n300\n\n\nBrazil\n1999\n37737\n172006362\n300\n\n\nBrazil\n2000\n80488\n174504898\n300\n\n\nChina\n1999\n212258\n1272915272\n300\n\n\nChina\n2000\n213766\n1280428583\n300"
  },
  {
    "objectID": "w07-2/slides.html#dplyr-3",
    "href": "w07-2/slides.html#dplyr-3",
    "title": "Introduction to the Tidyverse",
    "section": "dplyr",
    "text": "dplyr\n\n\n summarize():\n\n\nCode\ntable1 |&gt; \n  summarize(\n    avg_cases = mean(cases),\n    avg_pop = mean(population)\n  )\n\n\n\n\n\n\navg_cases\navg_pop\n\n\n\n\n91276.67\n490072924\n\n\n\n\n\n\n\nsummarize() with grouping:\n\n\nCode\ntable1 |&gt;\n  group_by(country) |&gt;\n  summarize(\n    avg_cases = mean(cases),\n    avg_pop = mean(population)\n  )\n\n\n\n\n\n\ncountry\navg_cases\navg_pop\n\n\n\n\nAfghanistan\n1705.5\n20291216\n\n\nBrazil\n59112.5\n173255630\n\n\nChina\n213012.0\n1276671928"
  },
  {
    "objectID": "w07-2/slides.html#merging-data",
    "href": "w07-2/slides.html#merging-data",
    "title": "Introduction to the Tidyverse",
    "section": " Merging Data",
    "text": "Merging Data\n\nThe task: Analyze relationship between population and GDP (in 2000)\nThe data: One dataset on population in 2000, another on GDP in 2000 and 2010\nLet‚Äôs get the data ready for merging using R\n\n\n\n\ndf &lt;- table1 |&gt;\n  select(country, year, population) |&gt;\n  filter(year == 2000)\ndf |&gt; write_csv(\"assets/pop_2000.csv\")\ndf\n\n\n\n\n\ncountry\nyear\npopulation\n\n\n\n\nAfghanistan\n2000\n20595360\n\n\nBrazil\n2000\n174504898\n\n\nChina\n2000\n1280428583\n\n\n\n\n\n\n\n\ngdp_df &lt;- read_csv(\"https://gist.githubusercontent.com/jpowerj/c83e87f61c166dea8ba7e4453f08a404/raw/29b03e6320bc3ffc9f528c2ac497a21f2d801c00/gdp_2000_2010.csv\")\ngdp_df |&gt; head(5)\n\n\n\n\n\nCountry Name\nCountry Code\nYear\nValue\n\n\n\n\nAfghanistan\nAFG\n2010\n15936800636\n\n\nAlbania\nALB\n2000\n3632043908\n\n\nAlbania\nALB\n2010\n11926953259\n\n\nAlgeria\nDZA\n2000\n54790245601\n\n\nAlgeria\nDZA\n2010\n161207268655"
  },
  {
    "objectID": "w07-2/slides.html#selectingfiltering-in-action",
    "href": "w07-2/slides.html#selectingfiltering-in-action",
    "title": "Introduction to the Tidyverse",
    "section": "Selecting/Filtering in Action",
    "text": "Selecting/Filtering in Action\nLet‚Äôs keep just the rows containing data from 2000, drop extraneous columns, and then rename the remaining columns to get rid of the spaces\n\ngdp_2000_df &lt;- gdp_df |&gt;\n  select(`Country Name`,Year,Value) |&gt;\n  filter(Year == \"2000\") |&gt;\n  rename(country=`Country Name`, year=`Year`, gdp=`Value`)\ngdp_2000_df |&gt; write_csv(\"assets/gdp_2000.csv\")\ngdp_2000_df |&gt; head()\n\n\n\n\n\ncountry\nyear\ngdp\n\n\n\n\nAlbania\n2000\n3632043908\n\n\nAlgeria\n2000\n54790245601\n\n\nAndorra\n2000\n1434429703\n\n\nAngola\n2000\n9129594819\n\n\nAntigua and Barbuda\n2000\n830158769\n\n\nArgentina\n2000\n284203750000"
  },
  {
    "objectID": "w07-2/slides.html#switching-to-python-for-merging",
    "href": "w07-2/slides.html#switching-to-python-for-merging",
    "title": "Introduction to the Tidyverse",
    "section": "Switching to Python for Merging!",
    "text": "Switching to Python for Merging!\n\nRemember that we‚Äôre using Quarto, so we can switch to Python whenever we‚Äôd like!\nPandas provides an easy-to-use df.merge(other_df), let‚Äôs use it üòé\n\n\nimport pandas as pd\nfrom IPython.display import Markdown\npop_df = pd.read_csv(\"assets/pop_2000.csv\")\ngdp_df = pd.read_csv(\"assets/gdp_2000.csv\")\n\n\n\n\nLeft Join\n\n\nmerged_df = pop_df.merge(gdp_df,\n  on='country', how='left', indicator=True\n)\nMarkdown(merged_df.to_markdown())\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncountry\nyear_x\npopulation\nyear_y\ngdp\n_merge\n\n\n\n\n0\nAfghanistan\n2000\n20595360\nnan\nnan\nleft_only\n\n\n1\nBrazil\n2000\n174504898\n2000\n6.55421e+11\nboth\n\n\n2\nChina\n2000\n1280428583\n2000\n1.21135e+12\nboth\n\n\n\n\n\n\n\nInner join (‚âà Intersection (\\(\\cap\\)))\n\n\nmerged_df = pop_df.merge(gdp_df,\n  on='country', how='inner', indicator=True\n)\nMarkdown(merged_df.to_markdown())\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncountry\nyear_x\npopulation\nyear_y\ngdp\n_merge\n\n\n\n\n0\nBrazil\n2000\n174504898\n2000\n6.55421e+11\nboth\n\n\n1\nChina\n2000\n1280428583\n2000\n1.21135e+12\nboth\n\n\n\n\n\n\n\n(see Appendix Slides ‚Üí for merging via Tidyverse)"
  },
  {
    "objectID": "w07-2/slides.html#reshaping-data",
    "href": "w07-2/slides.html#reshaping-data",
    "title": "Introduction to the Tidyverse",
    "section": " Reshaping Data",
    "text": "Reshaping Data\nSometimes you can‚Äôt merge because one of the datasets looks like the table on the left (non-tidy), but we need it to look like the table on the right (tidy)‚Ä¶\n\n\nIn data-cleaning jargon, this dataset is long (more than one row per observation)\n\ntable2 |&gt; write_csv(\"assets/long_data.csv\")\ntable2 |&gt; head()\n\n\n\n\n\ncountry\nyear\ntype\ncount\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362\n\n\n\n\n\n\n\nIn data-cleaning jargon, this dataset is wide (one row per obs; usually tidy)\n\ntable1 |&gt; write_csv(\"assets/wide_data.csv\")\ntable1 |&gt; head()\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583"
  },
  {
    "objectID": "w07-2/slides.html#long-to-wide-pivot_wider",
    "href": "w07-2/slides.html#long-to-wide-pivot_wider",
    "title": "Introduction to the Tidyverse",
    "section": "Long-to-Wide: pivot_wider()",
    "text": "Long-to-Wide: pivot_wider()\npivot_wider() Documentation (part of tidyr) \n\n\n\ntable2 |&gt; head()\n\n\n\n\n\ncountry\nyear\ntype\ncount\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362\n\n\n\n\n\n\n\n\nwide_df &lt;- table2 |&gt; pivot_wider(\n  id_cols = c(country, year),\n  names_from = type,\n  values_from = count\n)\nwide_df\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583"
  },
  {
    "objectID": "w07-2/slides.html#wide-to-long-pivot_longer",
    "href": "w07-2/slides.html#wide-to-long-pivot_longer",
    "title": "Introduction to the Tidyverse",
    "section": "Wide-to-Long: pivot_longer()",
    "text": "Wide-to-Long: pivot_longer()\npivot_longer() Documentation (part of tidyr) \n\n\n\nwide_df |&gt; head()\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\n\n\nlong_df &lt;- wide_df |&gt; pivot_longer(\n  cols = c(cases, population),\n  names_to = \"var\",\n  values_to = \"val\"\n)\nlong_df |&gt; head()\n\n\n\n\n\ncountry\nyear\nvar\nval\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n1999\npopulation\n19987071\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nAfghanistan\n2000\npopulation\n20595360\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n1999\npopulation\n172006362"
  },
  {
    "objectID": "w07-2/slides.html#forcats",
    "href": "w07-2/slides.html#forcats",
    "title": "Introduction to the Tidyverse",
    "section": "forcats",
    "text": "forcats\nHomepage | Overview | Cheatsheet\n\nUtilities for working with factor variables (R‚Äôs data structure for categorical variables)\nfactors = data + levels:\n\n\nCode\nmonth_levels &lt;- c(\n    \"Jan\", \"Feb\", \"Mar\", \"Apr\",\n    \"May\", \"Jun\", \"Jul\", \"Aug\",\n    \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n)\nd &lt;- c(\"Jan\",\"Jan\",\"Feb\",\"Dec\")\nprint(d)\ndataf &lt;- parse_factor(\n    d,\n    levels=month_levels\n)\nprint(dataf)\n\n\n\n\n\n[1] \"Jan\" \"Jan\" \"Feb\" \"Dec\"\n\n\n\n\n[1] Jan Jan Feb Dec\nLevels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
  },
  {
    "objectID": "w07-2/slides.html#factors-for-ordering-plot-elements",
    "href": "w07-2/slides.html#factors-for-ordering-plot-elements",
    "title": "Introduction to the Tidyverse",
    "section": "Factors for Ordering Plot Elements",
    "text": "Factors for Ordering Plot Elements\n\n\n\nrelig_summary &lt;- gss_cat %&gt;%\n  group_by(relig) %&gt;%\n  summarise(\n    age = mean(age, na.rm = TRUE),\n    tvhours = mean(tvhours, na.rm = TRUE),\n    n = n()\n  )\nrelig_labs &lt;- labs(\n  x = \"TV Hours / Day\",\n  y = \"Religion\"\n)\n\nWithout forcats:\n\n\nCode\nrelig_summary |&gt;\n  ggplot(aes(tvhours, relig)) +\n  geom_point(size=g_pointsize) +\n  geom_segment(aes(yend = relig, x=0, xend = tvhours)) +\n  dsan_theme(\"half\") +\n  relig_labs\n\n\n\n\n\n\n\n\n\n\nWith forcats:\n\n\nCode\nrelig_summary |&gt;\n  mutate(relig = fct_reorder(relig, tvhours)) |&gt;\n  ggplot(aes(x=tvhours, y=relig)) +\n    geom_point(size=g_pointsize) +\n    geom_segment(aes(yend = relig, x=0, xend = tvhours)) +\n    dsan_theme(\"half\") +\n    relig_labs"
  },
  {
    "objectID": "w07-2/slides.html#sorting-barplots-with-fct_infreq",
    "href": "w07-2/slides.html#sorting-barplots-with-fct_infreq",
    "title": "Introduction to the Tidyverse",
    "section": "Sorting Barplots with fct_infreq()",
    "text": "Sorting Barplots with fct_infreq()\n\nbarplot_labs &lt;- labs(\n  title = \"Respondents by Marital Status\",\n  x = \"Marital Status\",\n  y = \"Count\"\n)\n\n\n\nCode\ngss_cat |&gt;\n  mutate(marital = marital |&gt; fct_infreq() |&gt; fct_rev()) |&gt;\n  ggplot(aes(marital)) + geom_bar() + barplot_labs +\n  dsan_theme(\"full\")"
  },
  {
    "objectID": "w07-2/slides.html#recodingcombining-categories",
    "href": "w07-2/slides.html#recodingcombining-categories",
    "title": "Introduction to the Tidyverse",
    "section": "Recoding/Combining Categories",
    "text": "Recoding/Combining Categories\n\n\nAutomatically combining using fct_lump():\n\n\nCode\ngss_cat |&gt;\n    mutate(relig = fct_lump(relig)) |&gt;\n    count(relig)\n\n\n\n\n\n\nrelig\nn\n\n\n\n\nProtestant\n10846\n\n\nOther\n10637\n\n\n\n\n\n\n\nManually Combining using fct_recode():\n\n\nCode\ngss_cat |&gt;\n    mutate(partyid = fct_recode(partyid,\n    \"Republican\"  = \"Strong republican\",\n    \"Republican\"  = \"Not str republican\",\n    \"Independent\" = \"Ind,near rep\",\n    \"Independent\" = \"Ind,near dem\",\n    \"Democrat\"    = \"Not str democrat\",\n    \"Democrat\"    = \"Strong democrat\",\n    \"Other\"       = \"No answer\",\n    \"Other\"       = \"Don't know\",\n    \"Other\"       = \"Other party\"\n  )) |&gt;\n  count(partyid)\n\n\n\n\n\n\npartyid\nn\n\n\n\n\nOther\n548\n\n\nRepublican\n5346\n\n\nIndependent\n8409\n\n\nDemocrat\n7180"
  },
  {
    "objectID": "w07-2/slides.html#purrr-functional-programming",
    "href": "w07-2/slides.html#purrr-functional-programming",
    "title": "Introduction to the Tidyverse",
    "section": "purrr: Functional Programming",
    "text": "purrr: Functional Programming\nHomepage | Overview | Cheatsheet | Tutorials, with Applications\n\n\nProvides an anonymous function operator ~, arguments get named .x, .y:\n\n\nCode\nmy_points &lt;- c(\"Midterm\"=18, \"Final\"=300)\ntotal_points &lt;- c(\"Midterm\"=20, \"Final\"=400)\n(avg_score &lt;- map2(my_points, total_points,\n  ~ list(frac=.x / .y, pct=(.x/.y)*100)))\n\n\n$Midterm\n$Midterm$frac\n[1] 0.9\n\n$Midterm$pct\n[1] 90\n\n\n$Final\n$Final$frac\n[1] 0.75\n\n$Final$pct\n[1] 75\n\n\n\nAlong with helpful functions for transforming the output\n\n\nCode\nlist_flatten(avg_score)\n\n\n$Midterm_frac\n[1] 0.9\n\n$Midterm_pct\n[1] 90\n\n$Final_frac\n[1] 0.75\n\n$Final_pct\n[1] 75\n\n\n\n\nCode\nevery(avg_score, ~ .x$frac &gt; 0.5)\n\n\n[1] TRUE"
  },
  {
    "objectID": "w07-2/slides.html#lubridate",
    "href": "w07-2/slides.html#lubridate",
    "title": "Introduction to the Tidyverse",
    "section": "lubridate*",
    "text": "lubridate*\nHomepage | Overview | Cheatsheet\n\n\n\n\n\n\n\nCaution: Importing lubridate\n\n\nNote that lubridate does not get loaded with the other packages in the tidyverse when you call library(tidyverse). It needs to be imported explicitly:\nlibrary(tidyverse)\nlibrary(lubridate)"
  },
  {
    "objectID": "w07-2/slides.html#appendix-2-wide-to-long-in-base-r-with-gather",
    "href": "w07-2/slides.html#appendix-2-wide-to-long-in-base-r-with-gather",
    "title": "Introduction to the Tidyverse",
    "section": "Appendix 2: Wide-to-Long in Base R with gather()",
    "text": "Appendix 2: Wide-to-Long in Base R with gather()\n\n\n\n\nCode\ntable1\n\n\n\n\n\n\ncountry\nyear\ncases\npopulation\n\n\n\n\nAfghanistan\n1999\n745\n19987071\n\n\nAfghanistan\n2000\n2666\n20595360\n\n\nBrazil\n1999\n37737\n172006362\n\n\nBrazil\n2000\n80488\n174504898\n\n\nChina\n1999\n212258\n1272915272\n\n\nChina\n2000\n213766\n1280428583\n\n\n\n\n\n\n\n\n\nCode\nlong_df &lt;- gather(table1,\n  key = \"variable\",\n  value = cases,\n  -c(country, year)\n)\nlong_df |&gt; head()\n\n\n\n\n\n\ncountry\nyear\nvariable\ncases\n\n\n\n\nAfghanistan\n1999\ncases\n745\n\n\nAfghanistan\n2000\ncases\n2666\n\n\nBrazil\n1999\ncases\n37737\n\n\nBrazil\n2000\ncases\n80488\n\n\nChina\n1999\ncases\n212258\n\n\nChina\n2000\ncases\n213766\n\n\n\n\n\n\n\n\n\n\n\n2024 DSAN Bootcamp W07-2: Tidyverse"
  },
  {
    "objectID": "w08-2/index.html",
    "href": "w08-2/index.html",
    "title": "Using APIs in R",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w08-2/index.html#from-easy-mode-to-hard-mode",
    "href": "w08-2/index.html#from-easy-mode-to-hard-mode",
    "title": "Using APIs in R",
    "section": "From Easy Mode to Hard Mode",
    "text": "From Easy Mode to Hard Mode\n\n\n\n\n\n\n\n\nDifficulty\nScenario\nSolution\n\n\n\n\nEasyüòä\nDataset already exists in desired format\nDirect download (e.g., as .csv)\n\n\nMediumüòê\nData exists in structured form on website\nWeb scraping\n\n\nHardüò≥\nThe dataset doesn‚Äôt exist and isn‚Äôt directly presented on a website\nUse an API (if it exists)"
  },
  {
    "objectID": "w08-2/index.html#web-scraping-overview",
    "href": "w08-2/index.html#web-scraping-overview",
    "title": "Using APIs in R",
    "section": "Web Scraping Overview",
    "text": "Web Scraping Overview\n\nFun fact: you can view a webpage‚Äôs HTML source code by right-clicking on the page and selecting ‚ÄúView Source‚Äù\n\nOn older websites, this means we can just request page and parse the returned HTML\n\nLess fun fact: modern web frameworks (React, Next.js) generate pages dynamically using JS, meaning that what you see on the page will not be visible in the HTML source\n\nData scraping still possible for these sites! Using browser automation tools like Selenium"
  },
  {
    "objectID": "w08-2/index.html#scraping-difficulty",
    "href": "w08-2/index.html#scraping-difficulty",
    "title": "Using APIs in R",
    "section": "Scraping Difficulty",
    "text": "Scraping Difficulty\n\n\n\n\n\n\n\n\n\n\n\nHow is data loaded?\nSolution\nExample\n\n\n\n\nEasyüòä\nWithin HTML source\nView Source\n\n\n\nMediumüòê\nDynamically via internal API\nView Source, find API call, scrape via R\n\n\n\nHardüò≥\nDynamically via web framework\nUse Selenium"
  },
  {
    "objectID": "w08-2/index.html#easy-mode-wikipedia",
    "href": "w08-2/index.html#easy-mode-wikipedia",
    "title": "Using APIs in R",
    "section": "Easy Mode (Wikipedia)",
    "text": "Easy Mode (Wikipedia)\nFrom List of United States cities by population  (via View Source)\n\n\n\n\n‚Üí"
  },
  {
    "objectID": "w08-2/index.html#this-means-it-can-be-scraped-immediately",
    "href": "w08-2/index.html#this-means-it-can-be-scraped-immediately",
    "title": "Using APIs in R",
    "section": "This Means It Can Be Scraped ‚ÄúImmediately‚Äù!",
    "text": "This Means It Can Be Scraped ‚ÄúImmediately‚Äù!\nHere we use mini-language XPath to extract portions of the HTML containing our data (see Appendix for more!)\n\n\nCode\nlibrary(httr2)\nrequest_obj &lt;- request(\"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population\")\nresponse_obj &lt;- req_perform(request_obj)\n# Parse HTML\nlibrary(xml2)\n\n\n\nAttaching package: 'xml2'\n\n\nThe following object is masked from 'package:httr2':\n\n    url_parse\n\n\nCode\nhtml_obj &lt;- response_obj |&gt; resp_body_html()\nhtml_obj |&gt; xml_find_all('//table[3]//td[1]') |&gt; head()\n\n\n{xml_nodeset (6)}\n[1] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/New_York_City\" t ...\n[2] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Los_Angeles\" tit ...\n[3] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Chicago\" title=\" ...\n[4] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Houston\" title=\" ...\n[5] &lt;td style=\"background-color:#ccff99\"&gt;\\n&lt;i&gt;&lt;b&gt;&lt;a href=\"/wiki/Phoenix,_Ariz ...\n[6] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Philadelphia\" ti ..."
  },
  {
    "objectID": "w08-2/index.html#medium-mode",
    "href": "w08-2/index.html#medium-mode",
    "title": "Using APIs in R",
    "section": "Medium Mode",
    "text": "Medium Mode\nOften more of an art than a science, but the Developer Console‚Äôs ‚ÄúNetwork‚Äù tab is your friend!\n\n\n\n\n\nThe contents of the Network tab after scrolling a bit through Zyte‚Äôs Quotes to Scrape web-scraping sandbox (which we use a bunch in DSAN 5500 üòâ)\n\n\n\n‚Üí\n\n\n\n\nThe .json file (after right-click on quotes?page=5, ‚ÄúOpen in New Tab‚Äù)"
  },
  {
    "objectID": "w08-2/index.html#apis",
    "href": "w08-2/index.html#apis",
    "title": "Using APIs in R",
    "section": "APIs",
    "text": "APIs\nApplication Programming Interfaces: developer-facing part of data pipeline/service. Abstracts unnecessary details:\n\n\n\n\n\n\n\n\nExample\nCare about\nDon‚Äôt care about\n\n\n\n\nElectrical outlet\nElectricity\nDetails of Alternating/Direct Currents\n\n\nWater fountain\nWater\nDetails of how it‚Äôs pumped into the fountain\n\n\nCar\nAccelerate, brake, reverse\nDetails of combustion engine"
  },
  {
    "objectID": "w08-2/index.html#what-does-an-api-do",
    "href": "w08-2/index.html#what-does-an-api-do",
    "title": "Using APIs in R",
    "section": "What Does an API Do?",
    "text": "What Does an API Do?\nExposes endpoints for use by developers, without requiring them to know the nuts and bolts of your pipeline/service:\n\n\n\n\n\n\n\n\nExample\nEndpoint\nNot Exposed\n\n\n\n\nElectrical outlet\nSocket\nInternal wiring\n\n\nWater fountain\nAerator\nWater pump\n\n\nCar\nPedals, Steering wheel, etc.\nEngine\n\n\n\n\nWhen I‚Äôm teaching programming to students in refugee camps who may have never used a computer before, I try to use the idea of ‚Äúrobots‚Äù: a program is a robot trained to sit there and wait for inputs, then process them in some way and spit out some output. APIs really capture this notion, honestly."
  },
  {
    "objectID": "w08-2/index.html#example-math-api",
    "href": "w08-2/index.html#example-math-api",
    "title": "Using APIs in R",
    "section": "Example: Math API",
    "text": "Example: Math API\n\nBase URL: https://newton.vercel.app/api/v2/\nThe endpoint: factor\nThe argument: \"x^2 - 1\"\nThe request: https://newton.vercel.app/api/v2/factor/x^2-1\n\n\n\nCode\nlibrary(httr2)\nrequest_obj &lt;- request(\"https://newton.vercel.app/api/v2/factor/x^2-1\")\nresponse_obj &lt;- req_perform(request_obj)\nwriteLines(response_obj |&gt; resp_body_string())\n\n\n{\"operation\":\"factor\",\"expression\":\"x^2-1\",\"result\":\"(x - 1) (x + 1)\"}"
  },
  {
    "objectID": "w08-2/index.html#math-api-endpoints",
    "href": "w08-2/index.html#math-api-endpoints",
    "title": "Using APIs in R",
    "section": "Math API Endpoints",
    "text": "Math API Endpoints\n\n\n\nOperation\nAPI Endpoint\nResult\n\n\n\n\nSimplify\n/simplify/2^2+2(2)\n8\n\n\nFactor\n/factor/x^2 + 2x\nx (x + 2)\n\n\nDerive\n/derive/x^2+2x\n2 x + 2\n\n\nIntegrate\n/integrate/x^2+2x\n1/3 x^3 + x^2 + C\n\n\nFind 0‚Äôs\n/zeroes/x^2+2x\n[-2, 0]\n\n\nFind Tangent\n/tangent/2|x^3\n12 x + -16\n\n\nArea Under Curve\n/area/2:4|x^3\n60\n\n\nCosine\n/cos/pi\n-1\n\n\nSine\n/sin/0\n0\n\n\nTangent\n/tan/0\n0"
  },
  {
    "objectID": "w08-2/index.html#spotify-api",
    "href": "w08-2/index.html#spotify-api",
    "title": "Using APIs in R",
    "section": "Spotify API",
    "text": "Spotify API\n\n\n Create an App\n\n\n\n\n\n\n Go to ‚ÄúSettings‚Äù\n\n\n\n\n\n Copy Client ID + secret to secure location"
  },
  {
    "objectID": "w08-2/index.html#managing-secrets-with-.env",
    "href": "w08-2/index.html#managing-secrets-with-.env",
    "title": "Using APIs in R",
    "section": "Managing Secrets with .env",
    "text": "Managing Secrets with .env\n\nüö® Sensitive data (like the client secret) should never be included directly in your code! üö®\nInstead, use .env file to define environment vars, then load via library(dotenv) [documentation ]\nJust make sure to include .env in your .gitignore file! (More on .gitignore next week üôÇ)\n\n\n\n\n\n.env\n\nSECRET_PASSWORD=plsdonttell\n\n\n\n\n\nCode\n\nmycode.r\n\nlibrary(dotenv)\n\n\n\nWarning in readLines(file): incomplete final line found on '.env'\n\n\nCode\nSys.getenv(\"SECRET_PASSWORD\")\n\n\n[1] \"plsdonttell\"\n\n\n\n\n(Now you can share mycode.r without revealing password!)"
  },
  {
    "objectID": "w08-2/index.html#spotifyr-spotify-api-continued",
    "href": "w08-2/index.html#spotifyr-spotify-api-continued",
    "title": "Using APIs in R",
    "section": "spotifyr: Spotify API Continued",
    "text": "spotifyr: Spotify API Continued\n\nAfter storing your client ID+secret in .env, as SPOTIFY_CLIENT_ID and SPOTIFY_CLIENT_SECRET (respectively), the spotifyr library  can be used as an R ‚Äúwrapper‚Äù around Spotify‚Äôs Web API (see spotifyr list of functions )\n\n\n\n\nCode\nlibrary(dotenv) # Loads the client ID+secret from .env\nlibrary(spotifyr)\nlibrary(tidyverse)\n\n\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.2     ‚úî readr     2.1.4\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî ggplot2   3.4.3     ‚úî tibble    3.2.1\n‚úî lubridate 1.9.2     ‚úî tidyr     1.3.0\n‚úî purrr     1.0.2     \n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter()   masks stats::filter()\n‚úñ dplyr::lag()      masks stats::lag()\n‚úñ xml2::url_parse() masks httr2::url_parse()\n‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\nCode\n#access_token &lt;- get_spotify_access_token()\nnba_id &lt;- search_spotify(\"nba youngboy\", type=\"artist\", limit=1) |&gt; pull(id)\nget_artist_top_tracks(nba_id) |&gt; select(id, name) |&gt; head(5)\n\n\n\n\n\n\n\n\n\n\nid\nname\n\n\n\n\n1cMMVJ4FDqhCci9efd1BU6\nNeed It (feat. YoungBoy Never Broke Again)\n\n\n1oWM79mUVdZGCGYjSirHZR\nBandit (with YoungBoy Never Broke Again)\n\n\n6klLvorLoo1sxvZcjJIY8I\nMake No Sense\n\n\n5B0kgjHULYJhAQkK5XsMoC\nWUSYANAME (feat. Youngboy Never Broke Again & Ty Dolla $ign)\n\n\n3sA7HKGzcKTVscdiTCrWpX\nOutside Today"
  },
  {
    "objectID": "w08-2/index.html#scraping-html-with-httr2-and-xml2",
    "href": "w08-2/index.html#scraping-html-with-httr2-and-xml2",
    "title": "Using APIs in R",
    "section": "Scraping HTML with httr2 and xml2",
    "text": "Scraping HTML with httr2 and xml2\nhttr2 Documentation | xml2 Documentation\n\n\nCode\n# Get HTML\nlibrary(httr2)\nrequest_obj &lt;- request(\"https://en.wikipedia.org/wiki/Data_science\")\nresponse_obj &lt;- req_perform(request_obj)\n# Parse HTML\nlibrary(xml2)\nhtml_obj &lt;- response_obj |&gt; resp_body_html()\nhtml_obj |&gt; xml_find_all('//h2//span[@class=\"mw-headline\"]')\n\n\n{xml_nodeset (7)}\n[1] &lt;span class=\"mw-headline\" id=\"Foundations\"&gt;Foundations&lt;/span&gt;\n[2] &lt;span class=\"mw-headline\" id=\"Etymology\"&gt;Etymology&lt;/span&gt;\n[3] &lt;span class=\"mw-headline\" id=\"Data_science_and_data_analysis\"&gt;Data scienc ...\n[4] &lt;span class=\"mw-headline\" id=\"Cloud_Computing_for_Data_Science\"&gt;Cloud Com ...\n[5] &lt;span class=\"mw-headline\" id=\"Ethical_consideration_in_Data_Science\"&gt;Ethi ...\n[6] &lt;span class=\"mw-headline\" id=\"See_also\"&gt;See also&lt;/span&gt;\n[7] &lt;span class=\"mw-headline\" id=\"References\"&gt;References&lt;/span&gt;\n\n\n\nNote: httr2 is a re-written version of the original httr package, which is now deprecated. You‚Äôll still see lots of code using httr, however, so it‚Äôs good to know how both versions work. Click here for a helpful vignette on the original httr library."
  },
  {
    "objectID": "w08-2/index.html#navigating-html-with-xpath",
    "href": "w08-2/index.html#navigating-html-with-xpath",
    "title": "Using APIs in R",
    "section": "Navigating HTML with XPath",
    "text": "Navigating HTML with XPath\nXPath Cheatsheet\n\nNotice the last line on the previous slide:\n\nhtml_obj %&gt;% xml_find_all('//h2//span[@class=\"mw-headline\"]')\n\nThe string passed to xml_find_all() is an XPath selector\n\n\n\nXPath selectors are used by many different libraries, including Selenium (which we‚Äôll look at very soon) and jQuery (a standard extension to plain JavaScript allowing easy searching/manipulation of the DOM), so it‚Äôs good to learn it now!"
  },
  {
    "objectID": "w08-2/index.html#xpath-i-selecting-elements",
    "href": "w08-2/index.html#xpath-i-selecting-elements",
    "title": "Using APIs in R",
    "section": "XPath I: Selecting Elements",
    "text": "XPath I: Selecting Elements\n\n\nmypage.html\n\n&lt;div class=\"container\"&gt;\n  &lt;h1&gt;Header&lt;/h1&gt;\n  &lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\n  &lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n&lt;/div&gt;\n\n\n'//div' matches all elements &lt;div&gt; in the document:\n&lt;div class=\"container\"&gt;\n  &lt;h1&gt;Header&lt;/h1&gt;\n  &lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\n  &lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n&lt;/div&gt;\n'//div//img' matches &lt;img&gt; elements which are children of &lt;div&gt; elements:\n&lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;"
  },
  {
    "objectID": "w08-2/index.html#xpath-ii-filtering-by-attributes",
    "href": "w08-2/index.html#xpath-ii-filtering-by-attributes",
    "title": "Using APIs in R",
    "section": "XPath II: Filtering by Attributes",
    "text": "XPath II: Filtering by Attributes\n\n\nmypage.html\n\n&lt;div class=\"container\"&gt;\n  &lt;h1&gt;Header&lt;/h1&gt;\n  &lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\n  &lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n&lt;/div&gt;\n\n\n'//p[id=\"page-content\"]' matches all &lt;p&gt; elements with id page-content1:\n&lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\nMatching classes is a bit trickier:\n'//img[contains(concat(\" \", normalize-space(@class), \" \"), \" footer-image \")]'\nmatches all &lt;img&gt; elements with page-content as one of their classes2\n&lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;"
  },
  {
    "objectID": "w08-2/index.html#footnotes",
    "href": "w08-2/index.html#footnotes",
    "title": "Using APIs in R",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nIn HTML, ids are required to be unique to particular elements (and elements cannot have more than one id), meaning that this should only return a single element, for valid HTML code (not followed by all webpages!). Also note the double-quotes after id=, which are required in XPath.‚Ü©Ô∏é\nYour intuition may be to just use '//img[@class=\"footer-image\"]'. Sadly, however, this will match only elements with footer-image as their only class. i.e., it will match &lt;img class=\"footer-image\"&gt; but not &lt;img class=\"footer-image another-class\"&gt;. This will usually fail, since most elements on modern webpages have several classes. For example, if the site is using Bootstrap, &lt;p class=\"p-5 m-3\"&gt;&lt;/p&gt; creates a paragraph element with a padding of 5 pixels and a margin of 3 pixels.‚Ü©Ô∏é"
  },
  {
    "objectID": "w08-2/slides.html#from-easy-mode-to-hard-mode",
    "href": "w08-2/slides.html#from-easy-mode-to-hard-mode",
    "title": "Using APIs in R",
    "section": "From Easy Mode to Hard Mode",
    "text": "From Easy Mode to Hard Mode\n\n\n\n\n\n\n\n\nDifficulty\nScenario\nSolution\n\n\n\n\nEasyüòä\nDataset already exists in desired format\nDirect download (e.g., as .csv)\n\n\nMediumüòê\nData exists in structured form on website\nWeb scraping\n\n\nHardüò≥\nThe dataset doesn‚Äôt exist and isn‚Äôt directly presented on a website\nUse an API (if it exists)"
  },
  {
    "objectID": "w08-2/slides.html#web-scraping-overview",
    "href": "w08-2/slides.html#web-scraping-overview",
    "title": "Using APIs in R",
    "section": "Web Scraping Overview",
    "text": "Web Scraping Overview\n\nFun fact: you can view a webpage‚Äôs HTML source code by right-clicking on the page and selecting ‚ÄúView Source‚Äù\n\nOn older websites, this means we can just request page and parse the returned HTML\n\nLess fun fact: modern web frameworks (React, Next.js) generate pages dynamically using JS, meaning that what you see on the page will not be visible in the HTML source\n\nData scraping still possible for these sites! Using browser automation tools like Selenium"
  },
  {
    "objectID": "w08-2/slides.html#scraping-difficulty",
    "href": "w08-2/slides.html#scraping-difficulty",
    "title": "Using APIs in R",
    "section": "Scraping Difficulty",
    "text": "Scraping Difficulty\n\n\n\n\n\n\n\n\n\n\n\nHow is data loaded?\nSolution\nExample\n\n\n\n\nEasyüòä\nWithin HTML source\nView Source\n\n\n\nMediumüòê\nDynamically via internal API\nView Source, find API call, scrape via R\n\n\n\nHardüò≥\nDynamically via web framework\nUse Selenium"
  },
  {
    "objectID": "w08-2/slides.html#easy-mode-wikipedia",
    "href": "w08-2/slides.html#easy-mode-wikipedia",
    "title": "Using APIs in R",
    "section": "Easy Mode (Wikipedia)",
    "text": "Easy Mode (Wikipedia)\nFrom List of United States cities by population  (via View Source)\n\n\n\n\n‚Üí"
  },
  {
    "objectID": "w08-2/slides.html#this-means-it-can-be-scraped-immediately",
    "href": "w08-2/slides.html#this-means-it-can-be-scraped-immediately",
    "title": "Using APIs in R",
    "section": "This Means It Can Be Scraped ‚ÄúImmediately‚Äù!",
    "text": "This Means It Can Be Scraped ‚ÄúImmediately‚Äù!\nHere we use mini-language XPath to extract portions of the HTML containing our data (see Appendix for more!)\n\nlibrary(httr2)\nrequest_obj &lt;- request(\"https://en.wikipedia.org/wiki/List_of_United_States_cities_by_population\")\nresponse_obj &lt;- req_perform(request_obj)\n# Parse HTML\nlibrary(xml2)\nhtml_obj &lt;- response_obj |&gt; resp_body_html()\nhtml_obj |&gt; xml_find_all('//table[3]//td[1]') |&gt; head()\n\n{xml_nodeset (6)}\n[1] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/New_York_City\" t ...\n[2] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Los_Angeles\" tit ...\n[3] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Chicago\" title=\" ...\n[4] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Houston\" title=\" ...\n[5] &lt;td style=\"background-color:#ccff99\"&gt;\\n&lt;i&gt;&lt;b&gt;&lt;a href=\"/wiki/Phoenix,_Ariz ...\n[6] &lt;td style=\"background-color:#cfecec\"&gt;\\n&lt;i&gt;&lt;a href=\"/wiki/Philadelphia\" ti ..."
  },
  {
    "objectID": "w08-2/slides.html#medium-mode",
    "href": "w08-2/slides.html#medium-mode",
    "title": "Using APIs in R",
    "section": "Medium Mode",
    "text": "Medium Mode\nOften more of an art than a science, but the Developer Console‚Äôs ‚ÄúNetwork‚Äù tab is your friend!\n\n\n\n\n\nThe contents of the Network tab after scrolling a bit through Zyte‚Äôs Quotes to Scrape web-scraping sandbox (which we use a bunch in DSAN 5500 üòâ)\n\n\n\n‚Üí\n\n\n\n\nThe .json file (after right-click on quotes?page=5, ‚ÄúOpen in New Tab‚Äù)"
  },
  {
    "objectID": "w08-2/slides.html#apis",
    "href": "w08-2/slides.html#apis",
    "title": "Using APIs in R",
    "section": "APIs",
    "text": "APIs\nApplication Programming Interfaces: developer-facing part of data pipeline/service. Abstracts unnecessary details:\n\n\n\n\n\n\n\n\nExample\nCare about\nDon‚Äôt care about\n\n\n\n\nElectrical outlet\nElectricity\nDetails of Alternating/Direct Currents\n\n\nWater fountain\nWater\nDetails of how it‚Äôs pumped into the fountain\n\n\nCar\nAccelerate, brake, reverse\nDetails of combustion engine"
  },
  {
    "objectID": "w08-2/slides.html#what-does-an-api-do",
    "href": "w08-2/slides.html#what-does-an-api-do",
    "title": "Using APIs in R",
    "section": "What Does an API Do?",
    "text": "What Does an API Do?\nExposes endpoints for use by developers, without requiring them to know the nuts and bolts of your pipeline/service:\n\n\n\n\n\n\n\n\nExample\nEndpoint\nNot Exposed\n\n\n\n\nElectrical outlet\nSocket\nInternal wiring\n\n\nWater fountain\nAerator\nWater pump\n\n\nCar\nPedals, Steering wheel, etc.\nEngine\n\n\n\n\nWhen I‚Äôm teaching programming to students in refugee camps who may have never used a computer before, I try to use the idea of ‚Äúrobots‚Äù: a program is a robot trained to sit there and wait for inputs, then process them in some way and spit out some output. APIs really capture this notion, honestly."
  },
  {
    "objectID": "w08-2/slides.html#example-math-api",
    "href": "w08-2/slides.html#example-math-api",
    "title": "Using APIs in R",
    "section": "Example: Math API",
    "text": "Example: Math API\n\nBase URL: https://newton.vercel.app/api/v2/\nThe endpoint: factor\nThe argument: \"x^2 - 1\"\nThe request: https://newton.vercel.app/api/v2/factor/x^2-1\n\n\n\nCode\nlibrary(httr2)\nrequest_obj &lt;- request(\"https://newton.vercel.app/api/v2/factor/x^2-1\")\nresponse_obj &lt;- req_perform(request_obj)\nwriteLines(response_obj |&gt; resp_body_string())\n\n\n{\"operation\":\"factor\",\"expression\":\"x^2-1\",\"result\":\"(x - 1) (x + 1)\"}"
  },
  {
    "objectID": "w08-2/slides.html#math-api-endpoints",
    "href": "w08-2/slides.html#math-api-endpoints",
    "title": "Using APIs in R",
    "section": "Math API Endpoints",
    "text": "Math API Endpoints\n\n\n\nOperation\nAPI Endpoint\nResult\n\n\n\n\nSimplify\n/simplify/2^2+2(2)\n8\n\n\nFactor\n/factor/x^2 + 2x\nx (x + 2)\n\n\nDerive\n/derive/x^2+2x\n2 x + 2\n\n\nIntegrate\n/integrate/x^2+2x\n1/3 x^3 + x^2 + C\n\n\nFind 0‚Äôs\n/zeroes/x^2+2x\n[-2, 0]\n\n\nFind Tangent\n/tangent/2|x^3\n12 x + -16\n\n\nArea Under Curve\n/area/2:4|x^3\n60\n\n\nCosine\n/cos/pi\n-1\n\n\nSine\n/sin/0\n0\n\n\nTangent\n/tan/0\n0"
  },
  {
    "objectID": "w08-2/slides.html#spotify-api",
    "href": "w08-2/slides.html#spotify-api",
    "title": "Using APIs in R",
    "section": "Spotify API",
    "text": "Spotify API\n\n\n Create an App\n\n\n\n\n\n\n Go to ‚ÄúSettings‚Äù\n\n\n\n\n\n Copy Client ID + secret to secure location"
  },
  {
    "objectID": "w08-2/slides.html#managing-secrets-with-.env",
    "href": "w08-2/slides.html#managing-secrets-with-.env",
    "title": "Using APIs in R",
    "section": "Managing Secrets with .env",
    "text": "Managing Secrets with .env\n\nüö® Sensitive data (like the client secret) should never be included directly in your code! üö®\nInstead, use .env file to define environment vars, then load via library(dotenv) [documentation ]\nJust make sure to include .env in your .gitignore file! (More on .gitignore next week üôÇ)\n\n\n\n\n\n.env\n\nSECRET_PASSWORD=plsdonttell\n\n\n\n\n\nmycode.r\n\nlibrary(dotenv)\nSys.getenv(\"SECRET_PASSWORD\")\n\n\n[1] \"plsdonttell\"\n\n\n\n\n(Now you can share mycode.r without revealing password!)"
  },
  {
    "objectID": "w08-2/slides.html#spotifyr-spotify-api-continued",
    "href": "w08-2/slides.html#spotifyr-spotify-api-continued",
    "title": "Using APIs in R",
    "section": "spotifyr: Spotify API Continued",
    "text": "spotifyr: Spotify API Continued\n\nAfter storing your client ID+secret in .env, as SPOTIFY_CLIENT_ID and SPOTIFY_CLIENT_SECRET (respectively), the spotifyr library  can be used as an R ‚Äúwrapper‚Äù around Spotify‚Äôs Web API (see spotifyr list of functions )\n\n\n\nlibrary(dotenv) # Loads the client ID+secret from .env\nlibrary(spotifyr)\nlibrary(tidyverse)\n#access_token &lt;- get_spotify_access_token()\nnba_id &lt;- search_spotify(\"nba youngboy\", type=\"artist\", limit=1) |&gt; pull(id)\nget_artist_top_tracks(nba_id) |&gt; select(id, name) |&gt; head(5)\n\n\n\n\n\n\n\n\n\nid\nname\n\n\n\n\n1cMMVJ4FDqhCci9efd1BU6\nNeed It (feat. YoungBoy Never Broke Again)\n\n\n1oWM79mUVdZGCGYjSirHZR\nBandit (with YoungBoy Never Broke Again)\n\n\n6klLvorLoo1sxvZcjJIY8I\nMake No Sense\n\n\n5B0kgjHULYJhAQkK5XsMoC\nWUSYANAME (feat. Youngboy Never Broke Again & Ty Dolla $ign)\n\n\n3sA7HKGzcKTVscdiTCrWpX\nOutside Today"
  },
  {
    "objectID": "w08-2/slides.html#scraping-html-with-httr2-and-xml2",
    "href": "w08-2/slides.html#scraping-html-with-httr2-and-xml2",
    "title": "Using APIs in R",
    "section": "Scraping HTML with httr2 and xml2",
    "text": "Scraping HTML with httr2 and xml2\nhttr2 Documentation | xml2 Documentation\n\n\nCode\n# Get HTML\nlibrary(httr2)\nrequest_obj &lt;- request(\"https://en.wikipedia.org/wiki/Data_science\")\nresponse_obj &lt;- req_perform(request_obj)\n# Parse HTML\nlibrary(xml2)\nhtml_obj &lt;- response_obj |&gt; resp_body_html()\nhtml_obj |&gt; xml_find_all('//h2//span[@class=\"mw-headline\"]')\n\n\n{xml_nodeset (7)}\n[1] &lt;span class=\"mw-headline\" id=\"Foundations\"&gt;Foundations&lt;/span&gt;\n[2] &lt;span class=\"mw-headline\" id=\"Etymology\"&gt;Etymology&lt;/span&gt;\n[3] &lt;span class=\"mw-headline\" id=\"Data_science_and_data_analysis\"&gt;Data scienc ...\n[4] &lt;span class=\"mw-headline\" id=\"Cloud_Computing_for_Data_Science\"&gt;Cloud Com ...\n[5] &lt;span class=\"mw-headline\" id=\"Ethical_consideration_in_Data_Science\"&gt;Ethi ...\n[6] &lt;span class=\"mw-headline\" id=\"See_also\"&gt;See also&lt;/span&gt;\n[7] &lt;span class=\"mw-headline\" id=\"References\"&gt;References&lt;/span&gt;\n\n\n\nNote: httr2 is a re-written version of the original httr package, which is now deprecated. You‚Äôll still see lots of code using httr, however, so it‚Äôs good to know how both versions work. Click here for a helpful vignette on the original httr library."
  },
  {
    "objectID": "w08-2/slides.html#navigating-html-with-xpath",
    "href": "w08-2/slides.html#navigating-html-with-xpath",
    "title": "Using APIs in R",
    "section": "Navigating HTML with XPath",
    "text": "Navigating HTML with XPath\nXPath Cheatsheet\n\nNotice the last line on the previous slide:\n\nhtml_obj %&gt;% xml_find_all('//h2//span[@class=\"mw-headline\"]')\n\nThe string passed to xml_find_all() is an XPath selector\n\n\n\nXPath selectors are used by many different libraries, including Selenium (which we‚Äôll look at very soon) and jQuery (a standard extension to plain JavaScript allowing easy searching/manipulation of the DOM), so it‚Äôs good to learn it now!"
  },
  {
    "objectID": "w08-2/slides.html#xpath-i-selecting-elements",
    "href": "w08-2/slides.html#xpath-i-selecting-elements",
    "title": "Using APIs in R",
    "section": "XPath I: Selecting Elements",
    "text": "XPath I: Selecting Elements\n\n\nmypage.html\n\n&lt;div class=\"container\"&gt;\n  &lt;h1&gt;Header&lt;/h1&gt;\n  &lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\n  &lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n&lt;/div&gt;\n\n\n'//div' matches all elements &lt;div&gt; in the document:\n&lt;div class=\"container\"&gt;\n  &lt;h1&gt;Header&lt;/h1&gt;\n  &lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\n  &lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n&lt;/div&gt;\n'//div//img' matches &lt;img&gt; elements which are children of &lt;div&gt; elements:\n&lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;"
  },
  {
    "objectID": "w08-2/slides.html#xpath-ii-filtering-by-attributes",
    "href": "w08-2/slides.html#xpath-ii-filtering-by-attributes",
    "title": "Using APIs in R",
    "section": "XPath II: Filtering by Attributes",
    "text": "XPath II: Filtering by Attributes\n\n\nmypage.html\n\n&lt;div class=\"container\"&gt;\n  &lt;h1&gt;Header&lt;/h1&gt;\n  &lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\n  &lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n&lt;/div&gt;\n\n\n'//p[id=\"page-content\"]' matches all &lt;p&gt; elements with id page-content1:\n&lt;p id=\"page-content\"&gt;Content&lt;/p&gt;\nMatching classes is a bit trickier:\n'//img[contains(concat(\" \", normalize-space(@class), \" \"), \" footer-image \")]'\nmatches all &lt;img&gt; elements with page-content as one of their classes2\n&lt;img class=\"footer-image m-5\" src=\"footer.png\"&gt;\n\nIn HTML, ids are required to be unique to particular elements (and elements cannot have more than one id), meaning that this should only return a single element, for valid HTML code (not followed by all webpages!). Also note the double-quotes after id=, which are required in XPath.Your intuition may be to just use '//img[@class=\"footer-image\"]'. Sadly, however, this will match only elements with footer-image as their only class. i.e., it will match &lt;img class=\"footer-image\"&gt; but not &lt;img class=\"footer-image another-class\"&gt;. This will usually fail, since most elements on modern webpages have several classes. For example, if the site is using Bootstrap, &lt;p class=\"p-5 m-3\"&gt;&lt;/p&gt; creates a paragraph element with a padding of 5 pixels and a margin of 3 pixels."
  },
  {
    "objectID": "w06-2/index.html",
    "href": "w06-2/index.html",
    "title": "Installing Quarto",
    "section": "",
    "text": "Open slides in new window ‚Üí"
  },
  {
    "objectID": "w06-2/index.html#quarto-projects-in-vscode",
    "href": "w06-2/index.html#quarto-projects-in-vscode",
    "title": "Installing Quarto",
    "section": "Quarto Projects in VSCode",
    "text": "Quarto Projects in VSCode\n\nQuarto Websites \nQuarto Manuscripts \nQuarto Books"
  },
  {
    "objectID": "w06-2/index.html#quarto-projects-in-posit.cloud",
    "href": "w06-2/index.html#quarto-projects-in-posit.cloud",
    "title": "Installing Quarto",
    "section": "Quarto Projects in Posit.Cloud",
    "text": "Quarto Projects in Posit.Cloud\n\nQuarto Websites \nQuarto Manuscripts \nQuarto Books"
  },
  {
    "objectID": "w06-2/slides.html#quarto-projects-in-vscode",
    "href": "w06-2/slides.html#quarto-projects-in-vscode",
    "title": "Installing Quarto",
    "section": "Quarto Projects in VSCode",
    "text": "Quarto Projects in VSCode\n\nQuarto Websites \nQuarto Manuscripts \nQuarto Books"
  },
  {
    "objectID": "w06-2/slides.html#quarto-projects-in-posit.cloud",
    "href": "w06-2/slides.html#quarto-projects-in-posit.cloud",
    "title": "Installing Quarto",
    "section": "Quarto Projects in Posit.Cloud",
    "text": "Quarto Projects in Posit.Cloud\n\nQuarto Websites \nQuarto Manuscripts \nQuarto Books \n\n\n\n\n2024 DSAN Bootcamp W06-2: Installing Quarto"
  }
]